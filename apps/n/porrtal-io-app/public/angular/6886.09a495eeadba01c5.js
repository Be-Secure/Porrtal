"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[6886],{26886:(m,_,s)=>{s.r(_),s.d(_,{default:()=>V});var a=s(15861),r=s(17626),g=s(59213),D=s(26584),n=s(62208),p=s(10699),E=s(32917),h=s(77712),y=s(76898),M=s(19702),P=s(46160);s(85931),s(90912);const i=d=>{let o=class extends d{constructor(...l){super(...l),this.layer=null}get interactive(){return!!(0,n.pC)(this.analysisView)&&this.analysisView.interactive}set interactive(l){(0,n.pC)(this.analysisView)&&(this.analysisView.interactive=l)}get results(){return(0,n.pC)(this.analysisView)?this.analysisView.results:new P.Z}get selectedDimension(){return(0,n.pC)(this.analysisView)?this.analysisView.selectedDimension:null}set selectedDimension(l){(0,n.pC)(this.analysisView)&&(this.analysisView.selectedDimension=l)}createLengthDimensions(l){var u=this;return(0,a.Z)(function*(){if(!(0,n.pC)(u.analysisView))throw(0,p.zE)();yield u.analysisView.createLengthDimensions(l)})()}};return(0,r._)([(0,h.Cb)()],o.prototype,"layer",void 0),(0,r._)([(0,h.Cb)()],o.prototype,"interactive",null),(0,r._)([(0,h.Cb)({readOnly:!0})],o.prototype,"results",null),(0,r._)([(0,h.Cb)()],o.prototype,"selectedDimension",null),(0,r._)([(0,h.Cb)()],o.prototype,"analysisView",void 0),o=(0,r._)([(0,y.j)("esri.views.layers.DimensionLayerView")],o),o};var e=s(45611);const c="analysis-view-handles";let v=class extends((0,M.A)(i(e.Z))){constructor(d){super(d),this.type="dimension-3d",this._analysisModule=null}initialize(){this.handles.add((0,E.YP)(()=>this.layer.source,d=>{this._destroyAnalysisView(),(0,n.pC)(d)&&this._createAnalysisView(d)},E.tX),c)}destroy(){this.handles.remove(c),this._destroyAnalysisView()}isUpdating(){return(0,n.pC)(this._createAnalysisViewTask)||(0,n.pC)(this.analysisView)&&this.analysisView.updating}whenAnalysisView(){var d=this;return(0,a.Z)(function*(){if((0,n.pC)(d.analysisView))return d.analysisView;if((0,n.pC)(d._createAnalysisViewTask))return d._createAnalysisViewTask.promise;throw new D.Z("layerview:no-analysisview-for-analysis","The analysis has not been set on the DimensionLayer of this layer view")})()}_createAnalysisView(d){var o=this;const l=(0,g.vr)(function(){var u=(0,a.Z)(function*(C){return o.analysisView=yield o._createAnalysisViewPromise(d,C),o._createAnalysisViewTask===l&&(o._createAnalysisViewTask=null),o.analysisView});return function(C){return u.apply(this,arguments)}}());this.addResolvingPromise(l.promise),this._createAnalysisViewTask=l}_destroyAnalysisView(){this.analysisView=(0,n.SC)(this.analysisView),this._createAnalysisViewTask=(0,n.IM)(this._createAnalysisViewTask)}_createAnalysisViewPromise(d,o){var l=this;return(0,a.Z)(function*(){let u=l._analysisModule;if((0,n.Wi)(u)){const f=yield l._loadAnalysisModule();l._analysisModule=f,u=f}const C=new u.default({analysis:d,view:l.view,parent:l});if(yield C.when(),(0,p.Hc)(o))throw C.destroy(),(0,p.zE)();return C})()}_loadAnalysisModule(){return Promise.all([s.e(410),s.e(6072),s.e(3308),s.e(125),s.e(5043),s.e(4828),s.e(1329),s.e(8592),s.e(73)]).then(s.bind(s,10073))}};(0,r._)([(0,h.Cb)()],v.prototype,"type",void 0),(0,r._)([(0,h.Cb)()],v.prototype,"analysisView",void 0),(0,r._)([(0,h.Cb)()],v.prototype,"_createAnalysisViewTask",void 0),v=(0,r._)([(0,y.j)("esri.views.3d.layers.DimensionLayerView3D")],v);const V=v},19702:(m,_,s)=>{s.d(_,{A:()=>P});var a=s(15861),r=s(17626),g=s(54024),D=s(10699),n=s(32917),p=s(77712),y=(s(85931),s(90912),s(76898)),M=s(36947);const P=O=>{let t=class extends O{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(i){super.postscript(i),(0,M.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var i=this;return(0,a.Z)(function*(){const e=new AbortController,c=e.signal;i.handles.add((0,g.kB)(()=>e.abort())),yield(0,n.N1)(()=>i.view.defaultsFromMap?.heightModelInfoReady,c),(0,D.k_)(c);const v=(0,M.Wt)(i.layer,i.view.heightModelInfo,i.supportsHeightUnitConversion);if(v)throw v})()}canResume(){const i=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!i||!i.minScale||!i.maxScale||i.minScale>=i.maxScale)}getSuspendInfo(){const i=super.getSuspendInfo(),e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return e&&e.minScale&&e.maxScale&&e.minScale<e.maxScale&&(i.outsideScaleRange=!0),i}};return(0,r._)([(0,p.Cb)()],t.prototype,"view",void 0),(0,r._)([(0,p.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,r._)([(0,y.j)("esri.views.3d.layers.LayerView3D")],t),t}},45611:(m,_,s)=>{s.d(_,{Z:()=>i});var a=s(17626),r=s(14517),g=s(61885),D=s(80542),n=s(61996),p=s(63290),E=s(62208),h=s(60330),y=s(77712),O=(s(85931),s(90912),s(76898));let t=class extends((0,D.p)((0,n.IG)((0,h.v)(g.Z.EventedMixin(r.Z))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const c=this.layer&&this.layer.id||"no id",v=this.layer&&this.layer.title||"no title";p.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${v}', id: '${c}')`,e)}})}get fullOpacity(){return(0,E.Pt)(this.get("layer.opacity"),1)*(0,E.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,a._)([(0,y.Cb)()],t.prototype,"fullOpacity",null),(0,a._)([(0,y.Cb)()],t.prototype,"layer",void 0),(0,a._)([(0,y.Cb)()],t.prototype,"parent",void 0),(0,a._)([(0,y.Cb)({readOnly:!0})],t.prototype,"suspended",null),(0,a._)([(0,y.Cb)({readOnly:!0})],t.prototype,"suspendInfo",null),(0,a._)([(0,y.Cb)({readOnly:!0})],t.prototype,"legendEnabled",null),(0,a._)([(0,y.Cb)({type:Boolean,readOnly:!0})],t.prototype,"updating",null),(0,a._)([(0,y.Cb)({readOnly:!0})],t.prototype,"updatingProgress",null),(0,a._)([(0,y.Cb)()],t.prototype,"visible",null),(0,a._)([(0,y.Cb)()],t.prototype,"view",void 0),t=(0,a._)([(0,O.j)("esri.views.layers.LayerView")],t);const i=t}}]);