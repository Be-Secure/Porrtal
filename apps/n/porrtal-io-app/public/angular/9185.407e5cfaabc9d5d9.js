"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[9185],{29185:(ct,I,n)=>{n.r(I),n.d(I,{loadGLTFMesh:()=>k});var L=n(15861),W=n(91558),$=n(84792),U=n(88159),j=n(21286),o=n(62208),y=n(30217),K=n(550),Z=n(28093),G=n(4794),N=n(61751),b=n(27530),X=n(1607),V=n(92529),m=n(60479),v=n(79800),p=n(63657),D=n(60490),Q=n(60853),z=n(9160),Y=n(93831),h=n(96170),H=n(37187),J=n(79331),C=n(67969),S=n(9554),x=n(63470),F=n(35995);function k(t,e,r){return R.apply(this,arguments)}function R(){return(R=(0,L.Z)(function*(t,e,r){const a=new z.C(q(r)),s=(yield(0,Y.Q)(a,e,r,!0)).model,f=s.lods.shift(),u=new Map,i=new Map;s.textures.forEach((d,B)=>u.set(B,nt(d))),s.materials.forEach((d,B)=>i.set(B,ot(d,u)));const c=et(f);for(const d of c.parts)st(c,d,i);const{position:T,normal:E,tangent:_,color:l,texCoord0:M}=c.vertexAttributes,P={position:T.typedBuffer,normal:(0,o.pC)(E)?E.typedBuffer:null,tangent:(0,o.pC)(_)?_.typedBuffer:null,uv:(0,o.pC)(M)?M.typedBuffer:null,color:(0,o.pC)(l)?l.typedBuffer:null},A=(0,Q.w1)(P,t,r);return{transform:A.transform,components:c.components,spatialReference:t.spatialReference,vertexAttributes:new V.Q({position:A.vertexAttributes.position,normal:A.vertexAttributes.normal,tangent:A.vertexAttributes.tangent,color:P.color,uv:P.uv})}})).apply(this,arguments)}function q(t){const e=t?.resolveFile;return e?{busy:!1,request:(r=(0,L.Z)(function*(a,s,f){const u=e(a),i="image"===s?"image":"binary"===s?"array-buffer":"json";return(yield(0,$.default)(u,{responseType:i,signal:(0,o.pC)(f)?f.signal:null})).data}),function(s,f,u){return r.apply(this,arguments)})}:null;var r}function O(t,e){if((0,o.Wi)(t))return"-";const r=t.typedBuffer;return`${(0,U.s1)(e,r.buffer,()=>e.size)}/${r.byteOffset}/${r.byteLength}`}function tt(t){return(0,o.pC)(t)?t.toString():"-"}function et(t){let e=0;const r={color:!1,tangent:!1,normal:!1,texCoord0:!1},a=new Map,s=new Map,f=[];for(const u of t.parts){const{attributes:{position:i,normal:c,color:T,tangent:E,texCoord0:_}}=u,l=`\n      ${O(i,a)}/\n      ${O(c,a)}/\n      ${O(T,a)}/\n      ${O(E,a)}/\n      ${O(_,a)}/\n      ${tt(u.transform)}\n    `;let M=!1;const P=(0,U.s1)(s,l,()=>(M=!0,{start:e,length:i.count}));M&&(e+=i.count),c&&(r.normal=!0),T&&(r.color=!0),E&&(r.tangent=!0),_&&(r.texCoord0=!0),f.push({gltf:u,writeVertices:M,region:P})}return{vertexAttributes:{position:(0,D.gS)(m.fP,e),normal:r.normal?(0,D.gS)(m.ct,e):null,tangent:r.tangent?(0,D.gS)(m.ek,e):null,color:r.color?(0,D.gS)(m.mc,e):null,texCoord0:r.texCoord0?(0,D.gS)(m.Eu,e):null},parts:f,components:[]}}function nt(t){return new X.Z({data:t.data,wrap:lt(t.parameters.wrap)})}function ot(t,e){const r=new W.Z(function ut(t,e){return(0,G.f)(g(t[0]),g(t[1]),g(t[2]),e)}(t.color,t.opacity)),a=t.emissiveFactor?new W.Z(function it(t){return(0,Z.f)(g(t[0]),g(t[1]),g(t[2]))}(t.emissiveFactor)):null;return new b.Z({color:r,colorTexture:(0,o.Wg)((0,o.yw)(t.textureColor,s=>e.get(s))),normalTexture:(0,o.Wg)((0,o.yw)(t.textureNormal,s=>e.get(s))),emissiveColor:a,emissiveTexture:(0,o.Wg)((0,o.yw)(t.textureEmissive,s=>e.get(s))),occlusionTexture:(0,o.Wg)((0,o.yw)(t.textureOcclusion,s=>e.get(s))),alphaMode:at(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:(0,o.Wg)((0,o.yw)(t.textureMetallicRoughness,s=>e.get(s))),colorTextureTransform:t.colorTextureTransform,normalTextureTransform:t.normalTextureTransform,occlusionTextureTransform:t.occlusionTextureTransform,emissiveTextureTransform:t.emissiveTextureTransform,metallicRoughnessTextureTransform:t.metallicRoughnessTextureTransform})}function st(t,e,r){e.writeVertices&&function rt(t,e){const{position:r,normal:a,tangent:s,color:f,texCoord0:u}=t.vertexAttributes,i=e.region.start,{attributes:c,transform:T}=e.gltf,E=c.position.count;if((0,v.t)(r.slice(i,E),c.position,T),(0,o.pC)(c.normal)&&(0,o.pC)(a)){const _=(0,y.b)((0,K.c)(),T),l=a.slice(i,E);(0,v.a)(l,c.normal,_),(0,j.oc)(_)&&(0,v.n)(l,l)}else(0,o.pC)(a)&&(0,S.f)(a,0,0,1,{dstIndex:i,count:E});if((0,o.pC)(c.tangent)&&(0,o.pC)(s)){const _=(0,y.b)((0,K.c)(),T),l=s.slice(i,E);(0,p.t)(l,c.tangent,_),(0,j.oc)(_)&&(0,p.n)(l,l)}else(0,o.pC)(s)&&(0,x.f)(s,0,0,1,1,{dstIndex:i,count:E});if((0,o.pC)(c.texCoord0)&&(0,o.pC)(u)?(0,F.n)(u.slice(i,E),c.texCoord0):(0,o.pC)(u)&&(0,F.f)(u,0,0,{dstIndex:i,count:E}),(0,o.pC)(c.color)&&(0,o.pC)(f)){const _=c.color,l=f.slice(i,E);if(4===_.elementCount)_ instanceof m.ek?(0,p.s)(l,_,255):_ instanceof m.mc?(0,x.c)(l,_):_ instanceof m.v6&&(0,p.a)(l,_,8);else{(0,x.f)(l,255,255,255,255);const M=m.ne.fromTypedArray(l.typedBuffer,l.typedBufferStride);_ instanceof m.ct?(0,v.s)(M,_,255):_ instanceof m.ne?(0,S.c)(M,_):_ instanceof m.mw&&(0,v.b)(M,_,8)}}else(0,o.pC)(f)&&(0,x.f)(f.slice(i,E),255,255,255,255)}(t,e);const a=e.gltf,s=function _t(t,e){switch(e){case C.MX.TRIANGLES:return(0,h.nh)(t,H.DX);case C.MX.TRIANGLE_STRIP:return(0,h.DA)(t);case C.MX.TRIANGLE_FAN:return(0,h.jX)(t)}}(a.indices||a.attributes.position.count,a.primitiveType),f=e.region.start;if(f)for(let u=0;u<s.length;u++)s[u]+=f;t.components.push(new N.Z({faces:s,material:r.get(a.material),trustSourceNormals:!0}))}function at(t){switch(t){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function lt(t){return{horizontal:w(t.s),vertical:w(t.t)}}function w(t){switch(t){case C.e8.CLAMP_TO_EDGE:return"clamp";case C.e8.MIRRORED_REPEAT:return"mirror";case C.e8.REPEAT:return"repeat"}}function g(t){return t**(1/J.K)*255}}}]);