/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[4626],{40405:($,L,a)=>{a.d(L,{B:()=>s});var C=a(15861),l=a(62208),T=a(22558),R=a(21726),N=a(35948),B=a(34117),g=a(31283),d=a(77712);function F(i){return I[function J(i){return i instanceof Blob?i.type:function D(i){const h=(0,R.Ml)(i);return w[h]||W}(i.url)}(i)]||E}const I={},W="text/plain",E=I[W],w={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const i in w)I[w[i]]=i;var r=a(29840);function s(i){const h=(0,l.pC)(i)&&i.origins?i.origins:[void 0];return(p,f)=>{const o=function y(i,h,p){if((0,l.pC)(i)&&"resource"===i.type)return function b(i,h,p){const f=(0,B.VZ)(h,p);return{type:String,read:(o,u,v)=>{const c=(0,r.r)(o,u,v);return f.type===String?c:"function"==typeof f.type?new f.type({url:c}):void 0},write:{writer(o,u,v,c){if(!c||!c.resources)return"string"==typeof o?void(u[v]=(0,r.t)(o,c)):void(u[v]=o.write({},c));const U=function G(i){return(0,l.Wi)(i)?null:"string"==typeof i?i:i.url}(o),O=U?(0,r.t)(U,{...c,verifyItemRelativeUrls:c&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},r.M.NO):null,z=f.type!==String&&(!(0,T.l)(this)||c&&c.origin&&this.originIdOf(p)>(0,g.M9)(c.origin));c&&c.portalItem&&(0,l.pC)(O)&&!(0,R.YP)(O)?z?function j(i,h,p,f,o,u,v,c){const U=v.portalItem.resourceFromPath(f),O=Z(p,f,v);F(O)===(0,R.Ml)(U.path)?(x(i,h,U,O,v.resources.toUpdate),o[u]=f):m(i,h,p,f,o,u,v,c)}(this,p,o,O,u,v,c,i):function P(i,h,p,f){f.resources.toKeep.push({resource:f.portalItem.resourceFromPath(i)}),h[p]=i}(O,u,v,c):c&&c.portalItem&&((0,l.Wi)(O)||(0,l.pC)((0,r.i)(O))||(0,R.jc)(O)||z)?m(this,p,o,O,u,v,c,i):u[v]=O}}}}(i,h,p);switch((0,l.pC)(i)&&i.type?i.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:f,write:o}=r.p;return{read:f,write:o}}}}(i,p,f);for(const u of h){const v=(0,d.CJ)(p,u,f);for(const c in o)v[c]=o[c]}}}function m(i,h,p,f,o,u,v,c){const U=(0,N.D)(),O=Z(p,f,v),z=(0,R.v_)((0,l.U2)(c,"prefix"),U),V=`${z}.${F(O)}`,M=v.portalItem.resourceFromPath(V);(0,R.jc)(f)&&v.resources.pendingOperations.push(function S(i){return A.apply(this,arguments)}(f).then(Y=>{M.path=`${z}.${F(Y)}`,o[u]=M.itemRelativeUrl}).catch(()=>{})),x(i,h,M,O,v.resources.toAdd),o[u]=M.itemRelativeUrl}function x(i,h,p,f,o){o.push({resource:p,content:f,finish:u=>{!function K(i,h,p){"string"==typeof i[h]?i[h]=p.url:i[h].url=p.url}(i,h,u)}})}function Z(i,h,p){return"string"==typeof i?{url:h}:new Blob([JSON.stringify(i.toJSON(p))],{type:"application/json"})}function A(){return(A=(0,C.Z)(function*(i){const h=(yield Promise.resolve().then(a.bind(a,84792))).default,{data:p}=yield h(i,{responseType:"blob"});return p})).apply(this,arguments)}},22558:($,L,a)=>{function C(l){return l&&"getAtOrigin"in l&&"originOf"in l}a.d(L,{l:()=>C})},80756:($,L,a)=>{a.r(L),a.d(L,{default:()=>f});var C=a(15861),l=a(17626),T=a(14517),R=a(79608),N=a(61996),B=a(86810),g=a(62208),d=a(77712),I=(a(85931),a(8314),a(90912),a(76898));let W=0,E=class extends((0,B.eC)((0,R.J)((0,N.IG)(T.Z)))){constructor(o){super(o),this.id=`${Date.now().toString(16)}-analysis-${W++}`,this.title=null}get parent(){return this._get("parent")}set parent(o){const u=this.parent;if((0,g.pC)(u))switch(u.type){case"line-of-sight":u.removeAnalysis(this);break;case"2d":case"3d":u.analyses.includes(this)&&u.analyses.remove(this)}this._set("parent",o)}get isEditable(){return this.requiredPropertiesForEditing.every(g.pC)}};(0,l._)([(0,d.Cb)({type:String,constructOnly:!0,clonable:!1})],E.prototype,"id",void 0),(0,l._)([(0,d.Cb)({type:String})],E.prototype,"title",void 0),(0,l._)([(0,d.Cb)({constructOnly:!0})],E.prototype,"type",void 0),(0,l._)([(0,d.Cb)({clonable:!1,value:null})],E.prototype,"parent",null),(0,l._)([(0,d.Cb)({readOnly:!0})],E.prototype,"extent",void 0),(0,l._)([(0,d.Cb)({readOnly:!0})],E.prototype,"isEditable",null),(0,l._)([(0,d.Cb)({readOnly:!0})],E.prototype,"requiredPropertiesForEditing",void 0),(0,l._)([(0,d.Cb)({readOnly:!0})],E.prototype,"nonEditableMessage",void 0),E=(0,l._)([(0,I.j)("esri.analysis.Analysis")],E);const w=E;var r=a(61642),s=a(57574),y=a(46160),b=a(89726),m=a(32917),j=a(55915),P=a(5548),x=a(60507);const Z=y.Z.ofType(s.Z);let S=class extends w{constructor(o){super(o),this.type="line-of-sight",this.observer=null,this.extent=null,this.nonEditableMessage="Assign an observer location to the analysis to allow editing."}initialize(){this.own((0,m.YP)(()=>this._computeExtent(),o=>{((0,g.Wi)(o)||(0,g.Wi)(o.pending))&&this._set("extent",(0,g.pC)(o)?o.extent:null)},m.tX))}get targets(){return this._get("targets")||new Z}set targets(o){this._set("targets",(0,b.Z)(o,this.targets,Z))}get spatialReference(){return(0,g.pC)(this.observer)&&(0,g.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,g.yw)(this.observer,o=>o.position)]}waitComputeExtent(){var o=this;return(0,C.Z)(function*(){const u=o._computeExtent();return(0,g.pC)(u)?(0,g.Wg)(u.pending):null})()}_computeExtent(){const o=this.spatialReference;if((0,g.Wi)(this.observer)||(0,g.Wi)(this.observer.position)||(0,g.Wi)(o))return null;const u=O=>"absolute-height"===(0,x.VW)(O.position,O.elevationInfo),v=this.observer.position,c=(0,P.al)(v.x,v.y,v.z,v.x,v.y,v.z);for(const O of this.targets)if((0,g.pC)(O.position)){const z=(0,j.dz)(O.position,o);if((0,g.pC)(z.pending))return{pending:z.pending,extent:null};if((0,g.pC)(z.geometry)){const{x:V,y:M,z:Y}=z.geometry;(0,P.pp)(c,[V,M,Y])}}const U=(0,P.HH)(c,o);return u(this.observer)&&this.targets.every(u)||(U.zmin=null,U.zmax=null),{pending:null,extent:U}}clear(){this.observer=null,this.targets.removeAll()}};(0,l._)([(0,d.Cb)({type:["line-of-sight"]})],S.prototype,"type",void 0),(0,l._)([(0,d.Cb)({type:r.Z,json:{read:!0,write:!0}})],S.prototype,"observer",void 0),(0,l._)([(0,d.Cb)({cast:b.R,type:Z,nonNullable:!0,json:{read:!0,write:!0}})],S.prototype,"targets",null),(0,l._)([(0,d.Cb)({value:null,readOnly:!0})],S.prototype,"extent",void 0),(0,l._)([(0,d.Cb)({readOnly:!0})],S.prototype,"spatialReference",null),(0,l._)([(0,d.Cb)({readOnly:!0})],S.prototype,"requiredPropertiesForEditing",null),(0,l._)([(0,d.Cb)({readOnly:!0})],S.prototype,"nonEditableMessage",void 0),S=(0,l._)([(0,I.j)("esri.analysis.LineOfSightAnalysis")],S);const A=S;var G=a(99959),K=a(44917),i=a(49286);const h=y.Z.ofType(s.Z);let p=class extends((0,i.q)((0,G.R)(K.Z))){constructor(o){super(o),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new A,this.opacity=1}initialize(){this.own((0,m.YP)(()=>this.analysis,(o,u)=>{(0,g.pC)(u)&&u.parent===this&&(u.parent=null),(0,g.pC)(o)&&(o.parent=this)},m.tX))}load(){var o=this;return(0,C.Z)(function*(){return(0,g.pC)(o.analysis)&&o.addResolvingPromise(o.analysis.waitComputeExtent()),o})()}get observer(){return(0,g.yw)(this.analysis,o=>o.observer)}set observer(o){(0,g.yw)(this.analysis,u=>u.observer=o)}get targets(){return(0,g.pC)(this.analysis)?this.analysis.targets:null}set targets(o){(0,g.yw)(this.analysis,u=>u.targets=o)}get fullExtent(){return(0,g.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,g.pC)(this.analysis)?this.analysis.spatialReference:null}removeAnalysis(o){this.analysis===o&&(this.analysis=new A)}};(0,l._)([(0,d.Cb)({json:{read:!1},readOnly:!0})],p.prototype,"type",void 0),(0,l._)([(0,d.Cb)({type:["LineOfSightLayer"]})],p.prototype,"operationalLayerType",void 0),(0,l._)([(0,d.Cb)({type:r.Z,json:{read:!0,write:{ignoreOrigin:!0}}})],p.prototype,"observer",null),(0,l._)([(0,d.Cb)({type:h,json:{read:!0,write:{ignoreOrigin:!0}}})],p.prototype,"targets",null),(0,l._)([(0,d.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],p.prototype,"analysis",void 0),(0,l._)([(0,d.Cb)({readOnly:!0})],p.prototype,"fullExtent",null),(0,l._)([(0,d.Cb)({readOnly:!0})],p.prototype,"spatialReference",null),(0,l._)([(0,d.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],p.prototype,"opacity",void 0),(0,l._)([(0,d.Cb)({type:["show","hide"]})],p.prototype,"listMode",void 0),p=(0,l._)([(0,I.j)("esri.layers.LineOfSightLayer")],p);const f=p},60507:($,L,a)=>{a.d(L,{RL:()=>B,VW:()=>R,jG:()=>w,tq:()=>W,vQ:()=>J,zx:()=>D});var C=a(62208),l=a(29505);function R(r,s){return function T(r,s){return(0,C.Wi)(s)||!s.mode?r?"absolute-height":"on-the-ground":s.mode}(!!(0,C.pC)(r)&&r.hasZ,s)}function B(r){const s=function d(r){return r.layer&&"elevationInfo"in r.layer?r.layer.elevationInfo:null}(r),y=R(r.geometry,s);return{mode:y,offset:(0,C.pC)(s)&&"on-the-ground"!==y?(0,C.Pt)(s.offset,0)*(0,l.Z7)((0,C.Pt)(s.unit,"meters")):0}}function J(r,s,y,b=null){return I(r,s.x,s.y,s.hasZ?s.z:0,s.spatialReference,y,b)}function D(r,s,y,b,m=null){return I(r,s[0],s[1],s.length>2?s[2]:0,y,b,m)}function I(r,s,y,b,m,j,P=null){if((0,C.Wi)(j))return;const x=(0,C.pC)(P)?P.mode:"absolute-height";if("on-the-ground"===x)return 0;const{absoluteZ:Z}=W(s,y,b,m,r,j);return function E(r,s,y,b,m,j,P,x){const Z=(0,C.pC)(P)&&(0,C.pC)(P.offset)?P.offset:0;switch(x){case"absolute-height":return r-Z;case"relative-to-ground":return r-((0,C.Pt)(j.elevationProvider.getElevation(s,y,b,m,"ground"),0)+Z);case"relative-to-scene":return r-((0,C.Pt)(j.elevationProvider.getElevation(s,y,b,m,"scene"),0)+Z)}}(Z,s,y,b,m,r,P,x)}function W(r,s,y,b,m,j){const P=(0,C.pC)(j.offset)?j.offset:0;switch(j.mode){case"absolute-height":return{absoluteZ:y+P,elevation:0};case"on-the-ground":{const x=(0,C.Pt)(m.elevationProvider.getElevation(r,s,0,b,"ground"),0);return{absoluteZ:x,elevation:x}}case"relative-to-ground":{const x=(0,C.Pt)(m.elevationProvider.getElevation(r,s,y,b,"ground"),0);return{absoluteZ:y+x+P,elevation:x}}case"relative-to-scene":{const x=(0,C.Pt)(m.elevationProvider.getElevation(r,s,y,b,"scene"),0);return{absoluteZ:y+x+P,elevation:x}}}}const w={mode:"absolute-height",offset:0}}}]);