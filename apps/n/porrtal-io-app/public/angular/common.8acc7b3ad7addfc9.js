"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[8592],{61642:(fe,de,_)=>{_.d(de,{Z:()=>te});var v=_(17626),Z=_(8425),C=_(14517),H=_(79608),oe=_(86810),G=_(62208),$=_(77712),K=(_(85931),_(8314),_(90912),_(76898)),N=_(40405),k=_(49672),B=_(82706);let X=class extends((0,oe.eC)((0,H.J)(C.Z))){constructor(ie){super(ie),this.position=null,this.elevationInfo=null,this.feature=null}equals(ie){return(0,G._W)(this.position,ie.position)&&(0,G._W)(this.elevationInfo,ie.elevationInfo)&&(0,Z.kk)(this.feature,ie.feature)}};(0,v._)([(0,$.Cb)({type:k.Z}),(0,N.B)()],X.prototype,"position",void 0),(0,v._)([(0,$.Cb)({type:B.ZP}),(0,N.B)()],X.prototype,"elevationInfo",void 0),(0,v._)([(0,$.Cb)(Z.rX)],X.prototype,"feature",void 0),X=(0,v._)([(0,K.j)("esri.analysis.LineOfSightAnalysisObserver")],X);const te=X},57574:(fe,de,_)=>{_.d(de,{Z:()=>X});var v=_(17626),Z=_(8425),C=_(79608),H=_(86810),oe=_(62208),G=_(77712),re=(_(85931),_(8314),_(90912),_(76898)),K=_(40405),N=_(49672),k=_(82706);let B=class extends((0,H.eC)(C.j)){constructor(te){super(te),this.position=null,this.elevationInfo=null,this.feature=null}equals(te){return(0,oe._W)(this.position,te.position)&&(0,oe._W)(this.elevationInfo,te.elevationInfo)&&(0,Z.kk)(this.feature,te.feature)}};(0,v._)([(0,G.Cb)({type:N.Z}),(0,K.B)()],B.prototype,"position",void 0),(0,v._)([(0,G.Cb)({type:k.ZP}),(0,K.B)()],B.prototype,"elevationInfo",void 0),(0,v._)([(0,G.Cb)(Z.rX)],B.prototype,"feature",void 0),B=(0,v._)([(0,re.j)("esri.analysis.LineOfSightAnalysisTarget")],B);const X=B},8425:(fe,de,_)=>{_.d(de,{kk:()=>Z,pD:()=>C,rX:()=>H});var v=_(62208);function Z($,Q){return C($)===C(Q)}function C($){if((0,v.Wi)($))return null;let L=null;return L=null!=$.objectId?$.objectId:null!=$.layer&&"objectIdField"in $.layer&&null!=$.layer.objectIdField&&null!=$.attributes?$.attributes[$.layer.objectIdField]:$.uid,null==L?null:`o-${null!=$.layer?$.layer.id:""}-${L}`}const H={json:{write:{writer:function oe($,Q){(0,v.Wi)($)||null==$.layer?.objectIdField||null==$.attributes||(Q.feature={layerId:$.layer.id,objectId:$.attributes[$.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function G($){if(null!=$.layerId&&null!=$.objectId)return{uid:null,layer:{id:$.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:$.objectId}}}}}}}},7006:(fe,de,_)=>{_.d(de,{A:()=>F,B:()=>w,C:()=>U,D:()=>ee,E:()=>ue,F:()=>ae,G:()=>he,H:()=>z,I:()=>Y,J:()=>le,K:()=>ce,a:()=>oe,b:()=>G,c:()=>H,d:()=>$,e:()=>C,f:()=>Q,g:()=>J,h:()=>L,i:()=>re,j:()=>k,k:()=>te,l:()=>se,m:()=>S,n:()=>q,o:()=>B,p:()=>h,q:()=>M,r:()=>X,s:()=>ie,t:()=>K,u:()=>D,v:()=>T,w:()=>N,x:()=>W,y:()=>ne,z:()=>A});var v=_(4918),Z=_(15994);function C(P){return v.G.extendedSpatialReferenceInfo(P)}function H(P,R,_e){return v.G.clip(Z.N,P,R,_e)}function oe(P,R,_e){return v.G.cut(Z.N,P,R,_e)}function G(P,R,_e){return v.G.contains(Z.N,P,R,_e)}function $(P,R,_e){return v.G.crosses(Z.N,P,R,_e)}function Q(P,R,_e,pe){return v.G.distance(Z.N,P,R,_e,pe)}function L(P,R,_e){return v.G.equals(Z.N,P,R,_e)}function re(P,R,_e){return v.G.intersects(Z.N,P,R,_e)}function K(P,R,_e){return v.G.touches(Z.N,P,R,_e)}function N(P,R,_e){return v.G.within(Z.N,P,R,_e)}function k(P,R,_e){return v.G.disjoint(Z.N,P,R,_e)}function B(P,R,_e){return v.G.overlaps(Z.N,P,R,_e)}function X(P,R,_e,pe){return v.G.relate(Z.N,P,R,_e,pe)}function te(P,R){return v.G.isSimple(Z.N,P,R)}function ie(P,R){return v.G.simplify(Z.N,P,R)}function se(P,R,_e=!1){return v.G.convexHull(Z.N,P,R,_e)}function S(P,R,_e){return v.G.difference(Z.N,P,R,_e)}function q(P,R,_e){return v.G.symmetricDifference(Z.N,P,R,_e)}function h(P,R,_e){return v.G.intersect(Z.N,P,R,_e)}function D(P,R,_e=null){return v.G.union(Z.N,P,R,_e)}function M(P,R,_e,pe,me,Oe,Te){return v.G.offset(Z.N,P,R,_e,pe,me,Oe,Te)}function T(P,R,_e,pe,me=!1){return v.G.buffer(Z.N,P,R,_e,pe,me)}function W(P,R,_e,pe,me,Oe,Te){return v.G.geodesicBuffer(Z.N,P,R,_e,pe,me,Oe,Te)}function ne(P,R,_e,pe=!0){return v.G.nearestCoordinate(Z.N,P,R,_e,pe)}function A(P,R,_e){return v.G.nearestVertex(Z.N,P,R,_e)}function F(P,R,_e,pe,me){return v.G.nearestVertices(Z.N,P,R,_e,pe,me)}function w(P,R,_e,pe){if(null==R||null==pe)throw new Error("Illegal Argument Exception");const me=v.G.rotate(R,_e,pe);return me.spatialReference=P,me}function U(P,R,_e){if(null==R||null==_e)throw new Error("Illegal Argument Exception");const pe=v.G.flipHorizontal(R,_e);return pe.spatialReference=P,pe}function ee(P,R,_e){if(null==R||null==_e)throw new Error("Illegal Argument Exception");const pe=v.G.flipVertical(R,_e);return pe.spatialReference=P,pe}function ue(P,R,_e,pe,me){return v.G.generalize(Z.N,P,R,_e,pe,me)}function ae(P,R,_e,pe){return v.G.densify(Z.N,P,R,_e,pe)}function he(P,R,_e,pe,me=0){return v.G.geodesicDensify(Z.N,P,R,_e,pe,me)}function z(P,R,_e){return v.G.planarArea(Z.N,P,R,_e)}function Y(P,R,_e){return v.G.planarLength(Z.N,P,R,_e)}function le(P,R,_e,pe){return v.G.geodesicArea(Z.N,P,R,_e,pe)}function ce(P,R,_e,pe){return v.G.geodesicLength(Z.N,P,R,_e,pe)}const J=Object.freeze(Object.defineProperty({__proto__:null,extendedSpatialReferenceInfo:C,clip:H,cut:oe,contains:G,crosses:$,distance:Q,equals:L,intersects:re,touches:K,within:N,disjoint:k,overlaps:B,relate:X,isSimple:te,simplify:ie,convexHull:se,difference:S,symmetricDifference:q,intersect:h,union:D,offset:M,buffer:T,geodesicBuffer:W,nearestCoordinate:ne,nearestVertex:A,nearestVertices:F,rotate:w,flipHorizontal:U,flipVertical:ee,generalize:ue,densify:ae,geodesicDensify:he,planarArea:z,planarLength:Y,geodesicArea:le,geodesicLength:ce},Symbol.toStringTag,{value:"Module"}))},32825:(fe,de,_)=>{_.r(de),_.d(de,{buffer:()=>C.v,clip:()=>C.c,contains:()=>C.b,convexHull:()=>C.l,crosses:()=>C.d,cut:()=>C.a,densify:()=>C.F,difference:()=>C.m,disjoint:()=>C.j,distance:()=>C.f,equals:()=>C.h,extendedSpatialReferenceInfo:()=>C.e,flipHorizontal:()=>C.C,flipVertical:()=>C.D,generalize:()=>C.E,geodesicArea:()=>C.J,geodesicBuffer:()=>C.x,geodesicDensify:()=>C.G,geodesicLength:()=>C.K,intersect:()=>C.p,intersects:()=>C.i,isSimple:()=>C.k,nearestCoordinate:()=>C.y,nearestVertex:()=>C.z,nearestVertices:()=>C.A,offset:()=>C.q,overlaps:()=>C.o,planarArea:()=>C.H,planarLength:()=>C.I,relate:()=>C.r,rotate:()=>C.B,simplify:()=>C.s,symmetricDifference:()=>C.n,touches:()=>C.t,union:()=>C.u,within:()=>C.w}),_(4918),_(15994);var C=_(7006)},99746:(fe,de,_)=>{_.d(de,{Z:()=>D});var q,v=_(17626),Z=_(86810),C=_(62208),H=_(77712),Q=(_(85931),_(8314),_(90912),_(76898)),L=_(28347),re=_(43703),K=_(84161),N=_(28093),k=_(49672),B=_(55915),X=_(12080),te=_(89586),ie=_(60479),se=_(79800),S=_(9554);let h=q=class extends Z.wq{constructor(M){super(M),this.origin=(0,N.c)(),this.translation=(0,N.c)(),this.rotation=(0,te.Ue)(),this.scale=(0,N.f)(1,1,1),this.geographic=!0}get localMatrix(){const M=(0,re.c)();return(0,L.u)(M,this.scale),(0,L.e)(M,M,(0,te.WH)(this.rotation),(0,te.ZZ)(this.rotation)),(0,L.j)(M,M,this.translation),M}get localMatrixInverse(){return(0,L.a)((0,re.c)(),this.localMatrix)}applyLocal(M,T){return(0,K.m)(T,M,this.localMatrix)}applyLocalInverse(M,T){return(0,K.m)(T,M,this.localMatrixInverse)}project(M,T){const W=new Float64Array(M.length),ne=ie.fP.fromTypedArray(W),A=ie.fP.fromTypedArray(M);if(this.geographic){const U=(0,X.rS)(T),ee=(0,re.c)();return(0,B.Bm)(T,this.origin,ee,U),(0,L.m)(ee,ee,this.localMatrix),(0,se.t)(ne,A,ee),(0,B.CM)(W,U,0,W,T,0,W.length/3),W}const{localMatrix:F,origin:w}=this;(0,L.v)(F,re.I)?(0,S.c)(ne,A):(0,se.t)(ne,A,F);for(let U=0;U<W.length;U+=3)W[U+0]+=w[0],W[U+1]+=w[1],W[U+2]+=w[2];return W}getOriginPoint(M){const[T,W,ne]=this.origin;return new k.Z({x:T,y:W,z:ne,spatialReference:M})}equals(M){return(0,C.pC)(M)&&this.geographic===M.geographic&&(0,K.k)(this.origin,M.origin)&&(0,L.w)(this.localMatrix,M.localMatrix)}clone(){const M={origin:(0,N.a)(this.origin),translation:(0,N.a)(this.translation),rotation:(0,te.Ue)(this.rotation),scale:(0,N.a)(this.scale),geographic:this.geographic};return new q(M)}};(0,v._)([(0,H.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"origin",void 0),(0,v._)([(0,H.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"translation",void 0),(0,v._)([(0,H.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"rotation",void 0),(0,v._)([(0,H.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"scale",void 0),(0,v._)([(0,H.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],h.prototype,"geographic",void 0),(0,v._)([(0,H.Cb)()],h.prototype,"localMatrix",null),(0,v._)([(0,H.Cb)()],h.prototype,"localMatrixInverse",null),h=q=(0,v._)([(0,Q.j)("esri.geometry.support.MeshTransform")],h);const D=h},89586:(fe,de,_)=>{_.d(de,{Ue:()=>oe,WH:()=>X,ZZ:()=>k,qC:()=>N,uT:()=>re});var v=_(21286),Z=_(48977),C=_(78451),H=_(84161);function oe(h=ie){return[h[0],h[1],h[2],h[3]]}function re(h,D,M=oe()){return(0,H.c)(M,h),M[3]=D,M}function N(h,D,M=oe()){return(0,Z.s)(se,h,X(h)),(0,Z.s)(S,D,X(D)),(0,Z.m)(se,S,se),function te(h,D){return h[3]=D,h}(M,(0,v.BV)((0,Z.g)(M,se)))}function k(h){return h}function X(h){return(0,v.Vl)(h[3])}const ie=[0,0,1,0],se=(0,C.a)(),S=(0,C.a)();oe()},92545:(fe,de,_)=>{function v(Z,C){return Z.isGeographic||Z.isWebMercator&&(C?.geographic??!0)}_.d(de,{h:()=>v})},60853:(fe,de,_)=>{_.d(de,{FF:()=>ie,I5:()=>X,Yq:()=>se,iv:()=>B,w1:()=>te});var v=_(62208),Z=_(16730),C=_(550),H=_(28347),oe=_(43703),G=_(30217),$=_(55915),Q=_(12080),L=_(99746),re=_(60479),K=_(79800),N=_(92545),k=_(65231);function B(z,Y,le){return(0,N.h)(Y.spatialReference,le)?function q(z,Y,le){const ce=Y.spatialReference,J=ne(Y,le,ee),P=new Float64Array(z.position.length),R=function h(z,Y,le,ce){(0,K.t)(re.fP.fromTypedArray(ce),re.fP.fromTypedArray(z),Y);const J=new Float64Array(z.length);return(0,k.To)(ce,J,le)}(z.position,J,ce,P),_e=(0,G.a)(ae,J);return{position:R,normal:D(R,P,z.normal,_e,ce),tangent:M(R,P,z.tangent,_e,ce)}}(z,Y,le):function S(z,Y,le){const ce=new Float64Array(z.position.length),J=z.position,P=Y.x,R=Y.y,_e=Y.z||0,{horizontal:pe,vertical:me}=U(le?le.unit:null,Y.spatialReference);for(let Oe=0;Oe<J.length;Oe+=3)ce[Oe+0]=J[Oe+0]*pe+P,ce[Oe+1]=J[Oe+1]*pe+R,ce[Oe+2]=J[Oe+2]*me+_e;return{position:ce,normal:z.normal,tangent:z.tangent}}(z,Y,le)}function X(z,Y,le){const{position:ce,normal:J,tangent:P}=z;if((0,v.Wi)(Y))return{position:ce,normal:J,tangent:P};const R=Y.localMatrix;return B({position:(0,k.zZ)(ce,new Float64Array(ce.length),R),normal:(0,v.pC)(J)?(0,k.w9)(J,new Float32Array(J.length),R):null,tangent:(0,v.pC)(P)?(0,k.VS)(P,new Float32Array(P.length),R):null},Y.getOriginPoint(le),{geographic:Y.geographic})}function te(z,Y,le){if(le?.useTransform){const{position:ce,normal:J,tangent:P}=z;return{vertexAttributes:{position:ce,normal:J,tangent:P},transform:new L.Z({origin:[Y.x,Y.y,Y.z??0],geographic:(0,N.h)(Y.spatialReference,le)})}}return{vertexAttributes:B(z,Y,le),transform:null}}function ie(z,Y,le){return(0,N.h)(Y.spatialReference,le)?W(z,Y,le):T(z,Y,le)}function se(z,Y,le,ce){if((0,v.Wi)(Y))return ie(z,le,ce);const J=X(z,Y,le.spatialReference);return le.equals(Y.getOriginPoint(le.spatialReference))?T(J,le,ce):(0,N.h)(le.spatialReference,ce)?W(J,le,ce):T(J,le,ce)}function D(z,Y,le,ce,J){if((0,v.Wi)(le))return null;const P=new Float32Array(le.length);return(0,K.a)(re.ct.fromTypedArray(P),re.ct.fromTypedArray(le),ce),(0,k.Yk)(P,z,Y,J,P),P}function M(z,Y,le,ce,J){if((0,v.Wi)(le))return null;const P=new Float32Array(le.length);(0,K.a)(re.ct.fromTypedArray(P,4*Float32Array.BYTES_PER_ELEMENT),re.ct.fromTypedArray(le,4*Float32Array.BYTES_PER_ELEMENT),ce);for(let R=3;R<P.length;R+=4)P[R]=le[R];return(0,k.M2)(P,z,Y,J,P),P}function T(z,Y,le){const ce=new Float64Array(z.position.length),J=z.position,P=Y.x,R=Y.y,_e=Y.z||0,{horizontal:pe,vertical:me}=U(le?le.unit:null,Y.spatialReference);for(let Oe=0;Oe<J.length;Oe+=3)ce[Oe+0]=(J[Oe+0]-P)/pe,ce[Oe+1]=(J[Oe+1]-R)/pe,ce[Oe+2]=(J[Oe+2]-_e)/me;return{position:ce,normal:z.normal,tangent:z.tangent}}function W(z,Y,le){const ce=Y.spatialReference;ne(Y,le,ee);const J=(0,H.a)(ue,ee),P=new Float64Array(z.position.length),R=function A(z,Y,le,ce){const J=(0,k.XO)(z,Y,ce),P=re.fP.fromTypedArray(J),R=new Float64Array(J.length),_e=re.fP.fromTypedArray(R);return(0,K.t)(_e,P,le),R}(z.position,ce,J,P),_e=(0,G.a)(ae,J);return{position:R,normal:F(z.normal,z.position,P,ce,_e),tangent:w(z.tangent,z.position,P,ce,_e)}}function ne(z,Y,le){(0,$.Bm)(z.spatialReference,[z.x,z.y,z.z||0],le,(0,Q.rS)(z.spatialReference));const{horizontal:ce,vertical:J}=U(Y?Y.unit:null,z.spatialReference);return(0,H.h)(le,le,[ce,ce,J]),le}function F(z,Y,le,ce,J){if((0,v.Wi)(z))return null;const P=(0,k.Iz)(z,Y,le,ce,new Float32Array(z.length)),R=re.ct.fromTypedArray(P);return(0,K.a)(R,R,J),P}function w(z,Y,le,ce,J){if((0,v.Wi)(z))return null;const P=(0,k.wi)(z,Y,le,ce,new Float32Array(z.length)),R=re.ct.fromTypedArray(P,4*Float32Array.BYTES_PER_ELEMENT);return(0,K.a)(R,R,J),P}function U(z,Y){if((0,v.Wi)(z))return he;const le=Y.isGeographic?1:(0,Z.c9)(Y),ce=Y.isGeographic?1:(0,Z._R)(Y),J=(0,Z.En)(1,z,"meters");return{horizontal:J*le,vertical:J*ce}}const ee=(0,oe.c)(),ue=(0,oe.c)(),ae=(0,C.c)(),he={horizontal:1,vertical:1}},65629:(fe,de,_)=>{_.d(de,{SR:()=>L,Ui:()=>Q});var v=_(62208),Z=_(65401),C=_(32442),H=_(25748),oe=_(91179),G=_(74618),$=_(37053);function Q(h){return re(h,!0)}function L(h){return re(h,!1)}function re(h,D){if((0,v.Wi)(h))return null;const M=h.spatialReference,T=(0,$.C5)(M),W="toJSON"in h?h.toJSON():h;if(!T)return W;const ne=(0,$.sS)(M)?102100:4326,A=G.UZ[ne].maxX,F=G.UZ[ne].minX;if((0,oe.wp)(W))return N(W,A,F);if((0,oe.aW)(W))return W.points=W.points.map(w=>N(w,A,F)),W;if((0,oe.YX)(W))return function K(h,D){if(!D)return h;const M=function k(h,D){const M=[],{ymin:T,ymax:W,xmin:ne,xmax:A}=h,F=h.xmax-h.xmin,[w,U]=D.valid,{x:ee,frameId:ue}=B(h.xmin,D),{x:ae,frameId:he}=B(h.xmax,D),z=ee===ae&&F>0;if(F>2*U){const Y={xmin:ne<A?ee:ae,ymin:T,xmax:U,ymax:W},le={xmin:w,ymin:T,xmax:ne<A?ae:ee,ymax:W},ce={xmin:0,ymin:T,xmax:U,ymax:W},J={xmin:w,ymin:T,xmax:0,ymax:W},P=[],R=[];X(Y,ce)&&P.push(ue),X(Y,J)&&R.push(ue),X(le,ce)&&P.push(he),X(le,J)&&R.push(he);for(let _e=ue+1;_e<he;_e++)P.push(_e),R.push(_e);M.push(new se(Y,[ue]),new se(le,[he]),new se(ce,P),new se(J,R))}else ee>ae||z?M.push(new se({xmin:ee,ymin:T,xmax:U,ymax:W},[ue]),new se({xmin:w,ymin:T,xmax:ae,ymax:W},[he])):M.push(new se({xmin:ee,ymin:T,xmax:ae,ymax:W},[ue]));return M}(h,D).map(T=>T.extent);return M.length<2?M[0]||h:M.length>2?(h.xmin=D.valid[0],h.xmax=D.valid[1],h):{rings:M.map(T=>[[T.xmin,T.ymin],[T.xmin,T.ymax],[T.xmax,T.ymax],[T.xmax,T.ymin],[T.xmin,T.ymin]])}}(W,T);if((0,oe.oU)(W)||(0,oe.l9)(W)){const w=(0,C.$P)(S,W),U={xmin:w[0],ymin:w[1],xmax:w[2],ymax:w[3]},ee=(0,G.XZ)(U.xmin,F)*(2*A),ue=0===ee?W:(0,G.Sy)(W,ee);return U.xmin+=ee,U.xmax+=ee,U.xmax>A?ie(ue,A,D):U.xmin<F?ie(ue,F,D):ue}return W}function N(h,D,M){if(Array.isArray(h)){const T=h[0];if(T>D){const W=(0,G.XZ)(T,D);h[0]=T+W*(-2*D)}else if(T<M){const W=(0,G.XZ)(T,M);h[0]=T+W*(-2*M)}}else{const T=h.x;if(T>D){const W=(0,G.XZ)(T,D);h.x+=W*(-2*D)}else if(T<M){const W=(0,G.XZ)(T,M);h.x+=W*(-2*M)}}return h}function B(h,D){const[M,T]=D.valid,W=2*T;let ne,A=0;return h>T?(ne=Math.ceil(Math.abs(h-T)/W),h-=ne*W,A=ne):h<M&&(ne=Math.ceil(Math.abs(h-M)/W),h+=ne*W,A=-ne),{x:h,frameId:A}}function X(h,D){const{xmin:M,ymin:T,xmax:W,ymax:ne}=D;return te(h,M,T)&&te(h,M,ne)&&te(h,W,ne)&&te(h,W,T)}function te(h,D,M){return D>=h.xmin&&D<=h.xmax&&M>=h.ymin&&M<=h.ymax}function ie(h,D,M=!0){const T=!(0,oe.l9)(h);if(T&&(0,H.Zy)(h),M)return(new q).cut(h,D);const W=T?h.rings:h.paths,ne=T?4:2,A=W.length,F=-2*D;for(let w=0;w<A;w++){const U=W[w];if(U&&U.length>=ne){const ee=[];for(const ue of U)ee.push([ue[0]+F,ue[1]]);W.push(ee)}}return T?h.rings=W:h.paths=W,h}class se{constructor(D,M){this.extent=D,this.frameIds=M}}const S=(0,Z.Ue)();class q{constructor(){this.linesIn=[],this.linesOut=[]}cut(D,M){let T;if(this.xCut=M,D.rings)this.closed=!0,T=D.rings,this.minPts=4;else{if(!D.paths)return null;this.closed=!1,T=D.paths,this.minPts=2}for(const ne of T){if(!ne||ne.length<this.minPts)continue;let A=!0;for(const F of ne)A?(this.moveTo(F),A=!1):this.lineTo(F);this.closed&&this.close()}this._pushLineIn(),this._pushLineOut(),T=[];for(const ne of this.linesIn)ne&&ne.length>=this.minPts&&T.push(ne);const W=-2*this.xCut;for(const ne of this.linesOut)if(ne&&ne.length>=this.minPts){for(const A of ne)A[0]+=W;T.push(ne)}return this.closed?D.rings=T:D.paths=T,D}moveTo(D){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(D[0]),this._moveTo(D[0],D[1],this._prevSide),this._prevPt=D,this._firstPt=D}lineTo(D){const M=this._side(D[0]);if(M*this._prevSide==-1){const T=this._intersect(this._prevPt,D);this._lineTo(this.xCut,T,0),this._prevSide=0,this._lineTo(D[0],D[1],M)}else this._lineTo(D[0],D[1],M);this._prevSide=M,this._prevPt=D}close(){const D=this._firstPt,M=this._prevPt;D[0]===M[0]&&D[1]===M[1]||this.lineTo(D),this._checkClosingPt(this.lineIn),this._checkClosingPt(this.lineOut)}_moveTo(D,M,T){this.closed?(this.lineIn.push([T<=0?D:this.xCut,M]),this.lineOut.push([T>=0?D:this.xCut,M])):(T<=0&&this.lineIn.push([D,M]),T>=0&&this.lineOut.push([D,M]))}_lineTo(D,M,T){this.closed?(this._addPolyVertex(this.lineIn,T<=0?D:this.xCut,M),this._addPolyVertex(this.lineOut,T>=0?D:this.xCut,M)):T<0?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([D,M])):T>0?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([D,M])):this._prevSide<0?(this.lineIn.push([D,M]),this.lineOut.push([D,M])):this._prevSide>0&&(this.lineOut.push([D,M]),this.lineIn.push([D,M]))}_addPolyVertex(D,M,T){const W=D.length;W>1&&D[W-1][0]===M&&D[W-2][0]===M?D[W-1][1]=T:D.push([M,T])}_checkClosingPt(D){const M=D.length;M>3&&D[0][0]===this.xCut&&D[M-2][0]===this.xCut&&D[1][0]===this.xCut&&(D[0][1]=D[M-2][1],D.pop())}_side(D){return D<this.xCut?-1:D>this.xCut?1:0}_intersect(D,M){return D[1]+(this.xCut-D[0])/(M[0]-D[0])*(M[1]-D[1])}_pushLineIn(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn),this.lineIn=[]}_pushLineOut(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut),this.lineOut=[]}}},28678:(fe,de,_)=>{_.r(de),_.d(de,{default:()=>F});var v=_(17626),C=(_(29132),_(84792)),H=_(26584),oe=_(99959),G=_(77275),$=_(21726),Q=_(77712),N=(_(85931),_(8314),_(90912),_(68653)),k=_(76898),B=_(99433),X=_(44917),te=_(552),ie=_(49286),se=_(6647),S=_(30346),q=_(99555),h=_(72258),D=_(2584),M=_(91309),T=_(2004),W=_(65234),ne=_(49672);let A=class extends((0,te.h)((0,S.Q)((0,q.M)((0,ie.q)((0,se.I)((0,oe.R)(X.Z))))))){constructor(...w){super(...w),this.copyright="",this.fullExtent=new T.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,W.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=W.Z.WebMercator,this.subDomains=null,this.tileInfo=new D.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new ne.Z({x:-20037508.342787,y:20037508.342787,spatialReference:W.Z.WebMercator}),spatialReference:W.Z.WebMercator,lods:[new h.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new h.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new h.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new h.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new h.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new h.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new h.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new h.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new h.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new h.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new h.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new h.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new h.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new h.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new h.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new h.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new h.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new h.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new h.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new h.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new h.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new h.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new h.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new h.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(w,U){return"string"==typeof w?{urlTemplate:w,...U}:w}load(w){const U=this.loadFromPortal({supportedTypes:["WMTS"]},w).then(()=>{let ee="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const ue=new $.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&ue.authority.includes("{subDomain}")&&(ee="is missing 'subDomains' property")}else ee="spatialReference must match tileInfo.spatialReference";else ee="is missing the required 'urlTemplate' property value";if(ee)throw new H.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${ee}`)});return this.addResolvingPromise(U),Promise.resolve(this)}get levelValues(){const w=[];if(!this.tileInfo)return null;for(const U of this.tileInfo.lods)w[U.level]=U.levelValue||U.level;return w}readSpatialReference(w,U){return w||U.fullExtent&&U.fullExtent.spatialReference&&W.Z.fromJSON(U.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const w=[],{urlTemplate:U,subDomains:ee}=this,ue=new $.R9(U),ae=ue.scheme?ue.scheme+"://":"//",he=ae+ue.authority+"/";if(ue.authority.includes("{subDomain}")){if(ee&&ee.length>0&&ue.authority.split(".").length>1)for(const z of ee)w.push(ae+ue.authority.replace(/\{subDomain\}/gi,z)+"/")}else w.push(he);return w.map(z=>("/"!==z.charAt(z.length-1)&&(z+="/"),z))}get urlPath(){if(!this.urlTemplate)return null;const w=this.urlTemplate,U=new $.R9(w);return w.substring(((U.scheme?U.scheme+"://":"//")+U.authority+"/").length)}readUrlTemplate(w,U){return w||U.templateUrl}writeUrlTemplate(w,U){w&&(0,$.oC)(w)&&(w="https:"+w),w&&(w=w.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),w=(0,$.Fv)(w)),U.templateUrl=w}fetchTile(w,U,ee,ue={}){const{signal:ae}=ue,he=this.getTileUrl(w,U,ee),z={responseType:"image",signal:ae,query:{...this.refreshParameters}};return(0,C.default)(he,z).then(Y=>Y.data)}getTileUrl(w,U,ee){const ue=this.levelValues[w];return this.tileServers[U%this.tileServers.length]+(0,G.gx)(this.urlPath,{level:ue,z:ue,col:ee,x:ee,row:U,y:U})}};(0,v._)([(0,Q.Cb)({type:String,value:"",json:{write:!0}})],A.prototype,"copyright",void 0),(0,v._)([(0,Q.Cb)({type:T.Z,json:{write:!0},nonNullable:!0})],A.prototype,"fullExtent",void 0),(0,v._)([(0,Q.Cb)({readOnly:!0,json:{read:!1,write:!1}})],A.prototype,"legendEnabled",void 0),(0,v._)([(0,Q.Cb)({type:["show","hide"]})],A.prototype,"listMode",void 0),(0,v._)([(0,Q.Cb)({json:{read:!0,write:!0}})],A.prototype,"blendMode",void 0),(0,v._)([(0,Q.Cb)()],A.prototype,"levelValues",null),(0,v._)([(0,Q.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],A.prototype,"isReference",void 0),(0,v._)([(0,Q.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],A.prototype,"operationalLayerType",void 0),(0,v._)([(0,Q.Cb)({readOnly:!0,json:{read:!1,write:!1}})],A.prototype,"popupEnabled",void 0),(0,v._)([(0,Q.Cb)({type:W.Z})],A.prototype,"spatialReference",void 0),(0,v._)([(0,N.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],A.prototype,"readSpatialReference",null),(0,v._)([(0,Q.Cb)({type:[String],json:{write:!0}})],A.prototype,"subDomains",void 0),(0,v._)([(0,Q.Cb)({type:D.Z,json:{write:!0}})],A.prototype,"tileInfo",void 0),(0,v._)([(0,Q.Cb)({readOnly:!0})],A.prototype,"tileServers",null),(0,v._)([(0,Q.Cb)({json:{read:!1}})],A.prototype,"type",void 0),(0,v._)([(0,Q.Cb)()],A.prototype,"urlPath",null),(0,v._)([(0,Q.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],A.prototype,"urlTemplate",void 0),(0,v._)([(0,N.r)("urlTemplate",["urlTemplate","templateUrl"])],A.prototype,"readUrlTemplate",null),(0,v._)([(0,B.c)("urlTemplate",{templateUrl:{type:String}})],A.prototype,"writeUrlTemplate",null),(0,v._)([(0,Q.Cb)({type:M.B,json:{write:!0}})],A.prototype,"wmtsInfo",void 0),A=(0,v._)([(0,k.j)("esri.layers.WebTileLayer")],A);const F=A},20925:(fe,de,_)=>{_.d(de,{Z:()=>ie});var N,v=_(17626),Z=_(46160),C=_(47877),H=_(14889),oe=_(77712),L=(_(85931),_(8314),_(90912),_(76898)),re=_(49410),K=_(11136);const k={type:Z.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:B}}},read:!1}};function B(se,S,q){if(se&&Array.isArray(se))return new Z.Z(se.map(h=>{const D=function te(se){return"group"===se.layerType?X:re.Z}(h);if(D){const M=new D;return M.read(h,q),M}q&&q.messages&&h&&q.messages.push(new H.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(h.type||"unknown")+"' are not supported",{definition:h,context:q}))}))}let X=N=class extends K.Z{constructor(se){super(se),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,C.w)(this,se=>N.forEachSublayer(this.sublayers,S=>{"building-group"!==S.type&&se(S)}))}};var se;(0,v._)([(0,oe.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],X.prototype,"listMode",void 0),(0,v._)([(0,oe.Cb)(k)],X.prototype,"sublayers",void 0),X=N=(0,v._)([(0,L.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],X),(se=X||(X={})).sublayersProperty=k,se.readSublayers=B,se.forEachSublayer=function S(q,h){q.forEach(D=>{h(D),"building-group"===D.type&&S(D.sublayers,h)})};const ie=X},1476:(fe,de,_)=>{_.d(de,{S:()=>Z,X:()=>v});const v=1;function Z(C,H){let oe=0;for(const G of H){const $=G.attributes?.[C];"number"==typeof $&&isFinite($)&&(oe=Math.max(oe,$))}return oe}},35775:(fe,de,_)=>{_.d(de,{O0:()=>K,av:()=>$,b:()=>ie,d1:()=>L,og:()=>B});var v=_(15861),Z=_(62208),C=_(37053),H=_(36630);class oe{constructor(){this.code=null,this.description=null}}class G{constructor(q){this.error=new oe,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=q}}function $(S){return new G(S)}class Q{constructor(q){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=q}}function L(S){return new Q(S)}const re=new Set;function K(S,q,h,D=!1,M){re.clear();for(const T in h){const W=S.get(T);if(!W)continue;const ne=h[T],A=N(W,ne);if(A!==ne&&M&&M.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:W,originalValue:ne,sanitizedValue:A}}),re.add(W.name),W&&(D||W.editable)){const F=(0,H.Qc)(W,A);if(F)return $((0,H.vP)(F,W,A));q[W.name]=A}}for(const T of S.requiredFields)if(!re.has(T.name))return $(`missing required field "${T.name}"`);return null}function N(S,q){let h=q;return"string"==typeof q&&(0,H.H7)(S)?h=parseFloat(q):null!=q&&(0,H.qN)(S)&&"string"!=typeof q&&(h=String(q)),(0,H.Pz)(h)}let k;function B(S,q){if(!S||!(0,C.JY)(q))return S;if("rings"in S||"paths"in S){if((0,Z.Wi)(k))throw new TypeError("geometry engine not loaded");return k.simplify(q,S)}return S}function X(){return te.apply(this,arguments)}function te(){return(te=(0,v.Z)(function*(){return(0,Z.Wi)(k)&&(k=yield Promise.all([_.e(4918),_.e(8592)]).then(_.bind(_,32825))),k})).apply(this,arguments)}function ie(S,q){return se.apply(this,arguments)}function se(){return(se=(0,v.Z)(function*(S,q){!(0,C.JY)(S)||"esriGeometryPolygon"!==q&&"esriGeometryPolyline"!==q||(yield X())})).apply(this,arguments)}},5143:(fe,de,_)=>{_.d(de,{Z:()=>N});var v=_(17626),C=(_(29132),_(77712)),$=(_(85931),_(8314),_(90912),_(68653)),Q=_(76898),L=_(51026),re=_(28930),K=_(65234);const N=k=>{let B=class extends k{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(X,te){return null!=te.minLOD&&null!=te.maxLOD?X:0}readMaxScale(X,te){return null!=te.minLOD&&null!=te.maxLOD?X:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(X,te){return te.capabilities&&te.capabilities.includes("Tilemap")?new re.y({layer:this}):null}};return(0,v._)([(0,C.Cb)({json:{read:{source:"copyrightText"}}})],B.prototype,"copyright",void 0),(0,v._)([(0,C.Cb)()],B.prototype,"minScale",void 0),(0,v._)([(0,$.r)("service","minScale")],B.prototype,"readMinScale",null),(0,v._)([(0,C.Cb)()],B.prototype,"maxScale",void 0),(0,v._)([(0,$.r)("service","maxScale")],B.prototype,"readMaxScale",null),(0,v._)([(0,C.Cb)({type:K.Z})],B.prototype,"spatialReference",void 0),(0,v._)([(0,C.Cb)({readOnly:!0})],B.prototype,"supportsBlankTile",null),(0,v._)([(0,C.Cb)(L.h)],B.prototype,"tileInfo",void 0),(0,v._)([(0,C.Cb)()],B.prototype,"tilemapCache",void 0),(0,v._)([(0,$.r)("service","tilemapCache",["capabilities"])],B.prototype,"readTilemapCache",null),(0,v._)([(0,C.Cb)()],B.prototype,"version",void 0),B=(0,v._)([(0,Q.j)("esri.layers.mixins.ArcGISCachedService")],B),B}},22825:(fe,de,_)=>{_.d(de,{A:()=>Z});const v=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function Z(C){return v.some(([H,oe])=>C>=H&&C<=oe)}},51920:(fe,de,_)=>{_.d(de,{j:()=>re});var v=_(17626),Z=_(14517),C=_(80542),H=_(77712),Q=(_(85931),_(8314),_(90912),_(76898));const L={visible:"visibleSublayers"};let re=class extends((0,C.p)(Z.Z)){constructor(K){super(K),this.scale=0}set layer(K){this._get("layer")!==K&&(this._set("layer",K),this.handles.remove("layer"),K&&this.handles.add([K.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),K.on("wms-sublayer-update",N=>this.notifyChange(L[N.propertyName]))],"layer"))}get layers(){const{visibleSublayers:K}=this;return K.filter(N=>N.name).map(N=>N.name).join(",")}get version(){this.commitProperty("layers");const K=this.layer;return K&&K.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:K,scale:N}=this,k=K?.sublayers,B=[],X=te=>{const{minScale:ie,maxScale:se,sublayers:S,visible:q}=te;q&&(0===N||(0===ie||N<=ie)&&(0===se||N>=se))&&(S?S.forEach(X):B.unshift(te))};return k?.forEach(X),B}toJSON(){const{layer:K,layers:N}=this,{imageFormat:k,imageTransparency:B,version:X}=K;return{format:k,request:"GetMap",service:"WMS",styles:"",transparent:B?"TRUE":"FALSE",version:X,layers:N}}};(0,v._)([(0,H.Cb)()],re.prototype,"layer",null),(0,v._)([(0,H.Cb)({readOnly:!0})],re.prototype,"layers",null),(0,v._)([(0,H.Cb)({type:Number})],re.prototype,"scale",void 0),(0,v._)([(0,H.Cb)({readOnly:!0})],re.prototype,"version",null),(0,v._)([(0,H.Cb)({readOnly:!0})],re.prototype,"visibleSublayers",null),re=(0,v._)([(0,Q.j)("esri.layers.support.ExportWMSImageParameters")],re)},74711:(fe,de,_)=>{_.d(de,{W:()=>L});var v=_(15861),Z=_(24263),C=_(84792),H=_(62208),oe=_(10699),G=_(32258),$=_(84687),Q=_(55463);class L{constructor(K,N,k,B){this.parsedUrl=K,this.portalItem=N,this.apiKey=k,this.signal=B,this.rootDocument=null;const X=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);X&&(this.urlParts={root:X[1],layerId:parseInt(X[2],10)})}fetch(){var K=this;return(0,v.Z)(function*(){if(!K.urlParts)return null;const N=K.portalItem??(yield K._portalItemFromServiceItemId());if((0,H.Wi)(N))return K._loadFromUrl();const k=yield K._findAndLoadRelatedPortalItem(N);return(0,H.Wi)(k)?null:K._loadFeatureLayerFromPortalItem(k)})()}fetchPortalItem(){var K=this;return(0,v.Z)(function*(){if(!K.urlParts)return null;const N=K.portalItem??(yield K._portalItemFromServiceItemId());return(0,H.Wi)(N)?null:K._findAndLoadRelatedPortalItem(N)})()}_fetchRootDocument(){var K=this;return(0,v.Z)(function*(){if((0,H.pC)(K.rootDocument))return K.rootDocument;if((0,H.Wi)(K.urlParts))return K.rootDocument={},{};const N={query:{f:"json",token:K.apiKey},responseType:"json",signal:K.signal},k=`${K.urlParts.root}/SceneServer`;try{const B=yield(0,C.default)(k,N);K.rootDocument=B.data}catch{K.rootDocument={}}return K.rootDocument})()}_fetchServiceOwningPortalUrl(){var K=this;return(0,v.Z)(function*(){const N=Z.id?.findServerInfo(K.parsedUrl.path);if(N?.owningSystemUrl)return N.owningSystemUrl;const k=K.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const B=(yield(0,C.default)(k,{query:{f:"json"},responseType:"json",signal:K.signal})).data.owningSystemUrl;if(B)return B}catch(B){(0,oe.r9)(B)}return null})()}_findAndLoadRelatedPortalItem(K){var N=this;return(0,v.Z)(function*(){try{return(yield K.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:N.signal})).find(k=>"Feature Service"===k.type)||null}catch(k){return(0,oe.r9)(k),null}})()}_loadFeatureLayerFromPortalItem(K){var N=this;return(0,v.Z)(function*(){yield K.load({signal:N.signal});const k=yield N._findMatchingAssociatedSublayerUrl(K.url);return new G.default({url:k,portalItem:K}).load({signal:N.signal})})()}_loadFromUrl(){var K=this;return(0,v.Z)(function*(){const N=yield K._findMatchingAssociatedSublayerUrl(`${K.urlParts.root}/FeatureServer`);return new G.default({url:N}).load({signal:K.signal})})()}_findMatchingAssociatedSublayerUrl(K){var N=this;return(0,v.Z)(function*(){const k=K.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),B={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:N.signal},X=N.urlParts.layerId,te=N._fetchRootDocument(),ie=(0,C.default)(k,B),[se,S]=yield Promise.all([ie,te]),q=S&&S.layers,h=se.data&&se.data.layers;if(!Array.isArray(h))throw new Error("expected layers array");if(Array.isArray(q)){for(let D=0;D<Math.min(q.length,h.length);D++)if(q[D].id===X)return`${k}/${h[D].id}`}else if(X<h.length)return`${k}/${h[X].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var K=this;return(0,v.Z)(function*(){const N=(yield K._fetchRootDocument()).serviceItemId;if(!N)return null;const k=new Q.default({id:N,apiKey:K.apiKey}),B=yield K._fetchServiceOwningPortalUrl();(0,H.pC)(B)&&(k.portal=new $.Z({url:B}));try{return k.load({signal:K.signal})}catch(X){return(0,oe.r9)(X),null}})()}}},28930:(fe,de,_)=>{_.d(de,{y:()=>ne});var T,v=_(15861),Z=_(17626),C=_(84792),H=_(14517),oe=_(27306),G=_(26584),$=_(80542),Q=_(63290),L=_(93961),re=_(77029),K=_(10699),N=_(32917),k=_(50618),B=_(21726),X=_(77712),te=_(85931),se=(_(8314),_(66656)),S=_(76898),q=_(58817);class h{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(F,w){if("unknown"!==this._allAvailability)return this._allAvailability;const U=(F-this.location.top)*this.location.width+(w-this.location.left),ue=U>>3,ae=this._tileAvailabilityBitSet;return ue<0||ue>ae.length?"unknown":ae[ue]&1<<U%8?"available":"unavailable"}_updateFromData(F){let ee=!0,ue=!0;const ae=Math.ceil(this.location.width*this.location.height/8),he=new Uint8Array(ae);let z=0;for(let Y=0;Y<F.length;Y++){const le=Y%8;F[Y]?(ue=!1,he[z]|=1<<le):ee=!1,7===le&&++z}ue?this._allAvailability="unavailable":ee?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=he,this.byteSize+=he.length)}static fromDefinition(F,w){const U=F.service.request||C.default,{row:ee,col:ue,width:ae,height:he}=F,z={query:{f:"json"}};return w=w?{...z,...w}:z,U(function M(A){let F;if("vector-tile"===A.service.type)F=`${A.service.url}/tilemap/${A.level}/${A.row}/${A.col}/${A.width}/${A.height}`;else{const U=A.service.tileServers;F=`${U&&U.length?U[A.row%U.length]:A.service.url}/tilemap/${A.level}/${A.row}/${A.col}/${A.width}/${A.height}`}const w=A.service.query;return w&&(F=`${F}?${w}`),F}(F),w).then(Y=>Y.data).catch(Y=>{if(Y&&Y.details&&422===Y.details.httpStatus)return{location:{top:ee,left:ue,width:ae,height:he},valid:!0,data:(0,te.a9)(ae*he,0)};throw Y}).then(Y=>{if(Y.location&&(Y.location.top!==ee||Y.location.left!==ue||Y.location.width!==ae||Y.location.height!==he))throw new G.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:Y,definition:{top:ee,left:ue,width:ae,height:he}});return h.fromJSON(Y)})}static fromJSON(F){h._validateJSON(F);const w=new h;return w.location=Object.freeze((0,q.d9)(F.location)),w._updateFromData(F.data),Object.freeze(w)}static _validateJSON(F){if(!F||!F.location)throw new G.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===F.valid)throw new G.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!F.data)throw new G.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(F.data))throw new G.Z("tilemap:data-mismatch","Data must be an array of numbers");if(F.data.length!==F.location.width*F.location.height)throw new G.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function D(A){return`${A.level}/${A.row}/${A.col}/${A.width}/${A.height}`}const W=Q.Z.getLogger("esri.layers.support.TilemapCache");let ne=T=class extends((0,$.p)(H.Z)){constructor(A){super(A),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*oe.Y8.MEGABYTES,this.request=C.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new L.Z(this.cacheByteSize),this.own([(0,N.YP)(()=>{const{layer:A}=this;return[A?.parsedUrl,A?.tileServers,A?.apiKey,A?.customParameters]},()=>this._initializeTilemapDefinition()),(0,N.YP)(()=>this.layer?.tileInfo?.lods,A=>this._initializeAvailableLevels(A),N.tX)]),this._initializeTilemapDefinition()}castLevels(A){return A<=2?(W.error("Minimum levels for Tilemap is 3, but got ",A),3):A}get size(){return 1<<this.levels}fetchTilemap(A,F,w,U){if(!this._availableLevels[A])return Promise.reject(new G.Z("tilemap-cache:level-unavailable",`Level ${A} is unavailable in the service`));const ee=this._tmpTilemapDefinition,ue=this._tilemapFromCache(A,F,w,ee);if(ue)return Promise.resolve(ue);const ae=U&&U.signal;return U={...U,signal:null},new Promise((he,z)=>{(0,K.fu)(ae,()=>z((0,K.zE)()));const Y=D(ee);let le=this._pendingTilemapRequests[Y];if(!le){le=h.fromDefinition(ee,U).then(J=>(this._tilemapCache.put(Y,J,J.byteSize),J));const ce=()=>delete this._pendingTilemapRequests[Y];this._pendingTilemapRequests[Y]=le,le.then(ce,ce)}le.then(he,z)})}getAvailability(A,F,w){if(!this._availableLevels[A])return"unavailable";const U=this._tilemapFromCache(A,F,w,this._tmpTilemapDefinition);return U?U.getAvailability(F,w):"unknown"}fetchAvailability(A,F,w,U){return this._availableLevels[A]?this.fetchTilemap(A,F,w,U).catch(ee=>ee).then(ee=>{if(ee instanceof h){const ue=ee.getAvailability(F,w);if("unavailable"===ue)throw new G.Z("tile-map:tile-unavailable","Tile is not available",{level:A,row:F,col:w});return ue}if((0,K.D_)(ee))throw ee;return"unknown"}):Promise.reject(new G.Z("tilemap-cache:level-unavailable",`Level ${A} is unavailable in the service`))}fetchAvailabilityUpsample(A,F,w,U,ee){U.level=A,U.row=F,U.col=w;const ue=this.layer.tileInfo;ue.updateTileInfo(U);const ae=this.fetchAvailability(A,F,w,ee).catch(he=>{if((0,K.D_)(he))throw he;if(ue.upsampleTile(U))return this.fetchAvailabilityUpsample(U.level,U.row,U.col,U);throw he});return this._fetchAvailabilityUpsamplePrefetch(U.id,A,F,w,ee,ae),ae}_fetchAvailabilityUpsamplePrefetch(A,F,w,U,ee,ue){var ae=this;return(0,v.Z)(function*(){if(!ae._prefetchingEnabled)return;const he=`prefetch-${A}`;if(ae.handles.has(he))return;const z=new AbortController;ue.then(()=>z.abort(),()=>z.abort());let Y=!1;if(ae.handles.add({remove(){Y||(Y=!0,z.abort())}},he),yield(0,k.MU)(10,z.signal).catch(()=>{}),Y||(Y=!0,ae.handles.remove(he)),(0,K.Hc)(z))return;const ce={id:A,level:F,row:w,col:U},J={...ee,signal:z.signal},P=ae.layer.tileInfo;for(let R=0;T._prefetches.length<T._maxPrefetch&&P.upsampleTile(ce);++R){const _e=ae.fetchAvailability(ce.level,ce.row,ce.col,J);T._prefetches.push(_e);const pe=()=>{T._prefetches.removeUnordered(_e)};_e.then(pe,pe)}})()}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:A,apiKey:F,customParameters:w}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:A.path,query:(0,B.B7)({...A.query,...w,token:F??A.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(A,F,w,U){U.level=A,U.row=F-F%this.size,U.col=w-w%this.size;const ee=D(U);return this._tilemapCache.get(ee)}_initializeAvailableLevels(A){this._availableLevels={},A&&A.forEach(F=>this._availableLevels[F.level]=!0)}get test(){const A=this;return{get prefetchingEnabled(){return A._prefetchingEnabled},set prefetchingEnabled(F){A._prefetchingEnabled=F},hasTilemap:(F,w,U)=>!!A._tilemapFromCache(F,w,U,A._tmpTilemapDefinition)}}};ne._maxPrefetch=4,ne._prefetches=new re.Z({initialSize:T._maxPrefetch}),(0,Z._)([(0,X.Cb)({constructOnly:!0,type:Number})],ne.prototype,"levels",void 0),(0,Z._)([(0,se.p)("levels")],ne.prototype,"castLevels",null),(0,Z._)([(0,X.Cb)({readOnly:!0,type:Number})],ne.prototype,"size",null),(0,Z._)([(0,X.Cb)({constructOnly:!0,type:Number})],ne.prototype,"cacheByteSize",void 0),(0,Z._)([(0,X.Cb)({constructOnly:!0})],ne.prototype,"layer",void 0),(0,Z._)([(0,X.Cb)({constructOnly:!0})],ne.prototype,"request",void 0),ne=T=(0,Z._)([(0,S.j)("esri.layers.support.TilemapCache")],ne)},91309:(fe,de,_)=>{_.d(de,{B:()=>Q});var $,v=_(17626),Z=_(86810),C=_(58817),H=_(77712),G=(_(90912),_(76898));let Q=$=class extends Z.wq{constructor(L){super(L)}clone(){return new $({customLayerParameters:(0,C.d9)(this.customLayerParameters),customParameters:(0,C.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,v._)([(0,H.Cb)({json:{type:Object,write:!0}})],Q.prototype,"customLayerParameters",void 0),(0,v._)([(0,H.Cb)({json:{type:Object,write:!0}})],Q.prototype,"customParameters",void 0),(0,v._)([(0,H.Cb)({type:String,json:{write:!0}})],Q.prototype,"layerIdentifier",void 0),(0,v._)([(0,H.Cb)({type:String,json:{write:!0}})],Q.prototype,"tileMatrixSet",void 0),(0,v._)([(0,H.Cb)({type:String,json:{write:!0}})],Q.prototype,"url",void 0),Q=$=(0,v._)([(0,G.j)("esri.layer.support.WMTSLayerInfo")],Q)},24578:(fe,de,_)=>{_.r(de),_.d(de,{fetchFeatureService:()=>q,fromUrl:()=>Q});var v=_(15861),Z=_(84792),C=_(26584),H=_(62208),oe=_(21726),G=_(38305),$=_(30164);function Q(F){return L.apply(this,arguments)}function L(){return(L=(0,v.Z)(function*(F){const w=F.properties?.customParameters,U=yield N(F.url,w),ee={...F.properties,url:F.url};if(!U.sublayerIds)return null!=U.layerOrTableId&&(ee.layerId=U.layerOrTableId,ee.sourceJSON=U.sourceJSON),new U.Constructor(ee);const ue=new((yield _.e(5964).then(_.bind(_,25964))).default)({title:U.parsedUrl.title});return K(ue,U,ee),ue})).apply(this,arguments)}function re(F,w){return F?F.find(U=>U.id===w):null}function K(F,w,U){function ee(ue,ae){const he={...U,layerId:ue,sublayerTitleMode:"service-name"};return(0,H.pC)(ae)&&(he.sourceJSON=ae),new w.Constructor(he)}w.sublayerIds.forEach(ue=>{const ae=ee(ue,re(w.sublayerInfos,ue));F.add(ae)}),w.tableIds.forEach(ue=>{const ae=ee(ue,re(w.tableInfos,ue));F.tables.add(ae)})}function N(F,w){return k.apply(this,arguments)}function k(){return(k=(0,v.Z)(function*(F,w){let U=(0,G.Qc)(F);if((0,H.Wi)(U)&&(U=yield B(F,w)),(0,H.Wi)(U))throw new C.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:F});const{serverType:ee,sublayer:ue}=U;let ae;const he={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(ee){case"MapServer":ae=null!=ue?"FeatureLayer":T(F,w).then(J=>J?"TileLayer":"MapImageLayer");break;case"ImageServer":ae=ne(F,{customParameters:w}).then(J=>J.tileInfo?"LERC"!==(J.tileInfo&&J.tileInfo.format)?.toUpperCase()||J.cacheType&&"elevation"!==J.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer");break;case"SceneServer":ae=ne(U.url.path,{customParameters:w}).then(J=>{if(J){if("Voxel"===J?.layerType)return"VoxelLayer";if(J?.layers&&Array.isArray(J.layers)&&J.layers.length>0){const P={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},R=J.layers[0]?.layerType;if(null!=P[R])return P[R]}}return"SceneLayer"});break;default:ae=he[ee]}const Y="FeatureServer"===ee,le={parsedUrl:U,Constructor:null,layerOrTableId:Y?ue:null,sublayerIds:null,tableIds:null},ce=yield ae;if({FeatureLayer:!0,SceneLayer:!0}[ce]&&null==ue){const J=yield ie(F,ee,w);Y&&(le.sublayerInfos=J.layerInfos,le.tableInfos=J.tableInfos),J.layerIds.length+J.tableIds.length!==1?(le.sublayerIds=J.layerIds,le.tableIds=J.tableIds):Y&&(le.layerOrTableId=J.layerIds[0]??J.tableIds[0],le.sourceJSON=J.layerInfos[0]??J.tableInfos[0])}return le.Constructor=yield D(ce),le})).apply(this,arguments)}function B(F,w){return X.apply(this,arguments)}function X(){return(X=(0,v.Z)(function*(F,w){const U=yield ne(F,{customParameters:w});let ee=null,ue=null;const ae=U.type;if("Feature Layer"===ae||"Table"===ae?(ee="FeatureServer",ue=U.id):"indexedVector"===ae?ee="VectorTileServer":U.hasOwnProperty("mapName")?ee="MapServer":U.hasOwnProperty("bandCount")&&U.hasOwnProperty("pixelSizeX")?ee="ImageServer":U.hasOwnProperty("maxRecordCount")&&U.hasOwnProperty("allowGeometryUpdates")?ee="FeatureServer":U.hasOwnProperty("streamUrls")?ee="StreamServer":te(U)?(ee="SceneServer",ue=U.id):U.hasOwnProperty("layers")&&te(U.layers?.[0])&&(ee="SceneServer"),!ee)return null;const he=null!=ue?(0,G.DR)(F):null;return{title:(0,H.pC)(he)&&U.name||(0,oe.vt)(F),serverType:ee,sublayer:ue,url:{path:(0,H.pC)(he)?he.serviceUrl:(0,oe.mN)(F).path}}})).apply(this,arguments)}function te(F){return F?.hasOwnProperty("store")&&F.hasOwnProperty("id")&&"number"==typeof F.id}function ie(F,w,U){return se.apply(this,arguments)}function se(){return(se=(0,v.Z)(function*(F,w,U){let ee,ue=!1;if("FeatureServer"===w){const z=yield q(F,{customParameters:U});ue=!!z.layersJSON,ee=z.layersJSON||z.serviceJSON}else ee=yield ne(F,{customParameters:U});const ae=ee?.layers,he=ee?.tables;return{layerIds:ae?.map(z=>z.id).reverse()||[],tableIds:he?.map(z=>z.id).reverse()||[],layerInfos:ue?ae:[],tableInfos:ue?he:[]}})).apply(this,arguments)}function S(F){return!F.type||"Feature Layer"===F.type}function q(F,w){return h.apply(this,arguments)}function h(){return(h=(0,v.Z)(function*(F,w){let U=yield ne(F,w);U=U||{},U.layers=U.layers?.filter(S)||[];const ee={serviceJSON:U};if(U.currentVersion<10.5)return ee;const ue=yield ne(F+"/layers",w);return ee.layersJSON={layers:ue?.layers?.filter(S)||[],tables:ue?.tables||[]},ee})).apply(this,arguments)}function D(F){return M.apply(this,arguments)}function M(){return(M=(0,v.Z)(function*(F){return(0,$.T[F])()})).apply(this,arguments)}function T(F,w){return W.apply(this,arguments)}function W(){return(W=(0,v.Z)(function*(F,w){return(yield ne(F,{customParameters:w})).tileInfo})).apply(this,arguments)}function ne(F,w){return A.apply(this,arguments)}function A(){return(A=(0,v.Z)(function*(F,w){return(yield(0,Z.default)(F,{responseType:"json",query:{f:"json",...w?.customParameters,token:w?.apiKey}})).data})).apply(this,arguments)}},96504:(fe,de,_)=>{_.d(de,{Z:()=>L});var v=_(17626),Z=_(86810),C=_(77712),$=(_(85931),_(8314),_(90912),_(76898));let Q=class extends Z.wq{get affectsPixelSize(){return!1}forwardTransform(re){return re}inverseTransform(re){return re}};(0,v._)([(0,C.Cb)()],Q.prototype,"affectsPixelSize",null),(0,v._)([(0,C.Cb)({json:{write:!0}})],Q.prototype,"spatialReference",void 0),Q=(0,v._)([(0,$.j)("esri.layers.support.rasterTransforms.BaseRasterTransform")],Q);const L=Q},76671:(fe,de,_)=>{_.d(de,{Z:()=>re});var v=_(17626),Z=_(77712),G=(_(85931),_(8314),_(90912),_(55342)),$=_(76898),Q=_(96504);let L=class extends Q.Z{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(K){return"point"===(K=K.clone()).type?(K.x>180+this.tolerance&&(K.x-=360),K):(K.xmin>=180-this.tolerance?(K.xmax-=360,K.xmin-=360):K.xmax>180+this.tolerance&&(K.xmin=-180,K.xmax=180),K)}inverseTransform(K){return"point"===(K=K.clone()).type?(K.x<-this.tolerance&&(K.x+=360),K):(K.xmin<-this.tolerance&&(K.xmin+=360,K.xmax+=360),K)}};(0,v._)([(0,G.J)({GCSShiftXform:"gcs-shift"})],L.prototype,"type",void 0),(0,v._)([(0,Z.Cb)()],L.prototype,"tolerance",void 0),L=(0,v._)([(0,$.j)("esri.layers.support.rasterTransforms.GCSShiftTransform")],L);const re=L},85374:(fe,de,_)=>{_.d(de,{Z:()=>se});var v=_(17626),C=(_(29132),_(77712)),$=(_(85931),_(8314),_(90912),_(55342)),Q=_(68653),L=_(76898),re=_(99433),K=_(96504),N=_(49672),k=_(2004);function B(S,q,h){const{x:D,y:M}=q;if(h<2)return{x:S[0]+D*S[2]+M*S[4],y:S[1]+D*S[3]+M*S[5]};if(2===h){const ee=D*D,ue=M*M,ae=D*M;return{x:S[0]+D*S[2]+M*S[4]+ee*S[6]+ae*S[8]+ue*S[10],y:S[1]+D*S[3]+M*S[5]+ee*S[7]+ae*S[9]+ue*S[11]}}const T=D*D,W=M*M,ne=D*M,A=T*D,F=T*M,w=D*W,U=M*W;return{x:S[0]+D*S[2]+M*S[4]+T*S[6]+ne*S[8]+W*S[10]+A*S[12]+F*S[14]+w*S[16]+U*S[18],y:S[1]+D*S[3]+M*S[5]+T*S[7]+ne*S[9]+W*S[11]+A*S[13]+F*S[15]+w*S[17]+U*S[19]}}function X(S,q,h){const{xmin:D,ymin:M,xmax:T,ymax:W,spatialReference:ne}=q;let A=[];if(h<2)A.push({x:D,y:W}),A.push({x:T,y:W}),A.push({x:D,y:M}),A.push({x:T,y:M});else{let U=10;for(let ee=0;ee<U;ee++)A.push({x:D,y:M+(W-M)*ee/(U-1)}),A.push({x:T,y:M+(W-M)*ee/(U-1)});U=8;for(let ee=1;ee<=U;ee++)A.push({x:D+(T-D)*ee/U,y:M}),A.push({x:D+(T-D)*ee/U,y:W})}A=A.map(U=>B(S,U,h));const F=A.map(U=>U.x),w=A.map(U=>U.y);return new k.Z({xmin:Math.min.apply(null,F),xmax:Math.max.apply(null,F),ymin:Math.min.apply(null,w),ymax:Math.max.apply(null,w),spatialReference:ne})}let ie=class extends K.Z{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(S,q){const{coeffX:h,coeffY:D}=q;if(!h?.length||!D?.length||h.length!==D.length)return null;const M=[];for(let T=0;T<h.length;T++)M.push(h[T]),M.push(D[T]);return M}writeForwardCoefficients(S,q,h){const D=[],M=[];for(let T=0;T<S?.length;T++)T%2==0?D.push(S[T]):M.push(S[T]);q.coeffX=D,q.coeffY=M}get inverseCoefficients(){let S=this._get("inverseCoefficients");const q=this._get("forwardCoefficients");return!S&&q&&this.polynomialOrder<2&&(S=function te(S){const[q,h,D,M,T,W]=S,ne=D*W-T*M,A=T*M-D*W;return[(T*h-q*W)/ne,(D*h-q*M)/A,W/ne,M/A,-T/ne,-D/A]}(q)),S}set inverseCoefficients(S){this._set("inverseCoefficients",S)}readInverseCoefficients(S,q){const{inverseCoeffX:h,inverseCoeffY:D}=q;if(!h?.length||!D?.length||h.length!==D.length)return null;const M=[];for(let T=0;T<h.length;T++)M.push(h[T]),M.push(D[T]);return M}writeInverseCoefficients(S,q,h){const D=[],M=[];for(let T=0;T<S?.length;T++)T%2==0?D.push(S[T]):M.push(S[T]);q.inverseCoeffX=D,q.inverseCoeffY=M}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(S){if("point"===S.type){const q=B(this.forwardCoefficients,S,this.polynomialOrder);return new N.Z({x:q.x,y:q.y,spatialReference:S.spatialReference})}return X(this.forwardCoefficients,S,this.polynomialOrder)}inverseTransform(S){if("point"===S.type){const q=B(this.inverseCoefficients,S,this.polynomialOrder);return new N.Z({x:q.x,y:q.y,spatialReference:S.spatialReference})}return X(this.inverseCoefficients,S,this.polynomialOrder)}};(0,v._)([(0,C.Cb)({json:{write:!0}})],ie.prototype,"polynomialOrder",void 0),(0,v._)([(0,C.Cb)()],ie.prototype,"forwardCoefficients",void 0),(0,v._)([(0,Q.r)("forwardCoefficients",["coeffX","coeffY"])],ie.prototype,"readForwardCoefficients",null),(0,v._)([(0,re.c)("forwardCoefficients")],ie.prototype,"writeForwardCoefficients",null),(0,v._)([(0,C.Cb)({json:{write:!0}})],ie.prototype,"inverseCoefficients",null),(0,v._)([(0,Q.r)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],ie.prototype,"readInverseCoefficients",null),(0,v._)([(0,re.c)("inverseCoefficients")],ie.prototype,"writeInverseCoefficients",null),(0,v._)([(0,C.Cb)()],ie.prototype,"affectsPixelSize",null),(0,v._)([(0,$.J)({PolynomialXform:"polynomial"})],ie.prototype,"type",void 0),ie=(0,v._)([(0,L.j)("esri.layers.support.rasterTransforms.PolynomialTransform")],ie);const se=ie},46572:(fe,de,_)=>{_.d(de,{j:()=>te,c:()=>ie});var v=_(76671),Z=_(17626),Q=(_(63290),_(90912),_(85931),_(8314),_(82255),_(55342)),L=_(76898),re=_(96504);let K=class extends re.Z{constructor(){super(...arguments),this.type="identity"}};(0,Z._)([(0,Q.J)({IdentityXform:"identity"})],K.prototype,"type",void 0),K=(0,Z._)([(0,L.j)("esri.layers.support.rasterTransforms.IdentityTransform")],K);const N=K;var k=_(85374);const B={GCSShiftXform:v.Z,IdentityXform:N,PolynomialXform:k.Z},X=Object.keys(B);function te(se){const S=se?.type;return!se||X.includes(S)}function ie(se){if(!se?.type)return null;const q=B[se?.type];if(q){const h=new q;return h.read(se),h}return null}},51026:(fe,de,_)=>{_.d(de,{d:()=>C,h:()=>Z});var v=_(2584);const Z={type:v.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:C}}}}};function C(H,oe,G,$){if(!H)return null;const{minScale:Q,maxScale:L,minLOD:re,maxLOD:K}=oe;if(null!=re&&null!=K)return v.Z.fromJSON($&&$.ignoreMinMaxLOD?H:{...H,lods:H.lods.filter(({level:N})=>null!=N&&N>=re&&N<=K)});if(0!==Q&&0!==L){const N=X=>Math.round(1e4*X)/1e4,k=Q?N(Q):1/0,B=L?N(L):-1/0;return v.Z.fromJSON({...H,lods:H.lods.filter(X=>{const te=N(X.scale);return te<=k&&te>=B})})}return v.Z.fromJSON(H)}},22264:(fe,de,_)=>{function v(G,$){return $?"xoffset"in $&&$.xoffset?Math.max(G,Math.abs($.xoffset)):"yoffset"in $&&$.yoffset?Math.max(G,Math.abs($.yoffset||0)):G:G}function C(G,$){return"number"==typeof G?G:G&&G.stops&&G.stops.length?function Z(G){let $=0,Q=0;for(let L=0;L<G.length;L++){const re=G[L].size;"number"==typeof re&&($+=re,Q++)}return $/Q}(G.stops):$}function oe(G){const $=G&&G.renderer,Q="touch"===(G&&G.event&&G.event.pointerType)?9:6;if(!$)return Q;const L="visualVariables"in $?function H(G,$){if(!$)return G;const Q=$.filter(N=>"size"===N.type).map(N=>{const{maxSize:k,minSize:B}=N;return(C(k,G)+C(B,G))/2});let L=0;const re=Q.length;if(0===re)return G;for(let N=0;N<re;N++)L+=Q[N];const K=Math.floor(L/re);return Math.max(K,G)}(Q,$.visualVariables):Q;if("simple"===$.type)return v(L,$.symbol);if("unique-value"===$.type){let re=L;return $.uniqueValueInfos.forEach(K=>{re=v(re,K.symbol)}),re}if("class-breaks"===$.type){let re=L;return $.classBreakInfos.forEach(K=>{re=v(re,K.symbol)}),re}return L}_.d(de,{k:()=>oe})},64288:(fe,de,_)=>{_.d(de,{cM:()=>Ne,ws:()=>Te,xV:()=>je,UK:()=>xe,$_:()=>ae});var v=_(26584),Z=_(63290),H=(_(21286),_(7547)),G=(_(81295),_(39406)),$=_(27899);class Q{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(ye,Ee,ve,Pe,Me,De,Se,ge,Ie){this.color=ye,this.haloColor=Ee,this.haloSize=ve,this.size=Pe,this.angle=Me,this.offsetX=De,this.offsetY=Se,this.hAnchor=ge,this.vAnchor=Ie}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}Q.pool=new $.Z(Q);var L=_(67969),K=(_(55086),_(40852));const N=Z.Z.getLogger("esri.views.2d.engine.webgl.Utils"),k="geometry",ie=[{name:k,strideInBytes:12}],se=[{name:k,strideInBytes:36}],S=[{name:k,strideInBytes:24}],q=[{name:k,strideInBytes:12}],h=[{name:k,strideInBytes:40}],D=[{name:k,strideInBytes:36}],M=[{name:k,strideInBytes:36}];function T(V){const ye={};for(const Ee of V)ye[Ee.name]=Ee.strideInBytes;return ye}const W=T([{name:k,strideInBytes:36}]),ne=T(ie),A=T(se),F=T(S),w=T(q),U=T(h),ee=T(D),ue=T(M);function ae(V,ye){switch(V){case G.LW.MARKER:return ye===G.mD.HEATMAP?ne:W;case G.LW.FILL:switch(ye){case G.mD.DOT_DENSITY:return w;case G.mD.SIMPLE:case G.mD.OUTLINE_FILL_SIMPLE:return F;default:return A}case G.LW.LINE:return U;case G.LW.TEXT:return ee;case G.LW.LABEL:return ue}}function Te(V){switch(V){case"butt":return H.RL.BUTT;case"round":return H.RL.ROUND;case"square":return H.RL.SQUARE;default:return N.error(new v.Z("mapview-invalid-type",`Cap type ${V} is not a valid option. Defaulting to round`)),H.RL.ROUND}}function je(V){switch(V){case"miter":return H.AH.MITER;case"bevel":return H.AH.BEVEL;case"round":return H.AH.ROUND;default:return N.error(new v.Z("mapview-invalid-type",`Join type ${V} is not a valid option. Defaulting to round`)),H.AH.ROUND}}function Be(V){switch(V){case L.g.BYTE:case L.g.UNSIGNED_BYTE:return 1;case L.g.SHORT:case L.g.UNSIGNED_SHORT:return 2;case L.g.FLOAT:case L.g.INT:case L.g.UNSIGNED_INT:return 4}}function xe(V){switch(V){case L.Br.UNSIGNED_BYTE:return Uint8Array;case L.Br.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case L.Br.FLOAT:return Float32Array;default:return void N.error(new v.Z("webgl-utils",`Unable to handle type ${V}`))}}const be=V=>{const ye=new Map;for(const Ee in V)for(const ve of V[Ee])ye.set(ve.name,ve.location);return ye},Ke=V=>{const ye={};for(const Ee in V){const ve=V[Ee];ye[Ee]=ve.length?ve[0].stride:0}return ye},Ce=new Map,Ne=(V,ye)=>{if(!Ce.has(V)){const Ee=function We(V){const ye={};for(const Ee in V){let Pe=0;ye[Ee]=V[Ee].map(Me=>{const De=new K.G(Me.name,Me.count,Me.type,Pe,0,Me.normalized||!1);return Pe+=Me.count*Be(Me.type),De}),ye[Ee].forEach(Me=>Me.stride=Pe)}return ye}(ye),ve={strides:Ke(Ee),bufferLayouts:Ee,attributes:be(ye)};Ce.set(V,ve)}return Ce.get(V)}},81295:(fe,de,_)=>{_.d(de,{Vs:()=>K,aH:()=>re,t2:()=>L});var v=_(62208),Z=_(5254);function L(N){if(!N)return 0;const{r:k,g:B,b:X,a:te}=N;return(0,Z.Jz)(k*te,B*te,X*te,255*te)}function re(N){if(!N)return 0;const[k,B,X,te]=N;return(0,Z.Jz)(k*(te/255),B*(te/255),X*(te/255),te)}function K(N,k,B=0){if((0,v.Wi)(k))return N[B+0]=0,N[B+1]=0,N[B+2]=0,void(N[B+3]=0);const{r:X,g:te,b:ie,a:se}=k;N[B+0]=X*se/255,N[B+1]=te*se/255,N[B+2]=ie*se/255,N[B+3]=se}},39406:(fe,de,_)=>{var v,Z,C,H,oe,G,$,Q,L;_.d(de,{LW:()=>v,X:()=>oe,jx:()=>C,mD:()=>Q,mf:()=>G}),(L=v||(v={}))[L.FILL=0]="FILL",L[L.LINE=1]="LINE",L[L.MARKER=2]="MARKER",L[L.TEXT=3]="TEXT",L[L.LABEL=4]="LABEL",function(L){L[L.SUCCEEDED=0]="SUCCEEDED",L[L.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(Z||(Z={})),function(L){L[L.NONE=0]="NONE",L[L.MAP=1]="MAP",L[L.LABEL=2]="LABEL",L[L.LABEL_ALPHA=4]="LABEL_ALPHA",L[L.HITTEST=8]="HITTEST",L[L.HIGHLIGHT=16]="HIGHLIGHT",L[L.CLIP=32]="CLIP",L[L.DEBUG=64]="DEBUG",L[L.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(C||(C={})),function(L){L[L.SIZE=0]="SIZE",L[L.COLOR=1]="COLOR",L[L.OPACITY=2]="OPACITY",L[L.ROTATION=3]="ROTATION"}(H||(H={})),function(L){L[L.NONE=0]="NONE",L[L.OPACITY=1]="OPACITY",L[L.COLOR=2]="COLOR",L[L.ROTATION=4]="ROTATION",L[L.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",L[L.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",L[L.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",L[L.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(oe||(oe={})),function(L){L[L.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",L[L.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",L[L.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",L[L.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(G||(G={})),function(L){L[L.SPRITE=0]="SPRITE",L[L.GLYPH=1]="GLYPH"}($||($={})),function(L){L[L.DEFAULT=0]="DEFAULT",L[L.SIMPLE=1]="SIMPLE",L[L.DOT_DENSITY=2]="DOT_DENSITY",L[L.OUTLINE_FILL=3]="OUTLINE_FILL",L[L.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",L[L.HEATMAP=5]="HEATMAP",L[L.PIE_CHART=6]="PIE_CHART"}(Q||(Q={}))},18716:(fe,de,_)=>{_.d(de,{CA:()=>ne,Gq:()=>ce,Xp:()=>W,a:()=>Y,dk:()=>he,hF:()=>F,jj:()=>A,jy:()=>T,m2:()=>w,mE:()=>z,qr:()=>le});var v=_(26584),Z=_(40028),C=_(39406);const D=Object.keys(C.mD).filter(J=>"number"==typeof C.mD[J]).reduce((J,P)=>({...J,[P]:C.mD[P]}),{});function T(J){return J===C.mD.OUTLINE_FILL||J===C.mD.OUTLINE_FILL_SIMPLE}function W(J){return function M(J){return J===C.mD.SIMPLE||J===C.mD.OUTLINE_FILL_SIMPLE}(J.symbologyType)}function ne(J){return T(J.symbologyType)}function A(J,P){switch(J){case C.LW.FILL:return he.from(P);case C.LW.LINE:return Y.from(P);case C.LW.MARKER:return z.from(P);case C.LW.TEXT:return le.from(P);case C.LW.LABEL:return ce.from(P);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${J}`)}}function F(J){switch(w.load(J).geometryType){case C.LW.MARKER:return new z(J);case C.LW.FILL:return new he(J);case C.LW.LINE:return new Y(J);case C.LW.TEXT:return new le(J);case C.LW.LABEL:return new ce(J)}}class w{constructor(P){this._data=0,this._data=P}static load(P){const R=this.shared;return R.data=P,R}set data(P){this._data=P}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(P){this.setBits(P,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(P){this.setBit(20,P)}get sdf(){return!!this.bit(11)}set sdf(P){this.setBit(11,P)}get pattern(){return!!this.bit(12)}set pattern(P){this.setBit(12,P)}get textureBinding(){return this.bits(0,8)}set textureBinding(P){this.setBits(P,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(P){this.setBits(P,21,26)}get geometryTypeString(){switch(this.geometryType){case C.LW.FILL:return"fill";case C.LW.MARKER:return"marker";case C.LW.LINE:return"line";case C.LW.TEXT:return"text";case C.LW.LABEL:return"label";default:throw new v.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(P,R){const _e=1<<P;R?this._data|=_e:this._data&=~_e}bit(P){return(this._data&1<<P)>>P}setBits(P,R,_e){for(let pe=R,me=0;pe<_e;pe++,me++)this.setBit(pe,0!=(P&1<<me))}bits(P,R){let _e=0;for(let pe=P,me=0;pe<R;pe++,me++)_e|=this.bit(pe)<<me;return _e}hasVV(){return!1}setVV(P,R){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:C.mD[this.symbologyType],options:D,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}}w.shared=new w(0);const U=J=>class extends J{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(P){this.setBit(16,P)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(P){this.setBit(17,P)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(P){this.setBit(18,P)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(P){this.setBit(19,P)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(P,R){super.setVV(P,R);const _e=function H(J,P,R){const _e=C.X.SIZE_FIELD_STOPS|C.X.SIZE_MINMAX_VALUE|C.X.SIZE_SCALE_STOPS|C.X.SIZE_UNIT_VALUE,pe=(P&(C.mf.FIELD_TARGETS_OUTLINE|C.mf.MINMAX_TARGETS_OUTLINE|C.mf.SCALE_TARGETS_OUTLINE|C.mf.UNIT_TARGETS_OUTLINE))>>>4;return J===C.LW.LINE&&R.isOutline||J===C.LW.FILL&&T(R.symbologyType)?_e&pe:_e&~pe}(this.geometryType,P,R)&P;this.vvSizeMinMaxValue=!!(_e&C.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(_e&C.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(_e&C.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(_e&C.X.SIZE_SCALE_STOPS)}},ee=J=>class extends J{get vvRotation(){return 0!==this.bit(15)}set vvRotation(P){this.setBit(15,P)}hasVV(){return super.hasVV()||this.vvRotation}setVV(P,R){super.setVV(P,R),this.vvRotation=!R.isOutline&&!!(P&C.X.ROTATION)}},ue=J=>class extends J{get vvColor(){return 0!==this.bit(13)}set vvColor(P){this.setBit(13,P)}hasVV(){return super.hasVV()||this.vvColor}setVV(P,R){super.setVV(P,R),this.vvColor=!R.isOutline&&!!(P&C.X.COLOR)}},ae=J=>class extends J{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(P){this.setBit(14,P)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(P,R){super.setVV(P,R),this.vvOpacity=!R.isOutline&&!!(P&C.X.OPACITY)}};class he extends(ue(ae(U(w)))){static load(P){const R=this.shared;return R.data=P,R}static from(P){const{symbologyType:R,vvFlags:_e}=P,pe=this.load(0);return pe.geometryType=C.LW.FILL,pe.symbologyType=R,R!==C.mD.DOT_DENSITY&&pe.setVV(_e,P),pe.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}he.shared=new he(0);class z extends(ue(ae(ee(U(w))))){static load(P){const R=this.shared;return R.data=P,R}static from(P){const{symbologyType:R,vvFlags:_e}=P,pe=this.load(0);return pe.geometryType=C.LW.MARKER,pe.symbologyType=R,R!==C.mD.HEATMAP&&pe.setVV(_e,P),pe.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}z.shared=new z(0);class Y extends(ue(ae(U(w)))){static load(P){const R=this.shared;return R.data=P,R}static from(P){const R=this.load(0);return R.geometryType=C.LW.LINE,R.symbologyType=P.symbologyType,R.setVV(P.vvFlags,P),R.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}Y.shared=new Y(0);class le extends(ue(ae(ee(U(w))))){static load(P){const R=this.shared;return R.data=P,R}static from(P){const R=this.load(0);return R.geometryType=C.LW.TEXT,R.symbologyType=P.symbologyType,R.setVV(P.vvFlags,P),R.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}le.shared=new le(0);class ce extends(U(w)){static load(P){const R=this.shared;return R.data=P,R}static from(P){const R=this.load(0);return R.geometryType=C.LW.LABEL,R.symbologyType=P.symbologyType,R.setVV(P.vvFlags,P),R.mapAligned=(0,Z.NS)(P.placement),R.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}ce.shared=new ce(0)},13112:(fe,de,_)=>{_.d(de,{Z:()=>L});var v=_(17626),Z=_(80542),C=_(77712),$=(_(85931),_(8314),_(90912),_(76898));let Q=class extends Z.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const re=this.get("tileStore.tileScheme.spatialReference");return re&&re.toJSON()||null}};(0,v._)([(0,C.Cb)({readOnly:!0})],Q.prototype,"supportsTileUpdates",null),(0,v._)([(0,C.Cb)({constructOnly:!0})],Q.prototype,"remoteClient",void 0),(0,v._)([(0,C.Cb)({constructOnly:!0})],Q.prototype,"service",void 0),(0,v._)([(0,C.Cb)()],Q.prototype,"spatialReference",null),(0,v._)([(0,C.Cb)({constructOnly:!0})],Q.prototype,"tileInfo",void 0),(0,v._)([(0,C.Cb)({constructOnly:!0})],Q.prototype,"tileStore",void 0),Q=(0,v._)([(0,$.j)("esri.views.2d.layers.features.processors.BaseProcessor")],Q);const L=Q},55376:(fe,de,_)=>{function C(H,oe,G,$){const Q=H.clone(),L=1<<Q.level,re=Q.col+oe,K=Q.row+G;return $&&re<0?(Q.col=re+L,Q.world-=1):re>=L?(Q.col=re-L,Q.world+=1):Q.col=re,Q.row=K,Q}_.d(de,{M:()=>C}),_(81340)},8859:(fe,de,_)=>{_.d(de,{J4:()=>F,_N:()=>te,gv:()=>w});var A,ae,v=_(62208),Z=_(23841),H=(_(84161),_(28093)),G=(_(55915),_(90014)),$=_(70562),L=(_(34054),_(26242)),K=(_(60507),_(26046)),N=_(62483),k=_(67857),B=_(40841);function te(ae,he){return function se(ae,he){const z=(0,H.c)(),Y=(0,H.c)();let le=!1;return ce=>{const J=he(ce);if("start"===ce.action){const _e=(0,Z.md)(ce.screenStart,(0,Z.c$)(L.qW.get())),pe=(0,K.u4)(ae.state.camera,_e,ue);(0,v.pC)(pe)&&(le=(0,G.BR)(J,pe,z))}if(!le)return null;const P=(0,Z.md)(ce.screenEnd,(0,Z.c$)(L.qW.get())),R=(0,K.u4)(ae.state.camera,P,ue);return(0,v.Wi)(R)?null:(0,G.BR)(J,R,Y)?{...ce,renderStart:z,renderEnd:Y,plane:J,ray:R}:null}}(ae,()=>he)}function F(ae){let he=null;return z=>{switch(z.action){case"start":he=ae.disableDisplay();break;case"end":case"cancel":(0,v.pC)(he)&&(he.remove(),he=null)}return z}}function w(ae,he=null){const z=(0,N.Z8)(ae.state.viewingMode);z.options.selectionMode=!0,z.options.store=k.eC.MIN,z.options.hud=!1;const Y=(0,Z.s1)(),le={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},ce=(0,H.c)(),J=(0,v.Pt)(he,ae.spatialReference),P=_e=>{ae.map.ground&&ae.map.ground.opacity<1?le.exclude.add(B.cy):le.exclude.delete(B.cy),ae.sceneIntersectionHelper.intersectIntersectorScreen((0,Z.md)(_e,Y),z,le);const pe=z.results.min;let me;if(pe.getIntersectionPoint(ce))me=pe.intersector===k.q7.TERRAIN?A.GROUND:A.OTHER;else{if(!z.results.ground.getIntersectionPoint(ce))return null;me=A.GROUND}return{location:ae.renderCoordsHelper.fromRenderCoords(ce,J),surfaceType:me}};let R;return _e=>{if("start"===_e.action){const me=P(_e.screenStart);R=(0,v.pC)(me)?me.location:null}if((0,v.Wi)(R))return null;const pe=P(_e.screenEnd);return(0,v.pC)(pe)&&(0,v.pC)(pe.location)?{..._e,mapStart:R,mapEnd:pe.location,surfaceType:pe.surfaceType}:null}}_(30260),(ae=A||(A={}))[ae.GROUND=0]="GROUND",ae[ae.OTHER=1]="OTHER",(0,H.c)(),(0,H.c)();const ue=(0,$.Ue)()},77603:(fe,de,_)=>{_.d(de,{R:()=>se});var v=_(72392),Z=_(62208),C=_(32917),H=_(28347),oe=_(43703),G=_(84161),$=_(28093),Q=_(993),L=_(67709),re=_(26242),K=_(53928),N=_(52107),k=_(57521),B=_(40723),X=_(16396),te=_(92972),ie=_(92222);class se extends K._{constructor(h){super(h),this._handles=new v.Z,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=(0,$.c)(),this._up=(0,$.c)(),this._right=(0,$.c)(),this._renderOccluded=B.yD.OccludeAndTransparent,this._color=(0,L.f)(1,0,0,1),this._outlineColor=(0,L.f)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=B.yD.Opaque,this.applyProps(h)}get renderOccluded(){return this._renderOccluded}set renderOccluded(h){h!==this._renderOccluded&&(this._renderOccluded=h,this._updateQuadMaterial())}get color(){return this._color}set color(h){(0,Q.c)(this._color,h),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(h){(0,Q.c)(this._outlineColor,h),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(h){const D=0===this._outlineSize!=(0===h);this._outlineSize=h,D?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(h){h!==this._size&&(this._size=h,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(h){this._outlineRenderOccluded=h,this._updateOutlineMaterial()}set geometry({previous:h,center:D,next:M}){this._maxSize=Math.min((0,G.i)(D,h),(0,G.i)(D,M))/3,(0,G.n)(this._up,(0,G.b)(this._up,h,D)),(0,G.n)(this._right,(0,G.b)(this._right,M,D)),(0,G.c)(this._position,D),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new te.E(this.quadMaterialParameters),this._outlineMaterial=new ie.U(this.outlineMaterialParameters),this._handles.add((0,C.YP)(()=>this.view.state.camera,()=>this._updateTransform()))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(h){h(this._quadMaterial),h(this._outlineMaterial)}createGeometries(h){this._createQuadGeometry(h),this._createOutlineGeometry(h),this._updateTransform(h)}_createQuadGeometry(h){const D=this._quadGeometryData(this._up,this._right);h.addGeometry(D,this._quadMaterial)}_createOutlineGeometry(h){if(0===this._outlineSize)return;const D=(0,G.a)(re.WM.get(),this._up,this._right),M=k.Z.createPolylineGeometry([this._up,D,this._right]);h.addGeometry(M,this._outlineMaterial)}_updateTransform(h=this.object){const M=this._size*this.view.state.camera.computeScreenPixelSizeAt(this._position),T=Math.min(this._maxSize,M);(0,H.f)(S,this._position),(0,H.h)(S,S,[T,T,T]),(0,Z.pC)(h)&&(h.transformation=S)}_quadGeometryData(h,D){const M=(0,G.a)(re.WM.get(),h,D);return new N.Z([[X.T.POSITION,{size:3,data:[0,0,0,...D,...h,...M],exclusive:!0}]],[[X.T.POSITION,new Uint16Array([0,1,2,1,2,3])]])}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameters(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameters(this.outlineMaterialParameters)}}const S=(0,oe.c)()},50916:(fe,de,_)=>{_.d(de,{r:()=>N});var v=_(17626),Z=_(26584),C=_(62208),H=_(32917),oe=_(77712),L=(_(85931),_(8314),_(90912),_(76898)),re=_(41632),K=_(61779);const N=k=>{let B=class extends k{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataLevelRange(){const X=this.tileInfo.lods;return this.levelRangeFromScaleRange(X[0].scale,X[X.length-1].scale)}get displayLevelRange(){const X=this.tileInfo.lods,se=this.levelRangeFromScaleRange(this.layer.minScale||X[0].scale,this.layer.maxScale||X[X.length-1].scale);return this.layer.maxScale&&se.maxLevel++,se}getTileUrl(X,te,ie){return this.layer.getTileUrl(X,te,ie)}_addTilingSchemeMatchPromise(){if((0,C.Wi)(this.fullExtent))return this.addResolvingPromise(Promise.reject(new Z.Z("tilingscheme:extent-not-defined","This layer doesn't define a fullExtent.")));const X=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if((0,C.pC)(X))return this.addResolvingPromise(Promise.reject(X));const te=(0,H.N1)(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>{const se=this._getTileInfoCompatibilityError(this.tileInfo,this.view.basemapTerrain.tilingScheme);if(se)throw se});this.addResolvingPromise(te)}_getTileInfoSupportError(X,te){const ie=(0,K.er)(X,te,this.view.spatialReference,this.view.state.viewingMode);if(ie){const se={layer:this.layer,error:ie};let S;switch(ie.name){case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":case"tilingscheme:local-unsupported-spatial-reference":S=new Z.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",se);break;default:S=new Z.Z("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",se)}return S}return null}_getTileInfoCompatibilityError(X,te){return te.compatibleWith(X)?null:new Z.Z("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")}levelRangeFromScaleRange(X,te){const ie={minLevel:0,maxLevel:1/0},se=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!se)return ie;const S=se.levels[0],q=h=>{const D=Math.log(S.scale/h)/Math.LN2;return.5-Math.abs(.5-D%1)<1e-9?Math.round(D):Math.ceil(D)};return null!=X&&X>0&&(ie.minLevel=Math.max(0,q(X))),null!=te&&te>0&&(ie.maxLevel=Math.max(0,q(te))),ie}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return(0,v._)([(0,oe.Cb)({readOnly:!0})],B.prototype,"imageFormatIsOpaque",null),(0,v._)([(0,oe.Cb)({readOnly:!0})],B.prototype,"updating",void 0),(0,v._)([(0,oe.Cb)(re.q)],B.prototype,"updatingProgress",void 0),(0,v._)([(0,oe.Cb)(re.V)],B.prototype,"updatingProgressValue",void 0),(0,v._)([(0,oe.Cb)()],B.prototype,"fullExtent",null),(0,v._)([(0,oe.Cb)({readOnly:!0})],B.prototype,"isOpaque",null),(0,v._)([(0,oe.Cb)({readOnly:!0})],B.prototype,"dataLevelRange",null),(0,v._)([(0,oe.Cb)({readOnly:!0})],B.prototype,"displayLevelRange",null),(0,v._)([(0,oe.Cb)()],B.prototype,"layer",void 0),(0,v._)([(0,oe.Cb)()],B.prototype,"tileInfo",void 0),B=(0,v._)([(0,L.j)("esri.views.3d.layers.TiledLayerView3D")],B),B}},3493:(fe,de,_)=>{_.d(de,{Z:()=>$,s:()=>G});var v=_(58817),Z=_(62208),C=_(97445);const H={setAttribute(){},rollback(){},commit(){}};var oe,B;function G(B,X){const te=X.attributes[B.objectIdField],ie=B.sessions.get(te);if(ie)return ie;const se=(0,v.d9)(X.attributes),S=new Set;if(null==te)return H;const q=B.attributeOverrides.createInteractiveEditSession(te),h=new Map;let M=oe.EDITING;const T={setAttribute(W,ne){if(M!==oe.EDITING)return;const A=B.fieldsIndex.get(W);if((0,Z.Wi)(A))return;const F=B.attributeStorageInfo.findIndex(ee=>ee.name===A.name);if(F<0)return;q.set(F,ne);const w=B.attributeStorageInfo[F];let U=!1;S.add(W),B.forEachNode((ee,ue)=>{const ae=((W,ne)=>{const A=h.get(W);if(null==A){const F=ne.indexOf(te);return h.set(W,F),F}return A})(ee,ue);if(-1===ae)return;const he=B.getAttributeData(ee.index);if(he){const z=he[w.name];z&&(z[ae]=ne,B.setAttributeData(ee.index,he,X),U=!0)}}),U&&B.clearMemCache()},rollback(){if(M===oe.EDITING){for(const W of S)this.setAttribute(W,se[W]);q.rollback(),M=oe.ROLLED_BACK,B.sessions.delete(te)}},commit(){M===oe.EDITING&&(q.commit(),M=oe.COMMITTED,B.sessions.delete(te))}};return B.sessions.set(te,T),T}function $(B,X){const te=function Q(B,X){const te=X.edits.updateFeatures;if(!te||0===te.length)return new k;const ie=function K(B){const X=new Set;if(!B.updatedFeatures)return X;for(const te of B.updatedFeatures)null!=te.objectId&&null==te.error&&X.add(te.objectId);return X}(X),se=new k,S=new Map;for(let M=0;M<B.attributeStorageInfo.length;M++)S.set(B.attributeStorageInfo[M].name,M);const q=B.fieldsIndex,h=B.objectIdField,D=te.filter(M=>{const T=(0,C.g)(q,M.attributes,h);return ie.has(T)});return B.forEachNode((M,T)=>{const W=new Set(T);for(const ne of D){const A=(0,C.g)(q,ne.attributes,h);if(!W.has(A))continue;const F=T.indexOf(A);for(const w in ne.attributes){const U=B.fieldsIndex.normalizeFieldName(w);L(se,M.index,U).push({featureIndex:F,featureId:A,value:ne.attributes[w]})}}}),se}(B,X);if(0===te.size)return;const ie=new Map;for(let S=0;S<B.attributeStorageInfo.length;S++)ie.set(B.attributeStorageInfo[S].name,S);let se=!1;te.forEach((S,q)=>{const h=B.getAttributeData(q);let D=!1;S.forEach((M,T)=>{const W=(0,Z.pC)(h)?h[T]:null,ne=ie.get(T);for(const{featureIndex:A,value:F,featureId:w}of M)W&&(W[A]=F,D=!0,se=!0),B.attributeOverrides.updateValue(w,ne,F)}),D&&B.setAttributeData(q,h,null)}),se&&B.clearMemCache()}function L(B,X,te){const ie=function re(B,X){const te=B.get(X);if(te)return te;const ie=new N;return B.set(X,ie),ie}(B,X),se=ie.get(te);if(se)return se;const S=new Array;return ie.set(te,S),S}(B=oe||(oe={}))[B.EDITING=0]="EDITING",B[B.ROLLED_BACK=1]="ROLLED_BACK",B[B.COMMITTED=2]="COMMITTED";const N=Map,k=Map},40465:(fe,de,_)=>{_.d(de,{i:()=>k});var v=_(15861),Z=_(17626),C=_(26584),H=_(62208),re=(_(63290),_(90912),_(85931),_(8314),_(82255),_(76898)),K=_(36630),N=_(10023);const k=B=>{let X=class extends B{_validateFetchPopupFeatures(te){const{layer:ie}=this,{popupEnabled:se}=ie;return se?(0,N.V)(ie,te)?void 0:new C.Z("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:ie}):new C.Z("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:ie})}prepareFetchPopupFeatures(te){return(0,v.Z)(function*(){})()}fetchPopupFeatures(te,ie){var se=this;return(0,v.Z)(function*(){const S=se._validateFetchPopupFeatures(ie);if(S)throw S;const q=(0,H.pC)(ie)?ie.clientGraphics:null;if(!q||0===q.length)return[];const h="scene"===se.layer.type&&(0,H.pC)(se.layer.associatedLayer)?se.layer.associatedLayer:se.layer,D=(0,K.Lk)(se.layer.fieldsIndex,yield(0,N.e)(h,(0,N.V)(se.layer,ie)));yield se.prepareFetchPopupFeatures(D);const M=new Set,T=[],W=[];for(const ne of q)(0,K.Gm)(D,ne,M)?W.push(ne):T.push(ne);return 0===W.length?T:se.whenGraphicAttributes(W,[...M]).catch(()=>W).then(ne=>T.concat(ne))})()}};return X=(0,Z._)([(0,re.j)("esri.views.3d.layers.support.PopupSceneLayerView")],X),X}},57610:(fe,de,_)=>{_.d(de,{K:()=>q});var v=_(15861),Z=_(17626),C=_(14517),H=_(63290),oe=_(36082),G=_(77712),$=_(76898),Q=_(819);const L=M=>{let T=class extends M{constructor(){super(...arguments),this._numUpdating=0,this.asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(W,ne){return function K(M,T){const ne=()=>{if(!F||w)return T();F.clear(),w=!0;const U=(0,oe.LJ)(F,T);return w=!1,U};let F=new Q.M(()=>{F&&!w&&M(ne)}),w=!1;return M(ne),{remove:()=>{F&&(F.destroy(),F=null)}}}(A=>this._updateAsync(W,A),ne)}_updateAsync(W,ne){var A=this;return(0,v.Z)(function*(){if(!A._startAsyncUpdate(W)){try{const F=yield ne();A._set(W,F)}catch{H.Z.getLogger(A.declaredClass).warn(`Async update of "${String(W)}" failed. Async update functions should not throw exceptions.`)}A._endAsyncUpdate(W)&&A._updateAsync(W,ne)}})()}_startAsyncUpdate(W){const ne=this.asyncUpdateState.get(W)??re.None;return ne&re.Updating?(this.asyncUpdateState.set(W,ne|re.Invalidated),!0):(++this._numUpdating,this.asyncUpdateState.set(W,ne|re.Updating),!1)}_endAsyncUpdate(W){--this._numUpdating;const ne=(this.asyncUpdateState.get(W)??re.None)&~re.Updating;return ne&re.Invalidated?(this.asyncUpdateState.set(W,ne&~re.Invalidated),!0):(this.asyncUpdateState.set(W,ne),!1)}};return(0,Z._)([(0,G.Cb)({readOnly:!0})],T.prototype,"updating",null),(0,Z._)([(0,G.Cb)()],T.prototype,"_numUpdating",void 0),T=(0,Z._)([(0,$.j)("esri.core.AsyncUpdate")],T),T};var re,M;(M=re||(re={}))[M.None=0]="None",M[M.Updating=1]="Updating",M[M.Invalidated=2]="Invalidated";let N=class extends(L(C.Z)){};N=(0,Z._)([(0,$.j)("esri.core.AsyncUpdate")],N);var k=_(80542),B=_(62208),se=(_(85931),_(8314),_(90912),_(36630));const S=H.Z.getLogger("esri.views.3d.layers.support.SceneLayerViewRequiredFields");let q=class extends(L(k.r)){constructor(M){super(M)}get requiredFields(){const{layerView:{layer:{fieldsIndex:M},definitionExpressionFields:T},rendererFields:W,labelingFields:ne,viewFilterFields:A}=this;return(0,se.Q0)(M,[...(0,B.Pt)(T,[]),...(0,B.Pt)(W,[]),...(0,B.Pt)(ne,[]),...(0,B.Pt)(A,[])])}initialize(){this.layer=this.layerView.layer,this.handles.add([this.autoUpdateAsync("rendererFields",()=>{const{fieldsIndex:T,renderer:W}=this.layer;return W?h(ne=>W.collectRequiredFields(ne,T)):null}),this.autoUpdateAsync("labelingFields",()=>{const{layer:T}=this;return T.labelsVisible?h(W=>(0,se.Mu)(W,T)):null}),this.autoUpdateAsync("viewFilterFields",()=>{const{layer:T,filter:W}=this.layerView;return h(ne=>(0,se.Ll)(ne,T,W))})])}};function h(M){return D.apply(this,arguments)}function D(){return D=(0,v.Z)(function*(M){const T=new Set;try{return yield M(T),Array.from(T).sort()}catch(W){return S.error(W),null}}),D.apply(this,arguments)}(0,Z._)([(0,G.Cb)()],q.prototype,"layerView",void 0),(0,Z._)([(0,G.Cb)()],q.prototype,"layer",void 0),(0,Z._)([(0,G.Cb)()],q.prototype,"requiredFields",null),(0,Z._)([(0,G.Cb)()],q.prototype,"rendererFields",void 0),(0,Z._)([(0,G.Cb)()],q.prototype,"labelingFields",void 0),(0,Z._)([(0,G.Cb)()],q.prototype,"viewFilterFields",void 0),q=(0,Z._)([(0,$.j)("esri.views.3d.layers.support.SceneLayerViewRequiredFields")],q)},67966:(fe,de,_)=>{_.d(de,{v:()=>Z});var v=_(36630);function Z(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:C,layer:{fieldsIndex:H},requiredFields:oe}=this;return(0,v.Q0)(H,C.outFields?[...(0,v.Lk)(H,C.outFields),...oe]:oe)}}}}},9218:(fe,de,_)=>{_.d(de,{X:()=>C});var v=_(75897),Z=_(70211);function C(H,oe,G){switch(H.type){case"edge":return new v.L({coordinateHelper:oe,edgeStart:oe.pointToVector(H.start),edgeEnd:oe.pointToVector(H.end),targetPoint:oe.pointToVector(H.target),objectId:H.objectId,elevationInfo:G});case"vertex":return new Z.x({coordinateHelper:oe,targetPoint:oe.pointToVector(H.target),objectId:H.objectId,elevationInfo:G})}}},78465:(fe,de,_)=>{_.d(de,{Z:()=>ie});var v=_(15861),Z=_(17626),C=_(63290),H=_(62208),oe=_(32917),G=_(77712),B=(_(85931),_(8314),_(90912),_(44648),_(36082),_(383),_(23025),_(55915)),X=_(45611);const te=C.Z.getLogger("esri.views.layers.SceneLayerView");class ie extends X.Z{constructor(){super(...arguments),this.layer=null,this.filter=null,this._geometryEngine=null,this._projectionEngineLoaded=!1}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(S){throw new Error("Not implemented")}get maximumNumberOfFeaturesExceeded(){return!1}get layerFilter(){const S=this.layer.filter;if((0,H.Wi)(S)||S.geometries.length<1)return null;const q=this._geometryEngine;if((0,H.Wi)(q)||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return null;try{let h=q.simplify(S.geometries.getItemAt(0));const D=h.spatialReference;for(let M=1;M<S.geometries.length;M++){let T=q.simplify(S.geometries.getItemAt(M));T.spatialReference.equals(D)||(T=(0,B.iV)(T,D)),h=q.union(h,T)}return{spatialRelationship:S.spatialRelationship,geometry:h}}catch{return te.warnOncePerTick("Failed to merge scene filter geometries. Layer mask will be ignored."),null}}get _filterNeedsProjectionEngine(){const S=this.layer.filter;if((0,H.Wi)(S)||S.geometries.length<=1)return!1;const q=S.geometries.getItemAt(0).spatialReference;return S.geometries.some(({spatialReference:h})=>!h.equals(q)&&!(0,B.Up)(h,q))}get layerFilterUpdating(){return(0,H.pC)(this.layer.filter)&&this.layer.filter.geometries.length&&(!this._geometryEngine||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)}initialize(){var S=this;(0,oe.N1)(()=>!this._geometryEngine&&(0,H.pC)(this.layer.filter)&&this.layer.filter.geometries.length).then((0,v.Z)(function*(){return S._geometryEngine=yield Promise.all([_.e(4918),_.e(4766)]).then(_.bind(_,44766))})),this._projectionEngineLoaded=(0,B.kR)(),(0,oe.N1)(()=>!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine).then((0,v.Z)(function*(){yield(0,B.zD)(),S._projectionEngineLoaded=!0}))}highlight(S){throw new Error("Not implemented")}queryFeatures(S,q){throw new Error("Not implemented")}queryObjectIds(S,q){throw new Error("Not implemented")}queryFeatureCount(S,q){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(S,q){throw new Error("Not implemented")}}(0,Z._)([(0,G.Cb)()],ie.prototype,"layer",void 0),(0,Z._)([(0,G.Cb)()],ie.prototype,"availableFields",null),(0,Z._)([(0,G.Cb)()],ie.prototype,"maximumNumberOfFeatures",null),(0,Z._)([(0,G.Cb)({readOnly:!0})],ie.prototype,"maximumNumberOfFeaturesExceeded",null),(0,Z._)([(0,G.Cb)()],ie.prototype,"filter",void 0),(0,Z._)([(0,G.Cb)({readOnly:!0})],ie.prototype,"layerFilter",null),(0,Z._)([(0,G.Cb)()],ie.prototype,"_geometryEngine",void 0),(0,Z._)([(0,G.Cb)()],ie.prototype,"_projectionEngineLoaded",void 0),(0,Z._)([(0,G.Cb)()],ie.prototype,"_filterNeedsProjectionEngine",null),(0,Z._)([(0,G.Cb)()],ie.prototype,"layerFilterUpdating",null)},73187:(fe,de,_)=>{_.d(de,{q:()=>ie});var v=_(17626),Z=_(91558),C=_(88879),H=_(14517),oe=_(21286),G=_(62208),$=_(77712),K=(_(85931),_(8314),_(90912),_(76898)),N=_(69852),k=_(88493),B=_(35540),X=_(21716);const te=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let ie=class extends H.Z{constructor(se){super(se),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=te.map(se=>new k.Z({color:[se[0],se[1],se[2],.6],outline:{color:"black",width:1}})),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(se){this._enabled!==se&&(this._enabled=se,this.update())}update(){if(!this._enabled)return void this.clear();const S=this.getTiles(),q=new Array,h=new Set(this._labels.keys());S.forEach((M,T)=>{const W=M.lij.toString();h.delete(W);const ne=M.lij[0],A=M.geometry;if(this.enablePolygons&&!this._polygons.has(W)){const F=new C.Z({geometry:A,symbol:this._symbols[ne%this._symbols.length]});this._polygons.set(W,F),q.push(F)}if(this.enableLabels){const F=(M=>{if((0,G.pC)(M.label))return M.label;let T=M.lij.toString();return(0,G.pC)(M.loadPriority)&&(T+=` (${M.loadPriority})`),T})(M),w=T/(S.length-1),U=(0,oe.t7)(0,200,w),ee=(0,oe.t7)(20,6,w)/.75,ue=(0,G.pC)(M.loadPriority)&&M.loadPriority>=S.length,ae=new Z.Z([U,ue?0:U,ue?0:U]),he="3d"===this.view.type?()=>new N.Z({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new X.Z({text:F,halo:{color:"white",size:1/.75},material:{color:ae},size:ee})]}):()=>new B.Z({text:F,haloColor:"white",haloSize:1/.75,color:ae,size:ee});if(this._labels.has(W)){const z=this._labels.get(W),Y=he();((0,G.Wi)(z.symbol)||JSON.stringify(Y)!==JSON.stringify(z.symbol))&&(z.symbol=Y)}else{const z=new C.Z({geometry:A.extent.center,symbol:he()});this._labels.set(W,z),q.push(z)}}});const D=new Array;h.forEach(M=>{this._polygons.has(M)&&(D.push(this._polygons.get(M)),this._polygons.delete(M)),this._labels.has(M)&&(D.push(this._labels.get(M)),this._labels.delete(M))}),this.view.graphics.removeMany(D),this.view.graphics.addMany(q)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};(0,v._)([(0,$.Cb)({constructOnly:!0})],ie.prototype,"view",void 0),(0,v._)([(0,$.Cb)({readOnly:!0})],ie.prototype,"updating",void 0),(0,v._)([(0,$.Cb)()],ie.prototype,"enabled",null),ie=(0,v._)([(0,K.j)("esri.views.support.TileTreeDebugger")],ie)},94672:(fe,de,_)=>{_.d(de,{K:()=>oe}),_(29132);var Z=_(62208),C=_(16730),H=_(2004);function oe(Q,L,re,K=new H.Z){let N;if("2d"===re.type)N=L*re.resolution;else if("3d"===re.type){const se=re.overlayPixelSizeInMapUnits(Q),S=re.basemapSpatialReference;N=(0,Z.pC)(S)&&!S.equals(re.spatialReference)?(0,C.c9)(S)/(0,C.c9)(re.spatialReference):L*se}const k=Q.x-N,B=Q.y-N,X=Q.x+N,te=Q.y+N,{spatialReference:ie}=re;return K.xmin=Math.min(k,X),K.ymin=Math.min(B,te),K.xmax=Math.max(k,X),K.ymax=Math.max(B,te),K.spatialReference=ie,K}new H.Z}}]);