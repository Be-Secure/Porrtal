"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[2359],{62359:(g,c,e)=>{e.r(c),e.d(c,{default:()=>r});var o=e(15861),n=e(17626),h=e(62208),u=e(32917),_=e(77712),a=(e(85931),e(8314),e(90912),e(76898)),E=e(19702),v=e(32400),O=e(89765),P=e(42743),i=e(45611);let t=class extends((0,E.A)(i.Z)){constructor(){super(...arguments),this.type="graphics-3d",this.slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set("processor",new v.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.setup()),this.handles.add(this.layer.on("graphic-update",s=>this.processor.graphicsCore.graphicUpdateHandler(s))),this.addResolvingPromise((0,O.E)(this).then(s=>this.fullExtentInLocalViewSpatialReference=s)),this.layer.internal?this.notifyChange("updating"):this.handles.add((0,u.gx)(()=>this.view?.basemapTerrain?.ready,()=>()=>this.notifyChange("updating"),{once:!0}))}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("processor",(0,h.SC)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}getSuspendInfo(){const s=super.getSuspendInfo();return s.outsideScaleRange=this.processor?.scaleVisibilitySuspended??!1,s.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,s}fetchPopupFeatures(s,l){return(0,o.Z)(function*(){return(0,h.pC)(l)?l.clientGraphics:null})()}getHit(s){return this.processor.getHit(s)}whenGraphicBounds(s,l){return this.processor.whenGraphicBounds(s,l)}computeAttachmentOrigin(s,l){return this.processor?.computeAttachmentOrigin(s,l)}getSymbolLayerSize(s,l){return this.processor.getSymbolLayerSize(s,l)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(s){return this.processor.maskOccludee(s)}highlight(s){return this.processor.highlight(s)}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||P.jq.SYNC}canResume(){return super.canResume()&&!this.processor?.scaleVisibilitySuspended}isUpdating(){return!(!this.processor?.updating&&(this.layer.internal||this.view?.basemapTerrain?.ready))}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.processor?.elevationAlignment.updating??!1,visibilityFrustum:!this.processor?.frustumVisibilitySuspended}}};(0,n._)([(0,_.Cb)()],t.prototype,"loadedGraphics",null),(0,n._)([(0,_.Cb)({readOnly:!0})],t.prototype,"legendEnabled",null),(0,n._)([(0,_.Cb)()],t.prototype,"layer",void 0),(0,n._)([(0,_.Cb)({readOnly:!0})],t.prototype,"processor",void 0),(0,n._)([(0,_.Cb)({type:Boolean})],t.prototype,"slicePlaneEnabled",void 0),t=(0,n._)([(0,a.j)("esri.views.3d.layers.GraphicsLayerView3D")],t);const r=t},19702:(g,c,e)=>{e.d(c,{A:()=>O});var o=e(15861),n=e(17626),h=e(54024),u=e(10699),_=e(32917),p=e(77712),E=(e(85931),e(8314),e(90912),e(76898)),v=e(36947);const O=P=>{let i=class extends P{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(t){super.postscript(t),(0,v.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var t=this;return(0,o.Z)(function*(){const r=new AbortController,s=r.signal;t.handles.add((0,h.kB)(()=>r.abort())),yield(0,_.N1)(()=>t.view.defaultsFromMap?.heightModelInfoReady,s),(0,u.k_)(s);const l=(0,v.Wt)(t.layer,t.view.heightModelInfo,t.supportsHeightUnitConversion);if(l)throw l})()}canResume(){const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!t||!t.minScale||!t.maxScale||t.minScale>=t.maxScale)}getSuspendInfo(){const t=super.getSuspendInfo(),r=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return r&&r.minScale&&r.maxScale&&r.minScale<r.maxScale&&(t.outsideScaleRange=!0),t}};return(0,n._)([(0,p.Cb)()],i.prototype,"view",void 0),(0,n._)([(0,p.Cb)()],i.prototype,"slicePlaneEnabled",void 0),i=(0,n._)([(0,E.j)("esri.views.3d.layers.LayerView3D")],i),i}},89765:(g,c,e)=>{e.d(c,{E:()=>u});var o=e(62208),n=e(46367),h=e(35082);function u(_){const p=_.view.spatialReference,d=_.layer.fullExtent,y=(0,o.pC)(d)&&d.spatialReference;if((0,o.Wi)(d)||!y)return Promise.resolve(null);if(y.equals(p))return Promise.resolve(d.clone());const a=(0,n.iV)(d,p);return(0,o.pC)(a)?Promise.resolve(a):_.view.state.isLocal?(0,h.projectGeometry)(d,p,_.layer.portalItem).then(E=>!_.destroyed&&E?E:void 0).catch(()=>null):Promise.resolve(null)}},45611:(g,c,e)=>{e.d(c,{Z:()=>t});var o=e(17626),n=e(14517),h=e(61885),u=e(80542),_=e(61996),p=e(63290),d=e(62208),y=e(60330),a=e(77712),P=(e(85931),e(8314),e(90912),e(76898));let i=class extends((0,u.p)((0,_.IG)((0,y.v)(h.Z.EventedMixin(n.Z))))){constructor(r){super(r),this.layer=null,this.parent=null}initialize(){this.when().catch(r=>{if("layerview:create-error"!==r.name){const s=this.layer&&this.layer.id||"no id",l=this.layer&&this.layer.title||"no title";p.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${l}', id: '${s}')`,r)}})}get fullOpacity(){return(0,d.Pt)(this.get("layer.opacity"),1)*(0,d.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(r){void 0!==r?this._override("visible",r):this._clearOverride("visible")}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const r=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(r.viewNotReady=!0),this.layer&&this.layer.loaded||(r.layerNotLoaded=!0),this.visible||(r.layerInvisible=!0),r}isUpdating(){return!1}};(0,o._)([(0,a.Cb)()],i.prototype,"fullOpacity",null),(0,o._)([(0,a.Cb)()],i.prototype,"layer",void 0),(0,o._)([(0,a.Cb)()],i.prototype,"parent",void 0),(0,o._)([(0,a.Cb)({readOnly:!0})],i.prototype,"suspended",null),(0,o._)([(0,a.Cb)({readOnly:!0})],i.prototype,"suspendInfo",null),(0,o._)([(0,a.Cb)({readOnly:!0})],i.prototype,"legendEnabled",null),(0,o._)([(0,a.Cb)({type:Boolean,readOnly:!0})],i.prototype,"updating",null),(0,o._)([(0,a.Cb)({readOnly:!0})],i.prototype,"updatingProgress",null),(0,o._)([(0,a.Cb)()],i.prototype,"visible",null),(0,o._)([(0,a.Cb)()],i.prototype,"view",void 0),i=(0,o._)([(0,P.j)("esri.views.layers.LayerView")],i);const t=i}}]);