/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[7728],{36592:(X,C,u)=>{u.d(C,{Q:()=>j});var R=u(85931),P=u(62208),v=u(77029),B=u(14259);class j{constructor(e=9,t){this.compareMinX=O,this.compareMinY=c,this._toBBox=s=>s,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),L.prune(),W.prune(),T.prune(),Y.prune()}all(e){this._all(this.data,e)}search(e,t){let s=this.data;const o=this._toBBox;if(S(e,s))for(L.clear();s;){for(let r=0,a=s.children.length;r<a;r++){const d=s.children[r],h=s.leaf?o(d):d;S(e,h)&&(s.leaf?t(d):D(e,h)?this._all(d,t):L.push(d))}s=L.pop()}}collides(e){let t=this.data;const s=this._toBBox;if(!S(e,t))return!1;for(L.clear();t;){for(let o=0,r=t.children.length;o<r;o++){const a=t.children[o],d=t.leaf?s(a):a;if(S(e,d)){if(t.leaf||D(e,d))return!0;L.push(a)}}t=L.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let s=0,o=e.length;s<o;s++)this.insert(e[s]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const s=this.data;this.data=t,t=s}this._insert(t,this.data.height-t.height-1,!0)}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=new _([]),this}remove(e){if(!e)return this;let t,s=this.data,o=null,r=0,a=!1;const d=this._toBBox(e);for(T.clear(),Y.clear();s||T.length>0;){if(s||(s=(0,P.j0)(T.pop()),o=T.data[T.length-1],r=Y.pop()??0,a=!0),s.leaf&&(t=(0,R.cq)(s.children,e,s.children.length,s.indexHint),-1!==t))return s.children.splice(t,1),T.push(s),this._condense(T),this;a||s.leaf||!D(s,d)?o?(r++,s=o.children[r],a=!1):s=null:(T.push(s),Y.push(r),r=0,o=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let s=e;for(W.clear();s;){if(!0===s.leaf)for(const o of s.children)t(o);else W.pushArray(s.children);s=W.pop()??null}}_build(e,t,s,o){const r=s-t+1;let a=this._maxEntries;if(r<=a){const m=new _(e.slice(t,s+1));return E(m,this._toBBox),m}o||(o=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/a**(o-1)));const d=new y([]);d.height=o;const h=Math.ceil(r/a),M=h*Math.ceil(Math.sqrt(a));K(e,t,s,M,this.compareMinX);for(let m=t;m<=s;m+=M){const g=Math.min(m+M-1,s);K(e,m,g,h,this.compareMinY);for(let A=m;A<=g;A+=h){const w=Math.min(A+h-1,g);d.children.push(this._build(e,A,w,o-1))}}return E(d,this._toBBox),d}_chooseSubtree(e,t,s,o){for(;o.push(t),!0!==t.leaf&&o.length-1!==s;){let r,a=1/0,d=1/0;for(let h=0,M=t.children.length;h<M;h++){const m=t.children[h],g=p(m),A=f(e,m)-g;A<d?(d=A,a=g<a?g:a,r=m):A===d&&g<a&&(a=g,r=m)}t=r||t.children[0]}return t}_insert(e,t,s){const r=s?e:(0,this._toBBox)(e);T.clear();const a=this._chooseSubtree(r,this.data,t,T);for(a.children.push(e),F(a,r);t>=0&&T.data[t].children.length>this._maxEntries;)this._split(T,t),t--;this._adjustParentBBoxes(r,T,t)}_split(e,t){const s=e.data[t],o=s.children.length,r=this._minEntries;this._chooseSplitAxis(s,r,o);const a=this._chooseSplitIndex(s,r,o);if(!a)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const d=s.children.splice(a,s.children.length-a),h=s.leaf?new _(d):new y(d);h.height=s.height,E(s,this._toBBox),E(h,this._toBBox),t?e.data[t-1].children.push(h):this._splitRoot(s,h)}_splitRoot(e,t){this.data=new y([e,t]),this.data.height=e.height+1,E(this.data,this._toBBox)}_chooseSplitIndex(e,t,s){let o,r,a;o=r=1/0;for(let d=t;d<=s-t;d++){const h=x(e,0,d,this._toBBox),M=x(e,d,s,this._toBBox),m=b(h,M),g=p(h)+p(M);m<o?(o=m,a=d,r=g<r?g:r):m===o&&g<r&&(r=g,a=d)}return a}_chooseSplitAxis(e,t,s){const o=e.leaf?this.compareMinX:O,r=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,s,o)<this._allDistMargin(e,t,s,r)&&e.children.sort(o)}_allDistMargin(e,t,s,o){e.children.sort(o);const r=this._toBBox,a=x(e,0,t,r),d=x(e,s-t,s,r);let h=i(a)+i(d);for(let M=t;M<s-t;M++){const m=e.children[M];F(a,e.leaf?r(m):m),h+=i(a)}for(let M=s-t-1;M>=t;M--){const m=e.children[M];F(d,e.leaf?r(m):m),h+=i(d)}return h}_adjustParentBBoxes(e,t,s){for(let o=s;o>=0;o--)F(t.data[o],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const s=e.data[t];if(0===s.children.length)if(t>0){const o=e.data[t-1],r=o.children;r.splice((0,R.cq)(r,s,r.length,o.indexHint),1)}else this.clear();else E(s,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function E(n,e){x(n,0,n.children.length,e,n)}function x(n,e,t,s,o){o||(o=new _([])),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let r,a=e;a<t;a++)r=n.children[a],F(o,n.leaf?s(r):r);return o}function F(n,e){n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY)}function O(n,e){return n.minX-e.minX}function c(n,e){return n.minY-e.minY}function p(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function i(n){return n.maxX-n.minX+(n.maxY-n.minY)}function f(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function b(n,e){const t=Math.max(n.minX,e.minX),s=Math.max(n.minY,e.minY),o=Math.min(n.maxX,e.maxX),r=Math.min(n.maxY,e.maxY);return Math.max(0,o-t)*Math.max(0,r-s)}function D(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function S(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function K(n,e,t,s,o){const r=[e,t];for(;r.length;){const a=(0,P.j0)(r.pop()),d=(0,P.j0)(r.pop());if(a-d<=s)continue;const h=d+Math.ceil((a-d)/s/2)*s;(0,B.q)(n,h,d,a,o),r.push(d,h,h,a)}}const L=new v.Z,W=new v.Z,T=new v.Z,Y=new v.Z({deallocator:void 0});class U{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class l extends U{constructor(){super(...arguments),this.height=1,this.indexHint=new R.SO}}class _ extends l{constructor(e){super(),this.children=e,this.leaf=!0}}class y extends l{constructor(e){super(),this.children=e,this.leaf=!1}}},61256:(X,C,u)=>{u.d(C,{H:()=>F});var R=u(8314),P=u(36592),v=u(65401);const j={minX:0,minY:0,maxX:0,maxY:0};class F{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new P.Q(9,(0,R.Z)("esri-csp-restrictions")?c=>({minX:c[0],minY:c[1],maxX:c[2],maxY:c[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const c=new Array(this._idByBounds.size);let p=0;this._idByBounds.forEach((i,f)=>{c[p++]=f}),this._indexInvalid=!1,this._index.clear(),this._index.load(c)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(c=>this._idByBounds.has(c))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const c=(0,v.cS)();for(const p of this._boundsById.values())p&&(c[0]=Math.min(p[0],c[0]),c[1]=Math.min(p[1],c[1]),c[2]=Math.max(p[2],c[2]),c[3]=Math.max(p[3],c[3]));return c}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(c){const p=this._boundsById.get(c);this._boundsById.delete(c),p&&(this._idByBounds.delete(p),this._indexInvalid||this._index.remove(p))}forEachInBounds(c,p){this._loadIndex(),function x(O,c,p){(function E(O){j.minX=O[0],j.minY=O[1],j.maxX=O[2],j.maxY=O[3]})(c),O.search(j,p)}(this._index,c,i=>p(this._idByBounds.get(i)))}get(c){return this._boundsById.get(c)}has(c){return this._boundsById.has(c)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(c,p){if(!this._indexInvalid){const i=this._boundsById.get(c);i&&(this._index.remove(i),this._idByBounds.delete(i))}this._boundsById.set(c,p),p&&(this._idByBounds.set(p,c),this._indexInvalid||(this._boundsToLoad.push(p),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},3579:(X,C,u)=>{u.d(C,{Z:()=>c});var R=u(26584),P=u(61885),v=u(63290),B=u(62208),j=u(5548),E=u(65401),x=u(82054),F=u(61256),O=u(92794);class c{constructor(i){this.geometryInfo=i,this._boundsStore=new F.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new P.Z,this.featureAdapter=O.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let i=0;return this._featuresById.forEach(f=>{(0,B.pC)(f.geometry)&&f.geometry.coords&&(i+=f.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:i/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(i){this._add(i),this._emitChanged()}addMany(i){for(const f of i)this._add(f);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(i){const f=this._featuresById.get(i);return f?(this._remove(f),this._emitChanged(),f):null}removeManyById(i){this._boundsStore.invalidateIndex();for(const f of i){const b=this._featuresById.get(f);b&&this._remove(b)}this._emitChanged()}forEachBounds(i,f,b){for(const D of i){const S=this._boundsStore.get(D.objectId);S&&f((0,j.JR)(b,S))}}getFeature(i){return this._featuresById.get(i)}has(i){return this._featuresById.has(i)}toArray(){return Array.from(this._featuresById.values())}forEach(i){this._featuresById.forEach(f=>i(f))}forEachInBounds(i,f){this._boundsStore.forEachInBounds(i,b=>{f(this._featuresById.get(b))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let i=!1;this._featuresById.forEach((f,b)=>{this._markedIds.has(b)||(i=!0,this._remove(f))}),this._markedIds.clear(),i&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(i){if(!i)return;const f=i.objectId;if(null==f)return void v.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new R.Z("featurestore:invalid-feature","feature id is missing",{feature:i}));const b=this._featuresById.get(f);let D;if(this._markedIds.add(f),b?(i.displayId=b.displayId,D=this._boundsStore.get(f),this._boundsStore.delete(f)):(0,B.pC)(this.onFeatureAdd)&&this.onFeatureAdd(i),(0,B.Wi)(i.geometry)||!i.geometry.coords||!i.geometry.coords.length)return this._boundsStore.set(f,null),void this._featuresById.set(f,i);D=(0,x.$)((0,B.pC)(D)?D:(0,E.Ue)(),i.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,B.pC)(D)&&this._boundsStore.set(f,D),this._featuresById.set(f,i)}_remove(i){return(0,B.pC)(this.onFeatureRemove)&&this.onFeatureRemove(i),this._markedIds.delete(i.objectId),this._boundsStore.delete(i.objectId),this._featuresById.delete(i.objectId),i}}},92794:(X,C,u)=>{u.d(C,{n:()=>j});var R=u(62208),P=u(77044),v=u(66385),B=u(88071);const j={getObjectId:E=>E.objectId,getAttributes:E=>E.attributes,getAttribute:(E,x)=>E.attributes[x],cloneWithGeometry:(E,x)=>new v.u_(x,E.attributes,null,E.objectId),getGeometry:E=>E.geometry,getCentroid:(E,x)=>((0,R.Wi)(E.centroid)&&(E.centroid=(0,P.Y)(new B.Z,E.geometry,x.hasZ,x.hasM)),E.centroid)}},7728:(X,C,u)=>{u.r(C),u.d(C,{default:()=>Y});var R=u(15861),P=u(26584),v=u(62208),B=u(91179),j=u(37053),E=u(82054),x=u(1476),F=u(3579),O=u(82959),c=u(58175),p=u(56554),i=u(35775),f=u(60466),b=u(85),D=u(36630);const S=j.Zn,K={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:j.Zn},L={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function T(U){return(0,B.wp)(U)?null!=U.m:!!U.hasM}class Y{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}load(l){var _=this;return(0,R.Z)(function*(){const y=[],{features:n}=l,e=_._inferLayerProperties(n,l.fields),t=l.fields||[],s=null!=l.hasM?l.hasM:e.hasM,o=null!=l.hasZ?l.hasZ:e.hasZ,r=!l.spatialReference&&!e.spatialReference,a=r?S:l.spatialReference||e.spatialReference,d=r?K:null,h=l.geometryType||e.geometryType;let m=l.objectIdField||e.objectIdField,g=l.timeInfo;if(h&&(r&&y.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!h))throw new P.Z("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!m)throw new P.Z("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(e.objectIdField&&m!==e.objectIdField&&(y.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${m}" doesn't match the field name "${e.objectIdField}", found in the provided fields`}),m=e.objectIdField),m&&!e.objectIdField){let I=null;t.some(Z=>Z.name===m&&(I=Z,!0))?(I.type="esriFieldTypeOID",I.editable=!1,I.nullable=!1):t.unshift({alias:m,name:m,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const I of t){if(null==I.name&&(I.name=I.alias),null==I.alias&&(I.alias=I.name),!I.name)throw new P.Z("feature-layer:invalid-field-name","field name is missing",{field:I});if(I.name===m&&(I.type="esriFieldTypeOID"),!b.v.jsonValues.includes(I.type))throw new P.Z("feature-layer:invalid-field-type",`invalid type for field "${I.name}"`,{field:I})}const A={};for(const I of t)if("esriFieldTypeOID"!==I.type&&"esriFieldTypeGlobalID"!==I.type){const Z=(0,D.os)(I);void 0!==Z&&(A[I.name]=Z)}if(_._fieldsIndex=new f.Z(t),_._createDefaultAttributes=(0,p.Dm)(A,m),g){if(g.startTimeField){const I=_._fieldsIndex.get(g.startTimeField);I?(g.startTimeField=I.name,I.type="esriFieldTypeDate"):g.startTimeField=null}if(g.endTimeField){const I=_._fieldsIndex.get(g.endTimeField);I?(g.endTimeField=I.name,I.type="esriFieldTypeDate"):g.endTimeField=null}if(g.trackIdField){const I=_._fieldsIndex.get(g.trackIdField);I?g.trackIdField=I.name:(g.trackIdField=null,y.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:g}}))}g.startTimeField||g.endTimeField||(y.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:g}}),g=null)}const w={warnings:y,featureErrors:[],layerDefinition:{...L,drawingInfo:(0,p.bU)(h),templates:(0,p.Hq)(A),extent:d,geometryType:h,objectIdField:m,fields:t,hasZ:!!o,hasM:!!s,timeInfo:g},assignedObjectIds:{}};if(_._queryEngine=new c.q({fields:t,geometryType:h,hasM:s,hasZ:o,objectIdField:m,spatialReference:a,featureStore:new F.Z({geometryType:h,hasM:s,hasZ:o}),timeInfo:g,cacheSpatialQueries:!0}),!n||!n.length)return _._nextObjectId=x.X,w;const Q=(0,x.S)(m,n);return _._nextObjectId=Q+1,yield(0,O._W)(n,a),_._loadInitialFeatures(w,n)})()}applyEdits(l){var _=this;return(0,R.Z)(function*(){const{spatialReference:y,geometryType:n}=_._queryEngine;return yield Promise.all([(0,i.b)(y,n),(0,O._W)(l.adds,y),(0,O._W)(l.updates,y)]),_._applyEdits(l)})()}queryFeatures(l,_={}){return this._queryEngine.executeQuery(l,_.signal)}queryFeatureCount(l,_={}){return this._queryEngine.executeQueryForCount(l,_.signal)}queryObjectIds(l,_={}){return this._queryEngine.executeQueryForIds(l,_.signal)}queryExtent(l,_={}){return this._queryEngine.executeQueryForExtent(l,_.signal)}querySnapping(l,_={}){return this._queryEngine.executeQueryForSnapping(l,_.signal)}_inferLayerProperties(l,_){let y,n,e=null,t=null,s=null;for(const o of l){const r=o.geometry;if(!(0,v.Wi)(r)&&(e||(e=(0,B.Ji)(r)),t||(t=r.spatialReference),null==y&&(y=(0,B.wp)(U=r)?null!=U.z:!!U.hasZ),null==n&&(n=T(r)),e&&t&&null!=y&&null!=n))break}var U;if(_&&_.length){let o=null;_.some(r=>{const a="esriFieldTypeOID"===r.type,d=!r.type&&r.name&&"objectid"===r.name.toLowerCase();return o=r,a||d})&&(s=o.name)}return{geometryType:e,spatialReference:t,objectIdField:s,hasM:n,hasZ:y}}_loadInitialFeatures(l,_){const{geometryType:y,hasM:n,hasZ:e,objectIdField:t,spatialReference:s,featureStore:o}=this._queryEngine,r=[];for(const a of _){if(null!=a.uid&&(l.assignedObjectIds[a.uid]=-1),a.geometry&&y!==(0,B.Ji)(a.geometry)){l.featureErrors.push((0,i.av)("Incorrect geometry type."));continue}const d=this._createDefaultAttributes(),h=(0,i.O0)(this._fieldsIndex,d,a.attributes,!0,l.warnings);h?l.featureErrors.push(h):(this._assignObjectId(d,a.attributes,!0),a.attributes=d,null!=a.uid&&(l.assignedObjectIds[a.uid]=a.attributes[t]),(0,v.pC)(a.geometry)&&(a.geometry=(0,O.iV)(a.geometry,a.geometry.spatialReference,s)),r.push(a))}if(o.addMany((0,E.Yn)([],r,y,e,n,t)),l.layerDefinition.extent=this._queryEngine.fullExtent,l.layerDefinition.timeInfo){const{start:a,end:d}=this._queryEngine.timeExtent;l.layerDefinition.timeInfo.timeExtent=[a,d]}return l}_applyEdits(l){const{adds:_,updates:y,deletes:n}=l,e={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(_&&_.length&&this._applyAddEdits(e,_),y&&y.length&&this._applyUpdateEdits(e,y),n&&n.length){for(const t of n)e.deleteResults.push((0,i.d1)(t));this._queryEngine.featureStore.removeManyById(n)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:e}}_applyAddEdits(l,_){const{addResults:y}=l,{geometryType:n,hasM:e,hasZ:t,objectIdField:s,spatialReference:o,featureStore:r}=this._queryEngine,a=[];for(const d of _){if(d.geometry&&n!==(0,B.Ji)(d.geometry)){y.push((0,i.av)("Incorrect geometry type."));continue}const h=this._createDefaultAttributes(),M=(0,i.O0)(this._fieldsIndex,h,d.attributes);M?y.push(M):(this._assignObjectId(h,d.attributes),d.attributes=h,null!=d.uid&&(l.uidToObjectId[d.uid]=d.attributes[s]),(0,v.pC)(d.geometry)&&(d.geometry=(0,O.iV)((0,i.og)(d.geometry,o),d.geometry.spatialReference,o)),a.push(d),y.push((0,i.d1)(d.attributes[s])))}r.addMany((0,E.Yn)([],a,n,t,e,s))}_applyUpdateEdits({updateResults:l},_){const{geometryType:y,hasM:n,hasZ:e,objectIdField:t,spatialReference:s,featureStore:o}=this._queryEngine;for(const r of _){const{attributes:a,geometry:d}=r,h=a&&a[t];if(null==h){l.push((0,i.av)(`Identifier field ${t} missing`));continue}if(!o.has(h)){l.push((0,i.av)(`Feature with object id ${h} missing`));continue}const M=(0,E.EI)(o.getFeature(h),y,e,n);if((0,v.pC)(d)){if(y!==(0,B.Ji)(d)){l.push((0,i.av)("Incorrect geometry type."));continue}M.geometry=(0,O.iV)((0,i.og)(d,s),d.spatialReference,s)}if(a){const m=(0,i.O0)(this._fieldsIndex,M.attributes,a);if(m){l.push(m);continue}}o.add((0,E.XA)(M,y,e,n,t)),l.push((0,i.d1)(h))}}_assignObjectId(l,_,y=!1){const n=this._queryEngine.objectIdField;l[n]=y&&_&&isFinite(_[n])?_[n]:this._nextObjectId++}}},56554:(X,C,u)=>{u.d(C,{Dm:()=>F,Hq:()=>O,MS:()=>c,bU:()=>j});var R=u(8314),P=u(58817),v=u(87757),B=u(24837);function j(p){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===p||"esriGeometryMultipoint"===p?B.I4:"esriGeometryPolyline"===p?B.ET:B.lF}}}const E=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let x=1;function F(p,i){if((0,R.Z)("esri-csp-restrictions"))return()=>({[i]:null,...p});try{let f=`this.${i} = null;`;for(const D in p)f+=`this${E.test(D)?`.${D}`:`["${D}"]`} = ${JSON.stringify(p[D])};`;const b=new Function(`\n      return class AttributesClass$${x++} {\n        constructor() {\n          ${f};\n        }\n      }\n    `)();return()=>new b}catch{return()=>({[i]:null,...p})}}function O(p={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,P.d9)(p)}}]}function c(p,i){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:p},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:i,supportsDelete:i,supportsEditing:i,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:i,supportsExceedsLimitStatistics:!0},query:v.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:i,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}}}]);