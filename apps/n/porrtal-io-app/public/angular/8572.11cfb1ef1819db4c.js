/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[8572],{40405:($,U,p)=>{p.d(U,{B:()=>B});var d=p(15861),y=p(22558),j=p(21726),T=p(35948),A=p(34117),Z=p(31283),S=p(77712);function f(r){return R[function I(r){return r instanceof Blob?r.type:function C(r){const a=(0,j.Ml)(r);return W[a]||H}(r.url)}(r)]||M}const R={},H="text/plain",M=R[H],W={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const r in W)R[W[r]]=r;var P=p(29840);function B(r){const a=r?.origins??[void 0];return(u,m)=>{const g=function N(r,a,u){if("resource"===r?.type)return function O(r,a,u){const m=(0,A.VZ)(a,u);return{type:String,read:(g,b,x)=>{const c=(0,P.r)(g,b,x);return m.type===String?c:"function"==typeof m.type?new m.type({url:c}):void 0},write:{writer(g,b,x,c){if(!c||!c.resources)return"string"==typeof g?void(b[x]=(0,P.t)(g,c)):void(b[x]=g.write({},c));const J=function i(r){return null==r?null:"string"==typeof r?r:r.url}(g),E=(0,P.t)(J,{...c,verifyItemRelativeUrls:c&&c.verifyItemRelativeUrls?{writtenUrls:c.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},P.M.NO),w=m.type!==String&&(!(0,y.l)(this)||c&&c.origin&&this.originIdOf(u)>(0,Z.M9)(c.origin)),L={object:this,propertyName:u,value:g,targetUrl:E,dest:b,targetPropertyName:x,context:c,params:r};c&&c.portalItem&&E&&!(0,j.YP)(E)?w?function D(r){const{context:a,targetUrl:u,params:m,value:g,dest:b,targetPropertyName:x}=r;if(!a.portalItem)return;const c=a.portalItem.resourceFromPath(u),J=s(g,u,a),E=f(J),w=(0,j.Ml)(c.path),L=m?.compress??!1;E===w?(a.resources&&o({...r,resource:c,content:J,compress:L,updates:a.resources.toUpdate}),b[x]=u):z(r)}(L):function F({context:r,targetUrl:a,dest:u,targetPropertyName:m}){r.portalItem&&r.resources&&(r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(a),compress:!1}),u[m]=a)}(L):c&&c.portalItem&&(null==E||null!=(0,P.i)(E)||(0,j.jc)(E)||w)?z(L):b[x]=E}}}}(r,a,u);switch(r?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:m,write:g}=P.a;return{read:m,write:g}}}}(r,u,m);for(const b of a){const x=(0,S.CJ)(u,b,m);for(const c in g)x[c]=g[c]}}}function z(r){const{targetUrl:a,params:u,value:m,context:g,dest:b,targetPropertyName:x}=r;if(!g.portalItem)return;const c=(0,P.p)(a),J=c?.filename??(0,T.D)(),E=u?.prefix??c?.prefix,w=s(m,a,g),L=(0,j.v_)(E,J),G=`${L}.${f(w)}`,K=g.portalItem.resourceFromPath(G);(0,j.jc)(a)&&g.resources&&g.resources.pendingOperations.push(function l(r){return v.apply(this,arguments)}(a).then(Y=>{K.path=`${L}.${f(Y)}`,b[x]=K.itemRelativeUrl}).catch(()=>{}));const V=u?.compress??!1;g.resources&&o({...r,resource:K,content:w,compress:V,updates:g.resources.toAdd}),b[x]=K.itemRelativeUrl}function o({object:r,propertyName:a,updates:u,resource:m,content:g,compress:b}){u.push({resource:m,content:g,compress:b,finish:x=>{!function h(r,a,u){"string"==typeof r[a]?r[a]=u.url:r[a].url=u.url}(r,a,x)}})}function s(r,a,u){return"string"==typeof r?{url:a}:new Blob([JSON.stringify(r.toJSON(u))],{type:"application/json"})}function v(){return(v=(0,d.Z)(function*(r){const a=(yield Promise.resolve().then(p.bind(p,84792))).default,{data:u}=yield a(r,{responseType:"blob"});return u})).apply(this,arguments)}},22558:($,U,p)=>{function d(y){return y&&"getAtOrigin"in y&&"originOf"in y}p.d(U,{l:()=>d})},29457:($,U,p)=>{p.r(U),p.d(U,{default:()=>v});var d=p(15861),y=p(17626),j=p(85840),T=p(61642),A=p(57574),Z=p(46160),S=p(89726),f=p(62208),I=p(32917),C=p(77712),M=(p(85931),p(90912),p(76898)),W=p(55915),P=p(5548),B=p(60507);const N=Z.Z.ofType(A.Z);let O=class extends j.Z{constructor(i){super(i),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles((0,I.YP)(()=>this._computeExtent(),i=>{((0,f.Wi)(i)||(0,f.Wi)(i.pending))&&this._set("extent",(0,f.pC)(i)?i.extent:null)},I.tX))}get targets(){return this._get("targets")||new N}set targets(i){this._set("targets",(0,S.Z)(i,this.targets,N))}get spatialReference(){return(0,f.pC)(this.observer)&&(0,f.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,f.yw)(this.observer,i=>i.position)]}waitComputeExtent(){var i=this;return(0,d.Z)(function*(){const h=i._computeExtent();return(0,f.pC)(h)?(0,f.Wg)(h.pending):null})()}_computeExtent(){const i=this.spatialReference;if((0,f.Wi)(this.observer)||(0,f.Wi)(this.observer.position)||(0,f.Wi)(i))return null;const h=m=>"absolute-height"===(0,B.VW)(m.position,m.elevationInfo),r=this.observer.position,a=(0,P.al)(r.x,r.y,r.z,r.x,r.y,r.z);for(const m of this.targets)if((0,f.pC)(m.position)){const g=(0,W.dz)(m.position,i);if((0,f.pC)(g.pending))return{pending:g.pending,extent:null};if((0,f.pC)(g.geometry)){const{x:b,y:x,z:c}=g.geometry;(0,P.pp)(a,[b,x,c])}}const u=(0,P.HH)(a,i);return h(this.observer)&&this.targets.every(h)||(u.zmin=null,u.zmax=null),{pending:null,extent:u}}clear(){this.observer=null,this.targets.removeAll()}};(0,y._)([(0,C.Cb)({type:["line-of-sight"]})],O.prototype,"type",void 0),(0,y._)([(0,C.Cb)({type:T.Z,json:{read:!0,write:!0}})],O.prototype,"observer",void 0),(0,y._)([(0,C.Cb)({cast:S.R,type:N,nonNullable:!0,json:{read:!0,write:!0}})],O.prototype,"targets",null),(0,y._)([(0,C.Cb)({value:null,readOnly:!0})],O.prototype,"extent",void 0),(0,y._)([(0,C.Cb)({readOnly:!0})],O.prototype,"spatialReference",null),(0,y._)([(0,C.Cb)({readOnly:!0})],O.prototype,"requiredPropertiesForEditing",null),O=(0,y._)([(0,M.j)("esri.analysis.LineOfSightAnalysis")],O);const z=O;var D=p(99959),F=p(44917),o=p(49286);const s=Z.Z.ofType(A.Z);let l=class extends((0,o.q)((0,D.R)(F.Z))){constructor(i){super(i),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new z,this.opacity=1}initialize(){this.addHandles((0,I.YP)(()=>this.analysis,(i,h)=>{(0,f.pC)(h)&&h.parent===this&&(h.parent=null),(0,f.pC)(i)&&(i.parent=this)},I.tX))}load(){var i=this;return(0,d.Z)(function*(){return(0,f.pC)(i.analysis)&&i.addResolvingPromise(i.analysis.waitComputeExtent()),i})()}get observer(){return(0,f.yw)(this.analysis,i=>i.observer)}set observer(i){(0,f.yw)(this.analysis,h=>h.observer=i)}get targets(){return(0,f.pC)(this.analysis)?this.analysis.targets:new Z.Z}set targets(i){(0,S.Z)(i,this.analysis?.targets)}get fullExtent(){return(0,f.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,f.pC)(this.analysis)?(0,f.Wg)(this.analysis.spatialReference):null}releaseAnalysis(i){this.analysis===i&&(this.analysis=new z)}};(0,y._)([(0,C.Cb)({json:{read:!1},readOnly:!0})],l.prototype,"type",void 0),(0,y._)([(0,C.Cb)({type:["LineOfSightLayer"]})],l.prototype,"operationalLayerType",void 0),(0,y._)([(0,C.Cb)({type:T.Z,json:{read:!0,write:{ignoreOrigin:!0}}})],l.prototype,"observer",null),(0,y._)([(0,C.Cb)({type:s,json:{read:!0,write:{ignoreOrigin:!0}}})],l.prototype,"targets",null),(0,y._)([(0,C.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],l.prototype,"analysis",void 0),(0,y._)([(0,C.Cb)({readOnly:!0})],l.prototype,"fullExtent",null),(0,y._)([(0,C.Cb)({readOnly:!0})],l.prototype,"spatialReference",null),(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],l.prototype,"opacity",void 0),(0,y._)([(0,C.Cb)({type:["show","hide"]})],l.prototype,"listMode",void 0),l=(0,y._)([(0,M.j)("esri.layers.LineOfSightLayer")],l);const v=l},60507:($,U,p)=>{p.d(U,{BK:()=>F,Jn:()=>S,RL:()=>I,VW:()=>Z,W_:()=>O,jG:()=>z,tq:()=>B,vQ:()=>M,zx:()=>W});var d=p(62208),y=p(29505);function j(o){return o?z:D}function Z(o,s){return function T(o,s){return(0,d.Wi)(s)||!s.mode?j(o).mode:s.mode}(!!(0,d.pC)(o)&&o.hasZ,s)}function S(o,s){return function A(o,s){return(0,d.pC)(s)?s:j(o)}(!!(0,d.pC)(o)&&o.hasZ,s)}function I(o){const s=function R(o){return o.layer&&"elevationInfo"in o.layer?o.layer.elevationInfo:null}(o),l=Z(o.geometry,s);return{mode:l,offset:(0,d.pC)(s)&&"on-the-ground"!==l?(0,d.Pt)(s.offset,0)*(0,y.Z7)((0,d.Pt)(s.unit,"meters")):0}}function M(o,s,l,v=null){return P(o,s.x,s.y,s.hasZ?s.z:0,s.spatialReference,l,v)}function W(o,s,l,v,i=null){return P(o,s[0],s[1],s.length>2?s[2]:0,l,v,i)}function P(o,s,l,v,i,h,r=null){if((0,d.Wi)(h))return;const a=(0,d.pC)(r)?r.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:u}=B(s,l,v,i,o,h);return function N(o,s,l,v,i,h,r,a){const u=(0,d.pC)(r)&&(0,d.pC)(r.offset)?r.offset:0;switch(a){case"absolute-height":return o-u;case"relative-to-ground":return o-((0,d.Pt)(h.elevationProvider.getElevation(s,l,v,i,"ground"),0)+u);case"relative-to-scene":return o-((0,d.Pt)(h.elevationProvider.getElevation(s,l,v,i,"scene"),0)+u)}}(u,s,l,v,i,o,r,a)}function B(o,s,l,v,i,h){const r=(0,d.pC)(h.offset)?h.offset:0;switch(h.mode){case"absolute-height":return{absoluteZ:l+r,elevation:0};case"on-the-ground":{const a=(0,d.Pt)(i.elevationProvider.getElevation(o,s,0,v,"ground"),0);return{absoluteZ:a,elevation:a}}case"relative-to-ground":{const a=(0,d.Pt)(i.elevationProvider.getElevation(o,s,l,v,"ground"),0);return{absoluteZ:l+a+r,elevation:a}}case"relative-to-scene":{const a=(0,d.Pt)(i.elevationProvider.getElevation(o,s,l,v,"scene"),0);return{absoluteZ:l+a+r,elevation:a}}}}function O(o,s){if((0,d.Wi)(s))return!1;const{mode:l}=s;return(0,d.pC)(l)&&("scene"===o&&"relative-to-scene"===l||"ground"===o&&"absolute-height"!==l)}const z={mode:"absolute-height",offset:0},D={mode:"on-the-ground",offset:null};function F(o,s){return o===s||(0,d.pC)(o)&&(0,d.pC)(s)&&o.mode===s.mode&&o.offset===s.offset}}}]);