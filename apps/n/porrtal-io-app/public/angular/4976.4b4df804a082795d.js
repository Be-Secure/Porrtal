"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[4976],{64976:(D,n,e)=>{e.r(n),e.d(n,{default:()=>P});var r=e(17626),i=e(26584),d=e(77712),p=(e(85931),e(8314),e(90912),e(76898)),h=e(19702),a=e(50916),O=e(45611);let o=class extends((0,a.r)((0,h.A)(O.Z))){constructor(){super(...arguments),this.type="elevation-3d"}initialize(){const E=this.view?.map?.allLayers,t=E&&E.includes(this.layer),_=this.view?.map?.ground?.layers,s=_&&_.includes(this.layer);if(t&&!s){const l=new i.Z("layerview:elevation-layer-only","3D elevation layer '"+this.layer.id+"' can only be added to layers in map.ground");this.addResolvingPromise(Promise.reject(l))}this._addTilingSchemeMatchPromise()}};(0,r._)([(0,d.Cb)()],o.prototype,"layer",void 0),(0,r._)([(0,d.Cb)({readOnly:!0,aliasOf:"layer.tileInfo"})],o.prototype,"tileInfo",void 0),o=(0,r._)([(0,p.j)("esri.views.3d.layers.ElevationLayerView3D")],o);const P=o},19702:(D,n,e)=>{e.d(n,{A:()=>P});var r=e(15861),i=e(17626),d=e(54024),y=e(10699),v=e(32917),c=e(77712),O=(e(85931),e(8314),e(90912),e(76898)),o=e(36947);const P=E=>{let t=class extends E{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(_){super.postscript(_),(0,o.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var _=this;return(0,r.Z)(function*(){const s=new AbortController,l=s.signal;_.handles.add((0,d.kB)(()=>s.abort())),yield(0,v.N1)(()=>_.view.defaultsFromMap?.heightModelInfoReady,l),(0,y.k_)(l);const M=(0,o.Wt)(_.layer,_.view.heightModelInfo,_.supportsHeightUnitConversion);if(M)throw M})()}canResume(){const _=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!_||!_.minScale||!_.maxScale||_.minScale>=_.maxScale)}getSuspendInfo(){const _=super.getSuspendInfo(),s=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(_.outsideScaleRange=!0),_}};return(0,i._)([(0,c.Cb)()],t.prototype,"view",void 0),(0,i._)([(0,c.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,i._)([(0,O.j)("esri.views.3d.layers.LayerView3D")],t),t}},45611:(D,n,e)=>{e.d(n,{Z:()=>_});var r=e(17626),i=e(14517),d=e(61885),y=e(80542),v=e(61996),c=e(63290),p=e(62208),h=e(60330),a=e(77712),E=(e(85931),e(8314),e(90912),e(76898));let t=class extends((0,y.p)((0,v.IG)((0,h.v)(d.Z.EventedMixin(i.Z))))){constructor(s){super(s),this.layer=null,this.parent=null}initialize(){this.when().catch(s=>{if("layerview:create-error"!==s.name){const l=this.layer&&this.layer.id||"no id",M=this.layer&&this.layer.title||"no title";c.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${M}', id: '${l}')`,s)}})}get fullOpacity(){return(0,p.Pt)(this.get("layer.opacity"),1)*(0,p.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(s){void 0!==s?this._override("visible",s):this._clearOverride("visible")}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const s=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(s.viewNotReady=!0),this.layer&&this.layer.loaded||(s.layerNotLoaded=!0),this.visible||(s.layerInvisible=!0),s}isUpdating(){return!1}};(0,r._)([(0,a.Cb)()],t.prototype,"fullOpacity",null),(0,r._)([(0,a.Cb)()],t.prototype,"layer",void 0),(0,r._)([(0,a.Cb)()],t.prototype,"parent",void 0),(0,r._)([(0,a.Cb)({readOnly:!0})],t.prototype,"suspended",null),(0,r._)([(0,a.Cb)({readOnly:!0})],t.prototype,"suspendInfo",null),(0,r._)([(0,a.Cb)({readOnly:!0})],t.prototype,"legendEnabled",null),(0,r._)([(0,a.Cb)({type:Boolean,readOnly:!0})],t.prototype,"updating",null),(0,r._)([(0,a.Cb)({readOnly:!0})],t.prototype,"updatingProgress",null),(0,r._)([(0,a.Cb)()],t.prototype,"visible",null),(0,r._)([(0,a.Cb)()],t.prototype,"view",void 0),t=(0,r._)([(0,E.j)("esri.views.layers.LayerView")],t);const _=t}}]);