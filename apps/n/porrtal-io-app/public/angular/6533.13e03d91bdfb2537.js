/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[6533,164],{52489:(O,c,t)=>{t.d(c,{D:()=>h});var l=t(22558);function h(r){r&&r.writtenProperties&&r.writtenProperties.forEach(({target:s,propName:p,newOrigin:g})=>{(0,l.l)(s)&&g&&s.originOf(p)!==g&&s.updateOrigin(p,g)})}},22558:(O,c,t)=>{function l(h){return h&&"getAtOrigin"in h&&"originOf"in h}t.d(c,{l:()=>l})},36912:(O,c,t)=>{t.r(c),t.d(c,{save:()=>ut,saveAll:()=>yt,saveAs:()=>dt});var l=t(15861),h=t(85931),r=t(26584),s=t(63290),p=t(62208),g=t(10699),M=t(52489),I=t(32258),Z=t(24578),T=t(38305),P=t(72469),U=t(84687),m=t(55463),y=t(88755),f=t(37281);const E=s.Z.getLogger("esri.layers.FeatureLayer"),S="Feature Service";function D(n,e){return`Layer (title: ${n.title}, id: ${n.id}) of type '${n.declaredClass}' ${e}`}function Y(n,e){if(e.type!==S)throw new r.Z("feature-layer:portal-item-wrong-type",D(n,`should have portal item of type "${S}"`))}function V(n){return A.apply(this,arguments)}function A(){return(A=(0,l.Z)(function*(n){if(yield n.load(),(0,P.rQ)(n))throw new r.Z("feature-layer:save",D(n,"using an in-memory source cannot be saved to a portal item"))})).apply(this,arguments)}function _(n,e){let o=n.messages.filter(({type:a})=>"error"===a).map(({name:a,message:u,details:i})=>new r.Z(a,u,i));if(e?.ignoreUnsupported&&(o=o.filter(({name:a})=>"layer:unsupported"!==a&&"symbol:unsupported"!==a&&"symbol-layer:unsupported"!==a&&"property:unsupported"!==a&&"url:unsupported"!==a)),o.length>0)throw new r.Z("feature-layer:save","Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:o})}function K(n,e,o){return x.apply(this,arguments)}function x(){return(x=(0,l.Z)(function*(n,e,o){"beforeSave"in n&&"function"==typeof n.beforeSave&&(yield n.beforeSave());const a=n.write({},e);return _(e,o),a})).apply(this,arguments)}function Q(n){const{layer:e,layerJSON:o}=n;return e.isTable?{layers:[],tables:[o]}:{layers:[o],tables:[]}}function C(n){(0,f.qj)(n,f.Kz.JSAPI),n.typeKeywords&&(n.typeKeywords=n.typeKeywords.filter((e,o,a)=>a.indexOf(e)===o))}function tt(n){const e=n.portalItem;if(!e)throw E.error("save: requires the portalItem property to be set"),new r.Z("feature-layer:portal-item-not-set",D(n,"requires the portalItem property to be set"));if(!e.loaded)throw new r.Z("feature-layer:portal-item-not-loaded",D(n,"cannot be saved to a portal item that does not exist or is inaccessible"));Y(n,e)}function H(n,e){return R.apply(this,arguments)}function R(){return(R=(0,l.Z)(function*(n,e){return/\/\d+\/?$/.test(n.url)?Q(e[0]):nt(n,e)})).apply(this,arguments)}function nt(n,e){return W.apply(this,arguments)}function W(){return(W=(0,l.Z)(function*(n,e){const{layer:{url:o,customParameters:a,apiKey:u}}=e[0];let i=yield n.fetchData("json");i&&null!=i.layers&&null!=i.tables||(i=yield rt(i,{url:o,customParameters:a,apiKey:u},e.map(d=>d.layer.layerId)));for(const d of e)b(d.layer,d.layerJSON,i);return i})).apply(this,arguments)}function rt(n,e,o){return B.apply(this,arguments)}function B(){return(B=(0,l.Z)(function*(n,e,o){var a,u;n||(n={}),(a=n).layers||(a.layers=[]),(u=n).tables||(u.tables=[]);const{url:i,customParameters:d,apiKey:L}=e,{serviceJSON:v,layersJSON:z}=yield(0,Z.fetchFeatureService)(i,{customParameters:d,apiKey:L}),k=X(n.layers,v.layers,o),q=X(n.tables,v.tables,o);n.layers=k.itemResources,n.tables=q.itemResources;const pt=[...k.added,...q.added],ht=z?[...z.layers,...z.tables]:[];return yield et(n,pt,i,ht),n})).apply(this,arguments)}function X(n,e,o){const a=(0,h.e5)(n,e,(i,d)=>i.id===d.id);n=n.filter(i=>!a.removed.some(d=>d.id===i.id));const u=a.added.map(({id:i})=>({id:i}));return u.forEach(({id:i})=>{n.push({id:i})}),{itemResources:n,added:u.filter(({id:i})=>!o.includes(i))}}function et(n,e,o,a){return j.apply(this,arguments)}function j(){return(j=(0,l.Z)(function*(n,e,o,a){const u=e.map(({id:i})=>new I.default({url:o,layerId:i,sourceJSON:a.find(({id:d})=>d===i)}));yield(0,g.as)(u.map(i=>i.load())),u.forEach(i=>{const{layerId:d,loaded:L,defaultPopupTemplate:v}=i;!L||(0,p.Wi)(v)||b(i,{id:d,popupInfo:v.toJSON()},n)})})).apply(this,arguments)}function b(n,e,o){!function w(n,e){const o=n.findIndex(({id:a})=>a===e.id);-1===o?n.push(e):n[o]=e}(n.isTable?o.tables:o.layers,e)}function at(n){const{portalItem:e}=n;return(0,P.y2)(n)&&!n.dynamicDataSource&&!!e?.loaded&&e.type===S}function N(){return(N=(0,l.Z)(function*(n){if(!n?.length)throw new r.Z("feature-layer-utils-saveall:missing-parameters","'layers' array should contain at least one feature layer");yield Promise.all(n.map(a=>a.load()));for(const a of n)if(!at(a))throw new r.Z("feature-layer-utils-saveall:invalid-parameters",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${D(a,"does not conform")}`,{layer:a});const e=n.map(a=>a.portalItem.id);if(new Set(e).size>1)throw new r.Z("feature-layer-utils-saveall:invalid-parameters","All layers in the 'layers' array should be loaded from the same portal item");const o=n.map(a=>a.layerId);if(new Set(o).size!==o.length)throw new r.Z("feature-layer-utils-saveall:invalid-parameters","'layers' array should contain only one instance each of layer or table in a feature service")})).apply(this,arguments)}function lt(n,e){var o,a;let u=m.default.from(e);return u.id&&(u=u.clone(),u.id=null),(o=u).type??(o.type=S),(a=u).portal??(a.portal=U.Z.getDefault()),Y(n,u),u}function st(n,e){return G.apply(this,arguments)}function G(){return(G=(0,l.Z)(function*(n,e){const{url:o,layerId:a,title:u,fullExtent:i,isTable:d}=n,L=(0,T.Qc)(o),v=(0,p.pC)(L)&&"FeatureServer"===L.serverType;e.url=v?o:`${o}/${a}`,e.title||(e.title=u),e.extent=null,!d&&(0,p.pC)(i)&&(e.extent=yield(0,f.$o)(i)),(0,f.ck)(e,f.Kz.METADATA),(0,f.ck)(e,f.Kz.MULTI_LAYER),(0,f.qj)(e,f.Kz.SINGLE_LAYER),d&&(0,f.qj)(e,f.Kz.TABLE),C(e)})).apply(this,arguments)}function it(n,e,o){return J.apply(this,arguments)}function J(){return(J=(0,l.Z)(function*(n,e,o){const a=n.portal;yield a._signIn(),yield a.user.addItem({item:n,data:e,folder:o?.folder})})).apply(this,arguments)}const ut=(0,g.Ds)(function ft(n,e){return F.apply(this,arguments)});function F(){return(F=(0,l.Z)(function*(n,e){yield V(n),tt(n);const o=n.portalItem,a=(0,y.Y)(o),u=yield K(n,a,e),i=yield H(o,[{layer:n,layerJSON:u}]);return C(o),yield o.update({data:i}),(0,M.D)(a),o})).apply(this,arguments)}const yt=(0,g.Ds)(function(){var n=(0,l.Z)(function*(e,o){yield function ot(n){return N.apply(this,arguments)}(e);const a=e[0].portalItem,u=(0,y.Y)(a),i=yield Promise.all(e.map(L=>K(L,u,o))),d=yield H(a,e.map((L,v)=>({layer:L,layerJSON:i[v]})));return C(a),yield a.update({data:d}),yield Promise.all(e.slice(1).map(L=>L.portalItem.reload())),(0,M.D)(u),a.clone()});return function(e,o){return n.apply(this,arguments)}}()),dt=(0,g.Ds)(function mt(n,e,o){return $.apply(this,arguments)});function $(){return($=(0,l.Z)(function*(n,e,o){yield V(n);const a=lt(n,e),u=(0,y.Y)(a),i=Q({layer:n,layerJSON:yield K(n,u,o)});return yield st(n,a),yield it(a,i,o),n.portalItem=a,(0,M.D)(u),a})).apply(this,arguments)}},30164:(O,c,t)=>{t.d(c,{T:()=>h});var l=t(15861);const h={BingMapsLayer:(r=(0,l.Z)(function*(){return(yield t.e(2248).then(t.bind(t,72248))).default}),function(){return r.apply(this,arguments)}),BuildingSceneLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(9410),t.e(8592),t.e(6189)]).then(t.bind(t,6189))).default});return function(){return r.apply(this,arguments)}}(),CSVLayer:function(){var r=(0,l.Z)(function*(){return(yield t.e(5625).then(t.bind(t,85625))).default});return function(){return r.apply(this,arguments)}}(),ElevationLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(5810)]).then(t.bind(t,75810))).default});return function(){return r.apply(this,arguments)}}(),FeatureLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,32258))).default});return function(){return r.apply(this,arguments)}}(),GroupLayer:function(){var r=(0,l.Z)(function*(){return(yield t.e(5964).then(t.bind(t,25964))).default});return function(){return r.apply(this,arguments)}}(),GeoRSSLayer:function(){var r=(0,l.Z)(function*(){return(yield t.e(6306).then(t.bind(t,96306))).default});return function(){return r.apply(this,arguments)}}(),GeoJSONLayer:function(){var r=(0,l.Z)(function*(){return(yield t.e(2903).then(t.bind(t,72903))).default});return function(){return r.apply(this,arguments)}}(),ImageryLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(7692),t.e(4307),t.e(3016),t.e(9602)]).then(t.bind(t,49602))).default});return function(){return r.apply(this,arguments)}}(),ImageryTileLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(7692),t.e(4307),t.e(8594),t.e(3016),t.e(8592),t.e(6003)]).then(t.bind(t,36003))).default});return function(){return r.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(7867)]).then(t.bind(t,67867))).default});return function(){return r.apply(this,arguments)}}(),KMLLayer:function(){var r=(0,l.Z)(function*(){return(yield t.e(2701).then(t.bind(t,12701))).default});return function(){return r.apply(this,arguments)}}(),LineOfSightLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(4626)]).then(t.bind(t,80756))).default});return function(){return r.apply(this,arguments)}}(),MapImageLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8887)]).then(t.bind(t,48887))).default});return function(){return r.apply(this,arguments)}}(),MapNotesLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9114)]).then(t.bind(t,49114))).default});return function(){return r.apply(this,arguments)}}(),OGCFeatureLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(9628),t.e(2955)]).then(t.bind(t,36554))).default});return function(){return r.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(1591)]).then(t.bind(t,71591))).default});return function(){return r.apply(this,arguments)}}(),PointCloudLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(7155)]).then(t.bind(t,7155))).default});return function(){return r.apply(this,arguments)}}(),RouteLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(403),t.e(8664)]).then(t.bind(t,68664))).default});return function(){return r.apply(this,arguments)}}(),SceneLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(8592),t.e(7559)]).then(t.bind(t,27559))).default});return function(){return r.apply(this,arguments)}}(),StreamLayer:function(){var r=(0,l.Z)(function*(){return(yield t.e(289).then(t.bind(t,70289))).default});return function(){return r.apply(this,arguments)}}(),TileLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8592),t.e(9735)]).then(t.bind(t,59735))).default});return function(){return r.apply(this,arguments)}}(),UnknownLayer:function(){var r=(0,l.Z)(function*(){return(yield t.e(6339).then(t.bind(t,56339))).default});return function(){return r.apply(this,arguments)}}(),UnsupportedLayer:function(){var r=(0,l.Z)(function*(){return(yield t.e(6240).then(t.bind(t,16240))).default});return function(){return r.apply(this,arguments)}}(),VectorTileLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(8364),t.e(8592),t.e(1770)]).then(t.bind(t,14836))).default});return function(){return r.apply(this,arguments)}}(),VoxelLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(8115)]).then(t.bind(t,68115))).default});return function(){return r.apply(this,arguments)}}(),WebTileLayer:function(){var r=(0,l.Z)(function*(){return(yield t.e(8592).then(t.bind(t,28678))).default});return function(){return r.apply(this,arguments)}}(),WFSLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(3774),t.e(8762)]).then(t.bind(t,98762))).default});return function(){return r.apply(this,arguments)}}(),WMSLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6894)]).then(t.bind(t,46894))).default});return function(){return r.apply(this,arguments)}}(),WMTSLayer:function(){var r=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(4223)]).then(t.bind(t,64223))).default});return function(){return r.apply(this,arguments)}}()};var r},88755:(O,c,t)=>{t.d(c,{Y:()=>s,h:()=>r});var l=t(21726),h=t(84687);function r(p){return{origin:"portal-item",url:(0,l.mN)(p.itemUrl),portal:p.portal||h.Z.getDefault(),portalItem:p,readResourcePaths:[]}}function s(p){return{origin:"portal-item",messages:[],writtenProperties:[],url:p.itemUrl?(0,l.mN)(p.itemUrl):null,portal:p.portal||h.Z.getDefault(),portalItem:p}}},37281:(O,c,t)=>{t.d(c,{$o:()=>T,Kz:()=>U,_$:()=>I,ck:()=>Z,qj:()=>M});var l=t(15861),h=t(55915),r=t(65234),s=t(46367);function p(m){return g.apply(this,arguments)}function g(){return(g=(0,l.Z)(function*(m){const y=m.spatialReference;if(y.isWGS84)return m.clone();if(y.isWebMercator)return(0,s.Sx)(m);const f=r.Z.WGS84;return yield(0,h.iQ)(y,f),(0,h.iV)(m,f)})).apply(this,arguments)}function M(m,y){if(!I(m,y)){const f=m.typeKeywords;f?f.push(y):m.typeKeywords=[y]}}function I(m,y){return!!m.typeKeywords?.includes(y)}function Z(m,y){const f=m.typeKeywords;if(f){const E=f.indexOf(y);E>-1&&f.splice(E,1)}}function T(m){return P.apply(this,arguments)}function P(){return(P=(0,l.Z)(function*(m){const y=m.clone().normalize();let f;if(y.length>1)for(const E of y)f?E.width>f.width&&(f=E):f=E;else f=y[0];return p(f)})).apply(this,arguments)}const U={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"}}}]);