/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[126],{50126:(q,T,a)=>{a.d(T,{Z:()=>ye});var C=a(15861),o=a(17626),x=a(26584),u=a(62208),y=a(32917),l=a(77712),b=(a(85931),a(90912),a(76898)),Z=a(84786),E=a(23010),D=a(78448),R=a(19702),V=a(54984),I=a(14517),m=a(10699),L=a(38114),M=a(20477),z=a(88879),H=a(42930),W=a(65234),J=a(36255);class X{constructor(r){this._schedule=r,this._handle=new k(r)}destroy(){this._handle.destroy()}invoke(r,e){return r.buffer&&0!==r.buffer.byteLength?(r.options.sourceSpatialReference&&r.options.sourceSpatialReference instanceof W.Z&&(r.options={...r.options,sourceSpatialReference:r.options.sourceSpatialReference.toJSON()}),this._handle.invoke(r,e).then(i=>this._schedule(()=>{if(i.spatialReference=W.Z.fromJSON(i.spatialReference),i.fields)for(let n=0;n<i.fields.length;n++)i.fields[n]=J.Z.fromJSON(i.fields[n]);const s=i.spatialReference;for(const n of i.features)n.uid=z.Z.generateUID(),(0,u.pC)(n.geometry)&&(n.geometry.spatialReference=s);return i}))):Promise.resolve(null)}}class k extends H.q{constructor(r){super("PBFDecoderWorker","_parseFeatureQuery",{_parseFeatureQuery:e=>[e.buffer]},r)}}let w=class extends I.Z{constructor(t){super(t)}get queryFeaturesDehydrated(){const t=this.layer.capabilities,r=t&&t.query;if(r&&r.supportsFormatPBF){(0,u.Wi)(this._decoder)&&(this._decoder=new X(this.schedule));const e={sourceSpatialReference:this.layer.spatialReference?.toJSON()??null,applyTransform:!0,maxStringAttributeLength:1024};return(i,s)=>(0,M.runQuery)(this.layer.parsedUrl,i,"pbf",this._createRequestOptions(s)).then(n=>((0,m.k_)(s),(0,u.pC)(this._decoder)?this._decoder.invoke({buffer:n.data,options:e},s.signal):Promise.reject((0,m.zE)())))}return(e,i)=>(0,M.executeQuery)(this.layer.parsedUrl,e,this.layer.spatialReference,this._createRequestOptions(i)).then(s=>(0,L.PA)(s.data))}queryFeatureCount(t,r){return this.layer.queryFeatureCount(t,r)}destroy(){this._decoder=(0,u.SC)(this._decoder)}_createRequestOptions(t){return{...t,query:{...this.layer.customParameters,token:this.layer.apiKey,...t?.query}}}};(0,o._)([(0,l.Cb)({constructOnly:!0})],w.prototype,"layer",void 0),(0,o._)([(0,l.Cb)({constructOnly:!0})],w.prototype,"schedule",void 0),(0,o._)([(0,l.Cb)({readOnly:!0})],w.prototype,"queryFeaturesDehydrated",null),w=(0,o._)([(0,b.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],w);let A=class extends I.Z{constructor(t){super(t)}queryFeaturesDehydrated(t,r){return this.layer.queryFeatures(t,r)}queryFeatureCount(t,r){return this.layer.queryFeatureCount(t,r)}};(0,o._)([(0,l.Cb)({constructOnly:!0})],A.prototype,"layer",void 0),(0,o._)([(0,l.Cb)({readOnly:!0})],A.prototype,"queryFeaturesDehydrated",null),A=(0,o._)([(0,b.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceMeshQuery3D")],A);let N=class extends I.Z{constructor(t){super(t)}queryFeaturesDehydrated(t,r){return this.layer.queryFeatures(t,r)}};(0,o._)([(0,l.Cb)({constructOnly:!0})],N.prototype,"layer",void 0),N=(0,o._)([(0,b.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],N);let S=class extends I.Z{constructor(t){super(t)}queryFeaturesDehydrated(t,r){return this.source.queryFeaturesJSON(t,r).then(L.PA,e=>{if(e&&"query-features-json:unsupported"===e.name)return this.layer.queryFeatures(t,r);throw e})}queryFeatureCount(t,r){return this.layer.queryFeatureCount(t,r)}};(0,o._)([(0,l.Cb)({constructOnly:!0})],S.prototype,"layer",void 0),(0,o._)([(0,l.Cb)({constructOnly:!0})],S.prototype,"source",void 0),S=(0,o._)([(0,b.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D")],S);class te{constructor(r){this._memoryCache=null,this._capabilities=null;const e=r.layerView.layer;this._layerView=r.layerView,this.objectIdField=e.objectIdField,this.globalIdField="globalIdField"in e?e.globalIdField:null,this._returnZ=r.returnZ,this._returnM=r.returnM;const i=this._layerView.view.resourceController;this.query=function ee(t,r){return"feature"===t.type&&"feature-layer"===t.source.type?(0,u.pC)(t.infoFor3D)?new A({layer:t}):new w({layer:t,schedule:r}):"feature"===t.type&&"memory"===t.source.type||"csv"===t.type||"geojson"===t.type||"oriented-imagery"===t.type||"wfs"===t.type?new S({layer:t,source:t.source}):"ogc-feature"===t.type?new N({layer:t}):null}(e,s=>i.schedule(s)),i&&this._memoryCacheEnabled&&(this._memoryCache=i.memoryController.newCache(e.uid))}get _memoryCacheEnabled(){switch(this._layerView.layer.source.type){case"feature-layer":case"ogc-feature":case"oriented-imagery":return!0;case"csv":case"geojson":case"memory":case"wfs":return!1}}destroy(){this._memoryCache=(0,u.SC)(this._memoryCache),this.query.destroy()}createQuery(){const r=this._layerView.layer.createQuery();return r.outFields=this._layerView.availableFields,r.returnZ=this._returnZ,r.returnM=this._returnM,r.outSpatialReference=this.tilingScheme.spatialReference,r}get memoryCache(){return this._memoryCache}get viewingMode(){return this._layerView.view.state.viewingMode}get tilingScheme(){return this._layerView.view.featureTiles.tilingScheme}get scheduler(){const r=this._layerView.view.resourceController;return r?r.scheduler:null}get geometryType(){return this._layerView.layer.geometryType}get fullExtent(){return this._layerView.layer.fullExtent}get tileMaxRecordCount(){return this._layerView.layer.capabilities.query.tileMaxRecordCount}get maxRecordCount(){return this._layerView.layer.capabilities.query.maxRecordCount}get capabilities(){return(0,u.pC)(this._capabilities)||(this._capabilities=(0,V.A)(this._layerView.layer)),this._capabilities}logFetchError(r,e){r.error("#fetchTile()",this._layerView.layer,e&&e.message?e.message:e)}}var re=a(36967),se=a(41632),Q=a(42743),ie=a(63290),ae=a(13812),oe=a(2319),ne=a(98624),p=a(36630),G=a(59990),K=a(96854),le=a(46679),U=a(10023);const Y="esri.views.layers.FeatureLayerView",B=ie.Z.getLogger(Y),ue=t=>{let r=class extends t{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){this.handles.add([(0,y.YP)(()=>{const e=this.layer;return[e?.elevationInfo?.featureExpressionInfo,e&&"displayField"in e?e.displayField:null,e?.timeInfo,e&&"renderer"in e&&e.renderer,e&&"labelingInfo"in e&&e.labelingInfo,e&&"floorInfo"in e&&e.floorInfo,this.filter,this.featureEffect,this.timeExtent]},()=>this._handleRequiredFieldsChange(),y.tX),(0,y.on)(()=>this.view?.floors,"change",()=>this._handleRequiredFieldsChange()),(0,y.on)(()=>{const e=this.layer;return e&&"sublayers"in e&&e.sublayers},"change",()=>this._handleRequiredFieldsChange())])}get availableFields(){const{layer:e,layer:{fieldsIndex:i},requiredFields:s}=this;return(0,p.Q0)(i,"outFields"in e&&e.outFields?[...(0,p.Lk)(i,e.outFields),...s]:s)}get featureEffect(){return this.layer&&"featureEffect"in this.layer?this.layer.featureEffect:null}set featureEffect(e){this._override("featureEffect",e)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){B.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error("missing implementation")}createQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},i=(0,u.pC)(this.filter)?this.filter.createQuery(e):new K.Z(e);if("feature"===this.layer.type){const s=(0,G.c)(this);(0,u.pC)(s)&&(i.where=i.where?`(${i.where}) AND (${s})`:s)}return(0,u.pC)(this.timeExtent)&&(i.timeExtent=(0,u.pC)(i.timeExtent)?i.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),i}createAggregateQuery(){return new K.Z({outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})}queryFeatures(e,i){throw new Error("missing implementation")}queryObjectIds(e,i){throw new Error("missing implementation")}queryFeatureCount(e,i){throw new Error("missing implementation")}queryExtent(e,i){throw new Error("missing implementation")}fetchPopupFeatures(e,i){var s=this;return(0,C.Z)(function*(){const n=s.validateFetchPopupFeatures(i);if(n)throw n;return s.fetchClientPopupFeatures(i)})()}_loadArcadeModules(e){if(e.get("expressionInfos.length")||Array.isArray(e.content)&&e.content.some(i=>"expression"===i.type))return(0,le.LC)()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",e),e.then(()=>{this._updatingRequiredFieldsPromise===e&&this._set("_updatingRequiredFieldsPromise",null)})}_updateRequiredFields(){var e=this;return(0,C.Z)(function*(){if(!e.layer||!e.view)return;const i="3d"===e.view.type,{layer:s,layer:{fieldsIndex:n,objectIdField:F}}=e,v="renderer"in s&&s.renderer,d="orderBy"in s&&s.orderBy,h="featureReduction"in s?s.featureReduction:null,c=new Set,j=yield(0,m.as)([v?v.collectRequiredFields(c,n):null,(0,p.Mu)(c,s),i?(0,p.vl)(c,s):null,(0,u.pC)(e.filter)?(0,p.Ll)(c,s,e.filter):null,(0,u.pC)(e.featureEffect)?(0,p.Ll)(c,s,e.featureEffect.filter):null,h?(0,p.ZV)(c,s,h):null,d?(0,p.Qj)(c,s,d):null]);if(s.timeInfo&&e.timeExtent&&(0,p.gd)(c,s.fieldsIndex,[s.timeInfo.startField,s.timeInfo.endField]),"feature"===s.type&&(s.floorInfo&&(0,p.gd)(c,s.fieldsIndex,[s.floorInfo.floorField]),i&&(0,u.pC)(s.infoFor3D)&&(null==s.globalIdField&&B.error("globalIdField missing on 3DObjectFeatureLayer"),(0,p.gd)(c,s.fieldsIndex,[s.globalIdField]))),"subtype-group"===s.type){(0,p.AB)(c,n,s.subtypeField);const P=s.sublayers.map($=>Promise.all([$.renderer?.collectRequiredFields(c,n),(0,p.Mu)(c,$)]));yield(0,m.as)(P)}for(const P of j)P.error&&B.error(P.error);(0,p.AB)(c,n,F),i&&"displayField"in s&&s.displayField&&(0,p.AB)(c,n,s.displayField);const _=Array.from(c).sort();e._set("requiredFields",_)})()}validateFetchPopupFeatures(e){if((0,u.Wi)(e))return null;for(const i of e.clientGraphics){const s=i.layer;if("popupEnabled"in s&&!s.popupEnabled)return new x.Z("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:s});if(i.isAggregate){const n="featureReduction"in s?s.featureReduction:null;if(!(n&&"popupTemplate"in n&&n.popupEnabled&&n.popupTemplate))return new x.Z("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:s})}else if("popupTemplate"in s&&!(0,U.V)(s,e))return new x.Z("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:s})}}fetchClientPopupFeatures(e){var i=this;return(0,C.Z)(function*(){const s=(0,u.pC)(e)?e.clientGraphics:null;if(!s||0===s.length)return[];const n=new Array(s.length),F=new Map,v=yield i.createPopupQuery(e);for(let d=0;d<s.length;d++){const h=s[d];if(h.isAggregate){n[d]=h;continue}const{layer:c}=h;if(!("popupEnabled"in c))continue;const j=(0,p.Lk)(i.layer.fieldsIndex,v.outFields),_=(0,U.V)(c,e);if((0,u.Wi)(_))continue;const P=yield i._loadArcadeModules(_);P&&P.arcadeUtils.hasGeometryOperations(_)||!(0,p.R9)(j,h)?F.set(h.getObjectId(),d):n[d]=h}if("stream"===i.layer.type||0===F.size)return n.filter(Boolean);v.objectIds=Array.from(F.keys());try{const d=yield i.layer.queryFeatures(v);for(const h of d.features)n[F.get(h.getObjectId())]=h}catch{}return n.filter(Boolean)})()}createPopupQuery(e){var i=this;return(0,C.Z)(function*(){const s=i.layer.createQuery(),n=new Set;let F=!1;const v=(0,u.pC)(e)&&e.clientGraphics?e.clientGraphics.map(d=>d.layer):[i.layer];for(const d of v){if(!("popupEnabled"in d))continue;const h=(0,U.V)(d,e);if((0,u.Wi)(h))continue;const c=yield i._loadArcadeModules(h),j=c&&c.arcadeUtils.hasGeometryOperations(h);F=!("point"!==i.layer.geometryType&&!j);const _=yield(0,U.e)(i.layer,h);for(const P of _)n.add(P)}if(s.returnGeometry=F,s.returnZ=F,s.returnM=F,s.outFields=Array.from(n),s.outSpatialReference=i.view.spatialReference,"feature"===i.layer.type){const d=(0,G.c)(i);(0,u.pC)(d)&&(s.where=s.where?`(${s.where}) AND (${d})`:d)}return s})()}canResume(){return!(!super.canResume()||(0,u.pC)(this.timeExtent)&&this.timeExtent.isEmpty)}};return(0,o._)([(0,l.Cb)()],r.prototype,"_updatingRequiredFieldsPromise",void 0),(0,o._)([(0,l.Cb)({readOnly:!0})],r.prototype,"availableFields",null),(0,o._)([(0,l.Cb)({type:oe.Z})],r.prototype,"featureEffect",null),(0,o._)([(0,l.Cb)({type:ne.Z})],r.prototype,"filter",void 0),(0,o._)([(0,l.Cb)(ae.qG)],r.prototype,"timeExtent",void 0),(0,o._)([(0,l.Cb)()],r.prototype,"layer",void 0),(0,o._)([(0,l.Cb)({type:Number})],r.prototype,"maximumNumberOfFeatures",null),(0,o._)([(0,l.Cb)({readOnly:!0,type:Boolean})],r.prototype,"maximumNumberOfFeaturesExceeded",null),(0,o._)([(0,l.Cb)({readOnly:!0})],r.prototype,"requiredFields",void 0),(0,o._)([(0,l.Cb)()],r.prototype,"suspended",void 0),(0,o._)([(0,l.Cb)()],r.prototype,"view",void 0),r=(0,o._)([(0,b.j)(Y)],r),r};var de=a(45611),ce=a(94421);let g=class extends((0,ce.Z)((0,D.R)(ue((0,R.A)(de.Z))))){constructor(t){super(t),this._controllerTotal=0,this._processorTotal=0,this.suspendResumeExtentMode="data"}initialize(){this.handles.add((0,y.YP)(()=>this._updatingRequiredFieldsPromise,t=>this.updatingHandles.addPromise(t),y.tX))}destroy(){this.updatingHandles.removeAll(),this.handles.removeAll(),this._fetcherContext=(0,u.SC)(this._fetcherContext)}get maximumNumberOfFeatures(){return this.controller?.maximumNumberOfFeatures??this._get("maximumNumberOfFeatures")}set maximumNumberOfFeatures(t){this._set("maximumNumberOfFeatures",t),this.controller&&(this.controller.maximumNumberOfFeatures=t)}get maximumNumberOfFeaturesExceeded(){return!!this.controller&&!(this.suspended||!this.controller.maximumNumberOfFeaturesExceeded)}get updatingProgressValue(){let t=0;if(this.controller?.updating){const e=this.controller.updatingRemaining,i=Math.max(this.controller.updatingTotal,this._controllerTotal);i>0&&(t=(i-e)/i,this._controllerTotal=i)}let r=0;if(this.processor?.updating){const e=this.processor.updatingRemaining,i=Math.max(e,this._processorTotal);i>0&&(r=(i-e)/i,this._processorTotal=i)}return.5*(t+r)}get updatePolicy(){if(!this.controller)return Q.jq.ASYNC;switch(this.controller.mode){case"snapshot":{const t=pe[this.layer.geometryType];return null==t||this.controller.serviceDataCount>t?Q.jq.ASYNC:Q.jq.SYNC}case"tiles":return Q.jq.ASYNC}}get hasZ(){const t=this.layer,r=t.capabilities&&t.capabilities.data;return!(!r||!r.supportsZ)&&("returnZ"in t&&null!=t.returnZ?t.returnZ:r.supportsZ)}get hasM(){const t=this.layer,r=t.capabilities&&t.capabilities.data;return!(!r||!r.supportsM)&&"returnM"in t&&null!=t.returnM&&t.returnM}setVisibility(t,r){this.processor?.setObjectIdVisibility(t,r)}createQuery(){return super.createQuery()}queryFeatures(t,r){const e=()=>super.queryFeatures(t,r);return"mesh"===this.layer.geometryType?this._queryFeaturesMesh(this._ensureQuery(t),e):e()}beforeSetController(t){t.maximumNumberOfFeatures=this.maximumNumberOfFeatures}createController(){this._fetcherContext=new te({layerView:this,returnZ:this.hasZ,returnM:this.hasM});const t=new E.g({layerView:this,context:this._fetcherContext,graphics:new re.g,extent:this.clippingExtent});return this.updatingHandles.add(()=>t.serviceDataExtent,r=>{this.processor&&(this.processor.dataExtent=r)},y.nn),this.handles.add((0,y.YP)(()=>this.suspended,r=>{r?t.suspend():t.resume()},y.tX)),this.updatingHandles.add(()=>this.processor?.displayFeatureLimit,r=>t.displayFeatureLimit=r,y.nn),this.handles.add((0,y.gx)(()=>!this.updating,()=>{this._controllerTotal=0,this._processorTotal=0})),t}doRefresh(t){var r=this;return(0,C.Z)(function*(){t&&!r.suspended&&r.controller&&r.controller.refetch(),r.processor.refreshFilter()})()}getUsedMemory(){return(this.processor?.usedMemory??0)+(this.controller?.memoryForUnusedFeatures??0)}getUnloadedMemory(){const r=this.controller?.expectedFeatureDiff??0,e=this.processor?.loadedFeatures??0;return(this.processor?.unprocessedMemoryEstimate??0)+(0===e||r/e>20?0:r*(this.processor?.usedMemoryPerFeature??0))}ignoresMemoryFactor(){return this.controller?.hasMaximumNumberOfFeaturesOverride}_queryFeaturesMesh(t,r){var e=this;return(0,C.Z)(function*(){yield e._validateQueryFeaturesMesh(t);const i=yield r();if(t&&t.outStatistics||(0,u.Wi)(e.graphics3DProcessor))return i;const s=e.layer.objectIdField,n=e.graphics3DProcessor.graphics3DGraphicsByObjectID,F=[];for(const v of i.features)if(v.geometry){const d=n.get(v.attributes[s]);d&&(v.geometry=(0,Z.kB)(d.graphic.geometry),F.push(v))}else F.push(v);return i.features=F,i})()}_validateQueryFeaturesMesh(t){var r=this;return(0,C.Z)(function*(){if(!t)return;const e=s=>{throw new x.Z("feature-layer-view:unsupported-query",`Queries on Mesh feature collection layers do not support '${s}'`)},i=["quantizationParameters","geometryPrecision","maxAllowableOffset"];for(const s of i)null!=t[s]&&e(s);"returnM"in t&&t.returnM&&e("returnM"),"returnCentroid"in t&&t.returnCentroid&&e("returnCentroid"),(0,u.pC)(t.outSpatialReference)&&!t.outSpatialReference.equals(r.view.spatialReference)&&e("outSpatialReference")})()}get performanceInfo(){const t=this.controller?.displayFeatureLimit,r=(0,u.pC)(t)&&t.averageSymbolComplexity,e=(0,u.pC)(r)?`f:${r.primitivesPerFeature},v:${r.primitivesPerCoordinate}`:"n/a",i={...this._getResourceInfo(),storedFeatures:0,totalVertices:0,partial:this.maximumNumberOfFeaturesExceeded,mode:this.controller?.mode??"n/a",symbolComplexity:e,nodes:this.controller?.tileDescriptors.length??0};if(this.controller&&i.displayedNumberOfFeatures){const s=this.controller.debug;i.storedFeatures=s.storedFeatures,i.totalVertices=s.totalVertices}return i}get test(){return{updatePolicy:this.updatePolicy,controller:this.controller,loadedGraphics:this.controller?.graphics}}};(0,o._)([(0,l.Cb)()],g.prototype,"layer",void 0),(0,o._)([(0,l.Cb)()],g.prototype,"controller",void 0),(0,o._)([(0,l.Cb)()],g.prototype,"_controllerTotal",void 0),(0,o._)([(0,l.Cb)()],g.prototype,"_processorTotal",void 0),(0,o._)([(0,l.Cb)()],g.prototype,"maximumNumberOfFeatures",null),(0,o._)([(0,l.Cb)()],g.prototype,"maximumNumberOfFeaturesExceeded",null),(0,o._)([(0,l.Cb)(se.q)],g.prototype,"updatingProgress",void 0),(0,o._)([(0,l.Cb)({readOnly:!0})],g.prototype,"updatingProgressValue",null),(0,o._)([(0,l.Cb)({readOnly:!0})],g.prototype,"updatePolicy",null),(0,o._)([(0,l.Cb)({readOnly:!0})],g.prototype,"hasZ",null),(0,o._)([(0,l.Cb)({readOnly:!0})],g.prototype,"hasM",null),(0,o._)([(0,l.Cb)()],g.prototype,"suspendResumeExtentMode",void 0),g=(0,o._)([(0,b.j)("esri.views.3d.layers.FeatureLayerViewBase3D")],g);const pe={point:5e3,polygon:500,polyline:1e3},ye=g},94421:(q,T,a)=>{a.d(T,{Z:()=>b});var C=a(17626),o=a(63290),x=a(10699),u=a(32917),y=a(77712),O=(a(85931),a(90912),a(76898));const b=Z=>{let E=class extends Z{initialize(){this.handles.add((0,u.on)(()=>this.layer,"refresh",D=>{this.doRefresh(D.dataChanged).catch(R=>{(0,x.D_)(R)||o.Z.getLogger(this.declaredClass).error(R)})}),"RefreshableLayerView")}};return(0,C._)([(0,y.Cb)()],E.prototype,"layer",void 0),E=(0,C._)([(0,O.j)("esri.layers.mixins.RefreshableLayerView")],E),E}},10023:(q,T,a)=>{a.d(T,{V:()=>l,e:()=>u});var C=a(15861),o=a(62208),x=a(36630);function u(f){return y.apply(this,arguments)}function y(){return(y=(0,C.Z)(function*(f,O=f.popupTemplate){if((0,o.Wi)(O))return[];const b=yield O.getRequiredFields(f.fieldsIndex),{lastEditInfoEnabled:Z}=O,{objectIdField:E,typeIdField:D,globalIdField:R,relationships:V}=f;if(b.includes("*"))return["*"];const I=Z?yield(0,x.CH)(f):[],m=(0,x.Q0)(f.fieldsIndex,[...b,...I]);return D&&m.push(D),m&&E&&f.fieldsIndex.has(E)&&!m.includes(E)&&m.push(E),m&&R&&f.fieldsIndex.has(R)&&!m.includes(R)&&m.push(R),V&&V.forEach(L=>{const{keyField:M}=L;m&&M&&f.fieldsIndex.has(M)&&!m.includes(M)&&m.push(M)}),m})).apply(this,arguments)}function l(f,O){return f.popupTemplate?f.popupTemplate:(0,o.pC)(O)&&O.defaultPopupTemplateEnabled&&(0,o.pC)(f.defaultPopupTemplate)?f.defaultPopupTemplate:null}}}]);