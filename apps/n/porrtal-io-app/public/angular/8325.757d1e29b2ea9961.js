"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[8325],{19702:(D,E,s)=>{s.d(E,{A:()=>d});var i=s(15861),l=s(17626),c=s(54024),_=s(10699),v=s(32917),h=s(77712),O=(s(85931),s(8314),s(90912),s(76898)),p=s(36947);const d=u=>{let e=class extends u{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(a){super.postscript(a),(0,p.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var a=this;return(0,i.Z)(function*(){const t=new AbortController,n=t.signal;a.handles.add((0,c.kB)(()=>t.abort())),yield(0,v.N1)(()=>a.view.defaultsFromMap?.heightModelInfoReady,n),(0,_.k_)(n);const o=(0,p.Wt)(a.layer,a.view.heightModelInfo,a.supportsHeightUnitConversion);if(o)throw o})()}canResume(){const a=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!a||!a.minScale||!a.maxScale||a.minScale>=a.maxScale)}getSuspendInfo(){const a=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(a.outsideScaleRange=!0),a}};return(0,l._)([(0,h.Cb)()],e.prototype,"view",void 0),(0,l._)([(0,h.Cb)()],e.prototype,"slicePlaneEnabled",void 0),e=(0,l._)([(0,O.j)("esri.views.3d.layers.LayerView3D")],e),e}},68325:(D,E,s)=>{s.r(E),s.d(E,{default:()=>u});var i=s(15861),l=s(17626),c=s(26584),_=s(62208),v=s(10699),h=s(32917),y=s(77712),M=s(76898),r=s(19702),O=s(45611);const p="analysis-view-handles";let d=class extends((0,r.A)(O.Z)){constructor(e){super(e),this.type="line-of-sight-3d",this._analysisModules={"line-of-sight":null}}initialize(){this.handles.add((0,h.YP)(()=>this.layer.analysis,e=>{this._destroyAnalysisView(),(0,_.pC)(e)&&this._createAnalysisView(e)},h.tX),p)}destroy(){this.handles.remove(p),this._destroyAnalysisView()}whenAnalysisView(){var e=this;return(0,i.Z)(function*(){if((0,_.pC)(e.analysisView))return e.analysisView;if((0,_.pC)(e._createAnalysisViewTask))return e._createAnalysisViewTask.promise;throw new c.Z("layerview:no-analysisview-for-analysis","The analysis has not been set on the LineOfSightLayer of this layer view")})()}isUpdating(){return(0,_.pC)(this._createAnalysisViewTask)||(0,_.pC)(this.analysisView)&&this.analysisView.updating}_createAnalysisView(e){var a=this;const t=(0,v.vr)(function(){var n=(0,i.Z)(function*(o){return a.analysisView=yield a._createAnalysisViewPromise(e,o),a._createAnalysisViewTask===t&&(a._createAnalysisViewTask=null),a.analysisView});return function(o){return n.apply(this,arguments)}}());this._createAnalysisViewTask=t}_destroyAnalysisView(){this.analysisView=(0,_.SC)(this.analysisView),this._createAnalysisViewTask=(0,_.IM)(this._createAnalysisViewTask)}_createAnalysisViewPromise(e,a){var t=this;return(0,i.Z)(function*(){const n=e.type;let o=t._analysisModules[n];if((0,_.Wi)(o)){const C=yield t._loadAnalysisModule(n);t._analysisModules[n]=C,o=C}const P=new o.default({analysis:e,view:t.view,parent:t});if(yield P.when(),(0,v.Hc)(a))throw P.destroy(),new c.Z("layerview:no-analysisview-for-analysis","The analysis has not been added to the LineOfSightLayer of this layer view",{analysis:e});return P})()}_loadAnalysisModule(e){return"line-of-sight"===e?Promise.all([s.e(2785),s.e(4828),s.e(8592),s.e(9862)]).then(s.bind(s,11467)):null}};(0,l._)([(0,y.Cb)()],d.prototype,"type",void 0),(0,l._)([(0,y.Cb)()],d.prototype,"layer",void 0),(0,l._)([(0,y.Cb)()],d.prototype,"analysisView",void 0),(0,l._)([(0,y.Cb)()],d.prototype,"_createAnalysisViewTask",void 0),d=(0,l._)([(0,M.j)("esri.views.3d.layers.LineOfSightLayerView3D")],d);const u=d},45611:(D,E,s)=>{s.d(E,{Z:()=>a});var i=s(17626),l=s(14517),c=s(61885),_=s(80542),v=s(61996),h=s(63290),y=s(62208),M=s(60330),r=s(77712),u=(s(85931),s(8314),s(90912),s(76898));let e=class extends((0,_.p)((0,v.IG)((0,M.v)(c.Z.EventedMixin(l.Z))))){constructor(t){super(t),this.layer=null,this.parent=null}initialize(){this.when().catch(t=>{if("layerview:create-error"!==t.name){const n=this.layer&&this.layer.id||"no id",o=this.layer&&this.layer.title||"no title";h.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${o}', id: '${n}')`,t)}})}get fullOpacity(){return(0,y.Pt)(this.get("layer.opacity"),1)*(0,y.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(t){void 0!==t?this._override("visible",t):this._clearOverride("visible")}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const t=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(t.viewNotReady=!0),this.layer&&this.layer.loaded||(t.layerNotLoaded=!0),this.visible||(t.layerInvisible=!0),t}isUpdating(){return!1}};(0,i._)([(0,r.Cb)()],e.prototype,"fullOpacity",null),(0,i._)([(0,r.Cb)()],e.prototype,"layer",void 0),(0,i._)([(0,r.Cb)()],e.prototype,"parent",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],e.prototype,"suspended",null),(0,i._)([(0,r.Cb)({readOnly:!0})],e.prototype,"suspendInfo",null),(0,i._)([(0,r.Cb)({readOnly:!0})],e.prototype,"legendEnabled",null),(0,i._)([(0,r.Cb)({type:Boolean,readOnly:!0})],e.prototype,"updating",null),(0,i._)([(0,r.Cb)({readOnly:!0})],e.prototype,"updatingProgress",null),(0,i._)([(0,r.Cb)()],e.prototype,"visible",null),(0,i._)([(0,r.Cb)()],e.prototype,"view",void 0),e=(0,i._)([(0,u.j)("esri.views.layers.LayerView")],e);const a=e}}]);