/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[9628],{58775:(me,H,u)=>{u.d(H,{O3:()=>Y,lG:()=>ce,my:()=>ue,q9:()=>f});var M=u(26584),q=u(66385),F=u(88071),P=u(36630);const z={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function f(e){return z[e]}function*x(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*G(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const n of t)yield*n}}function Q(e){for(const t of e)if(t.length>2)return!0;return!1}function S(e){let t=0;for(let n=0;n<e.length;n++){const i=e[n],d=e[(n+1)%e.length];t+=i[0]*d[1]-d[0]*i[1]}return t<=0}function B(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function j(e,t,n){switch(t.type){case"LineString":return function K(e,t,n){return C(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function V(e,t,n){for(const i of t.coordinates)C(e,i,n);return e}(e,t,n);case"MultiPoint":return function se(e,t,n){return C(e,t.coordinates,n),e}(e,t,n);case"MultiPolygon":return function ie(e,t,n){for(const i of t.coordinates){k(e,i[0],n);for(let d=1;d<i.length;d++)ee(e,i[d],n)}return e}(e,t,n);case"Point":return function X(e,t,n){return R(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function ae(e,t,n){const i=t.coordinates;k(e,i[0],n);for(let d=1;d<i.length;d++)ee(e,i[d],n);return e}(e,t,n)}}function k(e,t,n){const i=B(t);!function _(e){return!S(e)}(i)?C(e,i,n):te(e,i,n)}function ee(e,t,n){const i=B(t);!function O(e){return S(e)}(i)?C(e,i,n):te(e,i,n)}function C(e,t,n){for(const i of t)R(e,i,n);e.lengths.push(t.length)}function te(e,t,n){for(let i=t.length-1;i>=0;i--)R(e,t[i],n);e.lengths.push(t.length)}function R(e,t,n){const[i,d,T]=t;e.coords.push(i,d),n.hasZ&&e.coords.push(T||0)}function le(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function Y(e){if(!e)throw new M.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new M.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!i.test(n))throw new M.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function ue(e,t={}){const n=[],i=new Set,d=new Set;let T,Z=!1,E=null,b=!1,{geometryType:g=null}=t,r=!1;for(const s of x(e)){const{geometry:a,properties:c,id:m}=s;if((!a||(g||(g=f(a.type)),f(a.type)===g))&&(Z||(Z=Q(G(a))),b||(b=null!=m,b&&(T=typeof m,E=Object.keys(c).filter(h=>c[h]===m))),b&&null!=m&&(E.length>1?E=E.filter(h=>c[h]===m):1===E.length&&(E=c[E[0]]===m?E:[])),!r&&c)){let h=!0;for(const p in c){if(i.has(p))continue;const w=c[p];if(null==w){h=!1,d.add(p);continue}const A=le(w);"unknown"!==A?(d.delete(p),i.add(p),n.push({name:p,alias:p,type:A})):d.add(p)}r=h}}const o=E&&1===E.length&&E[0]||null;if(o)for(const s of n)if(s.name===o&&(0,P.H7)(s)){s.type="esriFieldTypeOID";break}return{fields:n,geometryType:g,hasZ:Z,objectIdFieldName:o,objectIdFieldType:T,unknownFields:Array.from(d)}}function ce(e,t){return Array.from(function*v(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const d of e){const{geometry:T,properties:Z,id:E}=d;if(T&&f(T.type)!==n)continue;const b=Z||{};let g=b[i]??null;i&&null!=E&&!b[i]&&(b[i]=g=E),yield new q.u_(T?j(new F.Z,T,t):null,b,null,g)}}(x(e),t))}},56554:(me,H,u)=>{u.d(H,{Dm:()=>G,Hq:()=>v,MS:()=>Q,bU:()=>z});var M=u(8314),q=u(58817),F=u(87757),P=u(24837);function z(_){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===_||"esriGeometryMultipoint"===_?P.I4:"esriGeometryPolyline"===_?P.ET:P.lF}}}const f=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let x=1;function G(_,O){if((0,M.Z)("esri-csp-restrictions"))return()=>({[O]:null,..._});try{let S=`this.${O} = null;`;for(const j in _)S+=`this${f.test(j)?`.${j}`:`["${j}"]`} = ${JSON.stringify(_[j])};`;const B=new Function(`\n      return class AttributesClass$${x++} {\n        constructor() {\n          ${S};\n        }\n      }\n    `)();return()=>new B}catch{return()=>({[O]:null,..._})}}function v(_={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,q.d9)(_)}}]}function Q(_,O){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:_},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:O,supportsDelete:O,supportsEditing:O,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:O,supportsExceedsLimitStatistics:!0},query:F.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:O,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},89628:(me,H,u)=>{u.d(H,{$9:()=>se,G4:()=>ee,Lu:()=>V,WW:()=>t,d:()=>ue,eS:()=>le,gp:()=>te,j:()=>ae,w9:()=>ie,yN:()=>ce});var M=u(15861),F=(u(29132),u(84792)),P=u(26584),z=u(63290),f=u(62208),x=u(37053),G=u(46367),v=u(82054),Q=u(95786),_=u(58775),O=u(56554),S=u(60466),B=u(85),j=u(65234);const K=z.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),V="http://www.opengis.net/def/crs/",se=`${V}OGC/1.3/CRS84`;function ie(r,o){return X.apply(this,arguments)}function X(){return(X=(0,M.Z)(function*(r,o,s={},a=5){const{links:c}=r,m=g(c,"items","application/geo+json")||g(c,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,f.Wi)(m))throw new P.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:h}=yield(0,F.default)(m.href,{signal:s.signal,query:{limit:a,...s.customParameters,token:s.apiKey},headers:{accept:"application/geo+json"}});yield(0,_.O3)(h);const p=(0,_.my)(h,{geometryType:o.geometryType}),w=o.fields||p.fields||[],A=null!=o.hasZ?o.hasZ:p.hasZ,$=p.geometryType,W=o.objectIdField||p.objectIdFieldName||"OBJECTID";let y=o.timeInfo;const N=w.find(l=>l.name===W);if(N)N.type="esriFieldTypeOID",N.editable=!1,N.nullable=!1;else{if(!p.objectIdFieldType)throw new P.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");w.unshift({name:W,alias:W,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(W!==p.objectIdFieldName){const l=w.find(I=>I.name===p.objectIdFieldName);l&&(l.type="esriFieldTypeInteger")}w===p.fields&&p.unknownFields.length>0&&K.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:p.unknownFields}});for(const l of w){if(null==l.name&&(l.name=l.alias),null==l.alias&&(l.alias=l.name),"esriFieldTypeOID"!==l.type&&"esriFieldTypeGlobalID"!==l.type&&(l.editable=null==l.editable||!!l.editable,l.nullable=null==l.nullable||!!l.nullable),!l.name)throw new P.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:l});if(!B.v.jsonValues.includes(l.type))throw new P.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${l.name}"`,{field:l})}if(y){const l=new S.Z(w);if(y.startTimeField){const I=l.get(y.startTimeField);I?(y.startTimeField=I.name,I.type="esriFieldTypeDate"):y.startTimeField=null}if(y.endTimeField){const I=l.get(y.endTimeField);I?(y.endTimeField=I.name,I.type="esriFieldTypeDate"):y.endTimeField=null}if(y.trackIdField){const I=l.get(y.trackIdField);I?y.trackIdField=I.name:(y.trackIdField=null,K.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:y}}))}y.startTimeField||y.endTimeField||(K.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:y}}),y=null)}return{drawingInfo:$?(0,O.bU)($):null,geometryType:$,fields:w,hasZ:!!A,objectIdField:W,timeInfo:y}})).apply(this,arguments)}function ae(r){return k.apply(this,arguments)}function k(){return(k=(0,M.Z)(function*(r,o={}){const{links:s}=r,a=g(s,"data","application/json")||g(s,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,f.Wi)(a))throw new P.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:c,customParameters:m,signal:h}=o,{data:p}=yield(0,F.default)(a.href,{signal:h,headers:{accept:"application/json"},query:{...m,token:c}});return p})).apply(this,arguments)}function ee(r){return C.apply(this,arguments)}function C(){return(C=(0,M.Z)(function*(r,o={}){const{links:s}=r,a=g(s,"conformance","application/json")||g(s,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,f.Wi)(a))throw new P.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:c,customParameters:m,signal:h}=o,{data:p}=yield(0,F.default)(a.href,{signal:h,headers:{accept:"application/json"},query:{...m,token:c}});return p})).apply(this,arguments)}function te(r){return R.apply(this,arguments)}function R(){return(R=(0,M.Z)(function*(r,o={}){const{apiKey:s,customParameters:a,signal:c}=o,{data:m}=yield(0,F.default)(r,{signal:c,headers:{accept:"application/json"},query:{...a,token:s}});return m})).apply(this,arguments)}function le(r){return Y.apply(this,arguments)}function Y(){return(Y=(0,M.Z)(function*(r,o={}){const s="application/vnd.oai.openapi+json;version=3.0",a=g(r.links,"service-desc",s);if((0,f.Wi)(a))return K.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:c,customParameters:m,signal:h}=o,{data:p}=yield(0,F.default)(a.href,{signal:h,headers:{accept:s},query:{...m,token:c}});return p})).apply(this,arguments)}function ue(r){const o=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(r)?.groups;if(!o)return null;const{authority:s,code:a}=o;switch(s.toLowerCase()){case"ogc":switch(a.toLowerCase()){case"crs27":return j.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return j.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const c=Number.parseInt(a,10);return Number.isNaN(c)?null:c}default:return null}}function ce(r,o,s){return e.apply(this,arguments)}function e(){return(e=(0,M.Z)(function*(r,o,s){const a=yield t(r,o,s);return(0,v.cn)(a)})).apply(this,arguments)}function t(r,o,s){return n.apply(this,arguments)}function n(){return(n=(0,M.Z)(function*(r,o,s){const{capabilities:{query:{maxRecordCount:a}},collection:c,layerDefinition:m,queryParameters:{apiKey:h,customParameters:p},spatialReference:w,supportedCrs:A}=r,{links:$}=c,W=g($,"items","application/geo+json")||g($,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,f.Wi)(W))throw new P.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:y,num:N,start:l,timeExtent:I,where:_e}=o;if(o.objectIds)throw new P.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const ge=j.Z.fromJSON(w),J=(0,f.Pt)(o.outSpatialReference,ge),ne=J.isWGS84?null:d(J,A),he=b(y,A),Ee=Z(I),Pe=E(_e),Ie=N??(null!=l&&void 0!==l?10:a),{data:L}=yield(0,F.default)(W.href,{...s,query:{...p,...he,crs:ne,datetime:Ee,query:Pe,limit:Ie,startindex:l,token:h},headers:{accept:"application/geo+json"}});let re=!1;L.links&&(re=!!L.links.find(oe=>"next"===oe.rel)),!re&&Number.isInteger(L.numberMatched)&&Number.isInteger(L.numberReturned)&&(re=L.numberReturned<L.numberMatched);const{fields:Me,globalIdField:Oe,hasM:Te,hasZ:pe,objectIdField:de}=m,fe=m.geometryType,ye=(0,_.lG)(L,{geometryType:fe,hasZ:pe,objectIdField:de});if(!ne&&J.isWebMercator)for(const U of ye)if((0,f.pC)(U.geometry)){const oe=(0,v.di)(U.geometry,fe,pe,!1);oe.spatialReference=j.Z.WGS84,U.geometry=(0,v.GH)((0,G.iV)(oe,J))}for(const U of ye)U.objectId=U.attributes[de];const je=ne||!ne&&J.isWebMercator?J.toJSON():x.Zn,D=new Q.Z;return D.exceededTransferLimit=re,D.features=ye,D.fields=Me,D.geometryType=fe,D.globalIdFieldName=Oe,D.hasM=Te,D.hasZ=pe,D.objectIdFieldName=de,D.spatialReference=je,D})).apply(this,arguments)}function d(r,o){const{isWebMercator:s,wkid:a}=r;if(!a)return null;const c=s?o[3857]??o[102100]??o[102113]??o[900913]:o[r.wkid];return c?`${V}${c}`:null}function T(r){if((0,f.Wi)(r))return"";const{xmin:o,ymin:s,xmax:a,ymax:c}=r;return`${o},${s},${a},${c}`}function Z(r){if((0,f.Wi)(r))return null;const{start:o,end:s}=r;return`${(0,f.pC)(o)?o.toISOString():".."}/${(0,f.pC)(s)?s.toISOString():".."}`}function E(r){return(0,f.Wi)(r)||!r||"1=1"===r?null:r}function b(r,o){if(!function i(r){return(0,f.pC)(r)&&"extent"===r.type}(r))return null;const{spatialReference:s}=r;if(!s||s.isWGS84)return{bbox:T(r)};const a=d(s,o);return(0,f.pC)(a)?{bbox:T(r),"bbox-crs":a}:s.isWebMercator?{bbox:T((0,G.iV)(r,j.Z.WGS84))}:null}function g(r,o,s){return r.find(a=>a.rel===o&&a.type===s)||r.find(a=>a.rel===o&&!a.type)}}}]);