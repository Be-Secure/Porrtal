"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[7534,3705],{30164:(Z,h,t)=>{t.d(h,{T:()=>p});var l=t(15861);const p={BingMapsLayer:(e=(0,l.Z)(function*(){return(yield t.e(2248).then(t.bind(t,72248))).default}),function(){return e.apply(this,arguments)}),BuildingSceneLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(9410),t.e(8592),t.e(676)]).then(t.bind(t,6189))).default});return function(){return e.apply(this,arguments)}}(),CSVLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(5625).then(t.bind(t,85625))).default});return function(){return e.apply(this,arguments)}}(),DimensionLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(7614)]).then(t.bind(t,17614))).default});return function(){return e.apply(this,arguments)}}(),ElevationLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(5810)]).then(t.bind(t,75810))).default});return function(){return e.apply(this,arguments)}}(),FeatureLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,80415))).default});return function(){return e.apply(this,arguments)}}(),GroupLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(5964).then(t.bind(t,25964))).default});return function(){return e.apply(this,arguments)}}(),GeoRSSLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(6306).then(t.bind(t,96306))).default});return function(){return e.apply(this,arguments)}}(),GeoJSONLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(2903).then(t.bind(t,72903))).default});return function(){return e.apply(this,arguments)}}(),ImageryLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(1533),t.e(1913),t.e(9217)]).then(t.bind(t,39217))).default});return function(){return e.apply(this,arguments)}}(),ImageryTileLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(1533),t.e(8594),t.e(1913),t.e(6455),t.e(8592),t.e(6329)]).then(t.bind(t,86329))).default});return function(){return e.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(7867)]).then(t.bind(t,67867))).default});return function(){return e.apply(this,arguments)}}(),KMLLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(2701).then(t.bind(t,12701))).default});return function(){return e.apply(this,arguments)}}(),LineOfSightLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(8572)]).then(t.bind(t,29457))).default});return function(){return e.apply(this,arguments)}}(),MapImageLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8887)]).then(t.bind(t,48887))).default});return function(){return e.apply(this,arguments)}}(),MapNotesLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9114)]).then(t.bind(t,49114))).default});return function(){return e.apply(this,arguments)}}(),OGCFeatureLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(9628),t.e(2955)]).then(t.bind(t,36554))).default});return function(){return e.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(1591)]).then(t.bind(t,71591))).default});return function(){return e.apply(this,arguments)}}(),OrientedImageryLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(725).then(t.bind(t,60725))).default});return function(){return e.apply(this,arguments)}}(),PointCloudLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(7155)]).then(t.bind(t,7155))).default});return function(){return e.apply(this,arguments)}}(),RouteLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(403),t.e(4940)]).then(t.bind(t,84940))).default});return function(){return e.apply(this,arguments)}}(),SceneLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(8592),t.e(7559)]).then(t.bind(t,27559))).default});return function(){return e.apply(this,arguments)}}(),StreamLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(289).then(t.bind(t,70289))).default});return function(){return e.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(465).then(t.bind(t,20465))).default});return function(){return e.apply(this,arguments)}}(),TileLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8592),t.e(9735)]).then(t.bind(t,59735))).default});return function(){return e.apply(this,arguments)}}(),UnknownLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(6339).then(t.bind(t,56339))).default});return function(){return e.apply(this,arguments)}}(),UnsupportedLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(6240).then(t.bind(t,16240))).default});return function(){return e.apply(this,arguments)}}(),VectorTileLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8364),t.e(8592),t.e(6445)]).then(t.bind(t,10193))).default});return function(){return e.apply(this,arguments)}}(),VoxelLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(157),t.e(6007)]).then(t.bind(t,26007))).default});return function(){return e.apply(this,arguments)}}(),WebTileLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(8592).then(t.bind(t,28678))).default});return function(){return e.apply(this,arguments)}}(),WFSLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(3774),t.e(8762)]).then(t.bind(t,98762))).default});return function(){return e.apply(this,arguments)}}(),WMSLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6894)]).then(t.bind(t,46894))).default});return function(){return e.apply(this,arguments)}}(),WMTSLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(4223)]).then(t.bind(t,64223))).default});return function(){return e.apply(this,arguments)}}()};var e},88755:(Z,h,t)=>{t.d(h,{Y:()=>u,h:()=>e});var l=t(21726),p=t(84687);function e(f){return{origin:"portal-item",url:(0,l.mN)(f.itemUrl),portal:f.portal||p.Z.getDefault(),portalItem:f,readResourcePaths:[]}}function u(f){return{origin:"portal-item",messages:[],writtenProperties:[],url:f.itemUrl?(0,l.mN)(f.itemUrl):null,portal:f.portal||p.Z.getDefault(),portalItem:f}}},83705:(Z,h,t)=>{t.r(h),t.d(h,{getFirstLayerOrTableId:()=>R,getNumLayersAndTables:()=>D,getSubtypeGroupLayerIds:()=>U,load:()=>M,preprocessFSItemData:()=>j});var l=t(15861),p=t(26584),e=t(44917),u=t(38305),f=t(84687),g=t(55463),v=t(88755),O=t(37281),C=t(39683),E=t(45205);function M(r,s){return S.apply(this,arguments)}function S(){return(S=(0,l.Z)(function*(r,s){const n=r.instance.portalItem;if(n&&n.id)return yield n.load(s),c(r),m(r,s)})).apply(this,arguments)}function c(r){const s=r.instance.portalItem;if(!r.supportedTypes.includes(s.type))throw new p.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:s.type,expectedType:r.supportedTypes.join(", ")})}function m(r,s){return d.apply(this,arguments)}function d(){return(d=(0,l.Z)(function*(r,s){const n=r.instance,a=n.portalItem,{url:o,title:i}=a,y=(0,v.h)(a);if("group"===n.type)return n.read({title:i},y),I(n,r);o&&n.read({url:o},y);const L=yield W(r,s);return L&&n.read(L,y),n.resourceReferences={portalItem:a,paths:y.readResourcePaths},"subtype-group"!==n.type&&n.read({title:i},y),(0,C.y)(n,y)})).apply(this,arguments)}function I(r,s){let n;const a=r.portalItem.type,o=s.layerModuleTypeMap,i=(0,O._$)(r.portalItem,"Oriented Imagery Layer")??!1;switch(a){case"Feature Service":n=i?o.OrientedImageryLayer:o.FeatureLayer;break;case"Stream Service":n=o.StreamLayer;break;case"Scene Service":n=o.SceneLayer;break;case"Feature Collection":n=o.FeatureLayer;break;default:throw new p.Z("portal:unsupported-item-type-as-group",`The item type '${a}' is not supported as a 'IGroupLayer'`)}let y;return n().then(L=>(y=L,W(s))).then(function(){var L=(0,l.Z)(function*(P){let K=()=>y;if("Feature Service"===a){if(U(P=yield j(P,r.portalItem.url)).length){const $=o.SubtypeGroupLayer,J=yield $();K=z=>"SubtypeGroupLayer"===z.layerType?J:y}return T(r,K,P)}return D(P)>0?T(r,K,P):function B(r,s){return r.portalItem.url?(0,E.b)(r.portalItem.url).then(n=>{function a(o){return{id:o.id,name:o.name}}n&&T(r,s,{layers:n.layers?.map(a),tables:n.tables?.map(a)})}):Promise.resolve()}(r,K)});return function(P){return L.apply(this,arguments)}}())}function T(r,s,n){let a=n.layers||[];const o=n.tables||[];if("Feature Collection"===r.portalItem.type&&(a.forEach(i=>{"Table"===i?.layerDefinition?.type&&o.push(i)}),a=a.filter(i=>"Table"!==i?.layerDefinition?.type)),"coverage"in n){const i=function x(r){const{coverage:s}=r;if(!s)return null;const n=new URL(s);if(s.toLowerCase().includes("item.html")){const a=n.searchParams.get("id");return e.Z.fromPortalItem({portalItem:new g.default({id:a,url:n.origin})})}if((0,u.B5)(s))return e.Z.fromArcGISServerUrl({url:s});throw new p.Z("portal:oriented-imagery-layer-coverage","the provided coverage url couldn't be loaded as a layer")}(n);r.add(i)}a.reverse().forEach(i=>{const y=A(r,s(i),n,i);r.add(y)}),o.reverse().forEach(i=>{const y=A(r,s(i),n,i);r.tables.add(y)})}function A(r,s,n,a){const o=new s({portalItem:r.portalItem.clone(),layerId:a.id});if("subtype-group"!==o.type&&(o.sublayerTitleMode="service-name"),"Feature Collection"===r.portalItem.type){const i={origin:"portal-item",portal:r.portalItem.portal||f.Z.getDefault()};o.read(a,i);const y=n.showLegend;null!=y&&o.read({showLegend:y},i)}return o}function W(r,s){if(!1===r.supportsData)return Promise.resolve(void 0);const n=r.instance;return n.portalItem.fetchData("json",s).catch(()=>null).then(a=>{if(function F(r){return"stream"!==r.type&&"oriented-imagery"!==r.type&&"layerId"in r}(n)){let o,i=!0;if(a&&D(a)>0){if(null==n.layerId){const y=U(a);n.layerId="subtype-group"===n.type?y?.[0]:R(a)}o=function G(r,s){const{layerId:n}=s,a=r.layers?.find(o=>o.id===n)||r.tables?.find(o=>o.id===n);return a&&function V(r,s){return!("feature"===s.type&&"layerType"in r&&"SubtypeGroupLayer"===r.layerType||"subtype-group"===s.type&&!("layerType"in r))}(a,s)?a:null}(a,n),o&&(1===D(a)&&(i=!1),null!=a.showLegend&&(o.showLegend=a.showLegend))}return i&&"service-name"!==n.sublayerTitleMode&&(n.sublayerTitleMode="item-title-and-service-name"),o}return a})}function j(r,s){return N.apply(this,arguments)}function N(){return(N=(0,l.Z)(function*(r,s){if(null==r?.layers||null==r?.tables){const n=yield(0,E.b)(s);(r=r||{}).layers=r.layers||n?.layers,r.tables=r.tables||n?.tables}return r})).apply(this,arguments)}function R(r){const s=r.layers;if(s&&s.length)return s[0].id;const n=r.tables;return n&&n.length?n[0].id:null}function D(r){return(r?.layers?.length??0)+(r?.tables?.length??0)}function U(r){const s=[];return r?.layers?.forEach(n=>{"SubtypeGroupLayer"===n.layerType&&s.push(n.id)}),s}},37281:(Z,h,t)=>{t.d(h,{$o:()=>E,Kz:()=>S,_$:()=>O,ck:()=>C,qj:()=>v});var l=t(15861),p=t(55915),e=t(65234),u=t(46367);function f(c){return g.apply(this,arguments)}function g(){return(g=(0,l.Z)(function*(c){const m=c.spatialReference;if(m.isWGS84)return c.clone();if(m.isWebMercator)return(0,u.Sx)(c);const d=e.Z.WGS84;return yield(0,p.iQ)(m,d),(0,p.iV)(c,d)})).apply(this,arguments)}function v(c,m){if(!O(c,m)){const d=c.typeKeywords;d?d.push(m):c.typeKeywords=[m]}}function O(c,m){return!!c.typeKeywords?.includes(m)}function C(c,m){const d=c.typeKeywords;if(d){const I=d.indexOf(m);I>-1&&d.splice(I,1)}}function E(c){return M.apply(this,arguments)}function M(){return(M=(0,l.Z)(function*(c){const m=c.clone().normalize();let d;if(m.length>1)for(const I of m)d?I.width>d.width&&(d=I):d=I;else d=m[0];return f(d)})).apply(this,arguments)}const S={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"}},7534:(Z,h,t)=>{t.r(h),t.d(h,{fromItem:()=>O,selectLayerClassPath:()=>E});var l=t(15861),p=t(26584),e=t(30164),u=t(55463),f=t(83705),g=t(37281),v=t(45205);function O(n){return!n.portalItem||n.portalItem instanceof u.default||(n={...n,portalItem:new u.default(n.portalItem)}),function C(n){return n.load().then(E).then(M)}(n.portalItem).then(a=>{const o={portalItem:n.portalItem,...a.properties};return new a.constructor(o)})}function E(n){switch(n.type){case"Map Service":return function S(n){return function V(n){return(0,v.b)(n.url).then(a=>a.tileInfo)}(n).then(a=>a?{className:"TileLayer"}:{className:"MapImageLayer"})}(n);case"Feature Service":return function c(n){return(0,g._$)(n,"Oriented Imagery Layer")?function U(n){return n.load().then(()=>n.fetchData()).then(a=>a.coverage?{className:"GroupLayer"}:{className:"OrientedImageryLayer",properties:a})}(n):r(n).then(a=>{if("object"==typeof a){const o={};return null!=a.id&&(o.layerId=a.id),{className:a.className||"FeatureLayer",properties:o}}return{className:"GroupLayer"}})}(n);case"Feature Collection":return function d(n){return I.apply(this,arguments)}(n);case"Scene Service":return function m(n){return r(n).then(a=>{if("object"==typeof a){const o={};let i;if(null!=a.id?(o.layerId=a.id,i=`${n.url}/layers/${a.id}`):i=n.url,Array.isArray(n.typeKeywords)&&n.typeKeywords.length>0){const y={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(const L of Object.keys(y))if(n.typeKeywords.includes(L))return{className:y[L]}}return(0,v.b)(i).then(y=>{let L="SceneLayer";const P={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return y&&y.layerType&&P[y.layerType]&&(L=P[y.layerType]),{className:L,properties:o}})}return!1===a?(0,v.b)(n.url).then(o=>"Voxel"===o?.layerType?{className:"VoxelLayer"}:{className:"GroupLayer"}):{className:"GroupLayer"}})}(n);case"Image Service":return function B(n){return T.apply(this,arguments)}(n);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"CSV":return{className:"CSVLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return Promise.reject(new p.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:n.type}))}}function M(n){return(0,e.T[n.className])().then(a=>({constructor:a,properties:n.properties}))}function I(){return(I=(0,l.Z)(function*(n){yield n.load();const a=(0,g._$)(n,"Map Notes"),o=(0,g._$)(n,"Markup");if(a||o)return{className:"MapNotesLayer"};if((0,g._$)(n,"Route Layer"))return{className:"RouteLayer"};const i=yield n.fetchData();return 1===(0,f.getNumLayersAndTables)(i)?{className:"FeatureLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function T(){return(T=(0,l.Z)(function*(n){yield n.load();const a=n.typeKeywords?.map(P=>P.toLowerCase())??[];if(a.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(a.includes("tiled imagery"))return{className:"ImageryTileLayer"};const o=(yield n.fetchData())?.layerType;if("ArcGISTiledImageServiceLayer"===o)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===o)return{className:"ImageryLayer"};const i=yield(0,v.b)(n.url),y=i.cacheType?.toLowerCase(),L=i.capabilities?.toLowerCase().includes("tilesonly");return"map"===y||L?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}})).apply(this,arguments)}function r(n){return!n.url||n.url.match(/\/\d+$/)?Promise.resolve({}):n.load().then(()=>n.fetchData()).then(function(){var a=(0,l.Z)(function*(o){if("Feature Service"===n.type){const i=s(yield(0,f.preprocessFSItemData)(o,n.url));if("object"==typeof i){const y=(0,f.getSubtypeGroupLayerIds)(o);i.className=y.includes(i.id)?"SubtypeGroupLayer":"FeatureLayer"}return i}return(0,f.getNumLayersAndTables)(o)>0?s(o):(0,v.b)(n.url).then(s)});return function(o){return a.apply(this,arguments)}}())}function s(n){return 1===(0,f.getNumLayersAndTables)(n)&&{id:(0,f.getFirstLayerOrTableId)(n)}}},45205:(Z,h,t)=>{t.d(h,{b:()=>e});var l=t(15861),p=t(84792);function e(f){return u.apply(this,arguments)}function u(){return(u=(0,l.Z)(function*(f){const{data:g}=yield(0,p.default)(f,{responseType:"json",query:{f:"json"}});return g})).apply(this,arguments)}}}]);