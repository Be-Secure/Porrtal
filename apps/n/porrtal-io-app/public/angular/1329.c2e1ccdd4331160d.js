/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[1329],{50017:(K,j,T)=>{T.d(j,{Y6:()=>Y});var R,w,G=T(67831),m=T(99770),C=T(84161),A=T(28093),N=T(993),L=T(4794),S=T(72642);(w=R||(R={}))[w.Z=0]="Z",w[w.M=1]="M";class H{constructor(i){this.spatialReference=i}createVector(){return this._tag((0,m.a)())}pointToVector(i){return this._tag((0,m.f)(i.x,i.y))}arrayToVector(i){return this._tag((0,m.f)(i[0],i[1]))}vectorToArray(i){return[i[0],i[1]]}pointToArray(i){return[i.x,i.y]}vectorToPoint(i,d=new S.Z){return d.x=i[0],d.y=i[1],d.z=void 0,d.m=void 0,d.spatialReference=this.spatialReference,d}arrayToPoint(i,d=new S.Z){return d.x=i[0],d.y=i[1],d.z=void 0,d.m=void 0,d.spatialReference=this.spatialReference,d}vectorToDehydratedPoint(i,d={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return d.x=i[0],d.y=i[1],d.z=void 0,d.m=void 0,d.hasZ=!1,d.hasM=!1,d.spatialReference=this.spatialReference,d}lerp(i,d,p,u){return(0,G.l)(u,i,d,p)}addDelta(i,d,p){i[0]+=d,i[1]+=p}distance(i,d){return(0,G.d)(i,d)}getZ(i,d){return d}hasZ(){return!1}getM(i,d){return d}hasM(){return!1}clone(i){return this._tag((0,m.b)(i))}copy(i,d){return(0,G.c)(d,i)}fromXYZ(i){return this._tag((0,m.f)(i[0],i[1]))}toXYZ(i,d=(0,A.c)()){return(0,C.s)(d,i[0],i[1],0)}equals(i,d){return(0,G.o)(i,d)}_tag(i){return i}}class k{constructor(i,d){this._valueType=i,this.spatialReference=d}createVector(){return this._tag((0,A.c)())}pointToVector(i){return this._tag((0,A.f)(i.x,i.y,this._valueType===R.Z?i.z:i.m))}arrayToVector(i){return this._tag((0,A.f)(i[0],i[1],i[2]||0))}vectorToArray(i){return[i[0],i[1],i[2]]}pointToArray(i){return this._valueType===R.Z?[i.x,i.y,i.z]:[i.x,i.y,i.m]}vectorToPoint(i,d=new S.Z){return d.x=i[0],d.y=i[1],d.z=this._valueType===R.Z?i[2]:void 0,d.m=this._valueType===R.M?i[2]:void 0,d.spatialReference=this.spatialReference,d}arrayToPoint(i,d=new S.Z){return d.x=i[0],d.y=i[1],d.z=this._valueType===R.Z?i[2]:void 0,d.m=this._valueType===R.M?i[2]:void 0,d.spatialReference=this.spatialReference,d}vectorToDehydratedPoint(i,d={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){const p=this._valueType===R.Z,u=this._valueType===R.M;return d.x=i[0],d.y=i[1],d.z=p?i[2]:void 0,d.m=u?i[2]:void 0,d.hasZ=p,d.hasM=u,d.spatialReference=this.spatialReference,d}lerp(i,d,p,u){return(0,C.h)(u,i,d,p)}addDelta(i,d,p,u){i[0]+=d,i[1]+=p,this._valueType===R.Z&&(i[2]+=u)}distance(i,d){return this._valueType===R.Z?(0,C.i)(i,d):(0,G.d)(i,d)}getZ(i,d){return this._valueType===R.Z?i[2]:d}hasZ(){return this._valueType===R.Z}getM(i,d){return this._valueType===R.M?i[2]:d}hasM(){return this._valueType===R.M}clone(i){return this._tag((0,A.d)(i))}copy(i,d){return(0,C.c)(d,i)}fromXYZ(i,d=0,p=0){return this._tag((0,A.f)(i[0],i[1],this._valueType===R.Z?i.length>2?i[2]:d:p))}toXYZ(i,d=(0,A.c)()){return(0,C.s)(d,i[0],i[1],this._valueType===R.Z?i[2]:0)}equals(i,d){return(0,C.F)(i,d)}_tag(i){return i}}class X{constructor(i){this.spatialReference=i}createVector(){return this._tag((0,L.c)())}pointToVector(i){return this._tag((0,L.f)(i.x,i.y,i.z,i.m))}arrayToVector(i){return this._tag((0,L.f)(i[0],i[1],i[2]||0,i[3]||0))}vectorToArray(i){return[i[0],i[1],i[2],i[3]]}pointToArray(i){return[i.x,i.y,i.z,i.m]}vectorToPoint(i,d=new S.Z){return d.x=i[0],d.y=i[1],d.z=i[2],d.m=i[3],d.spatialReference=this.spatialReference,d}arrayToPoint(i,d=new S.Z){return d.x=i[0],d.y=i[1],d.z=i[2],d.m=i[3],d.spatialReference=this.spatialReference,d}vectorToDehydratedPoint(i,d={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"}){return d.x=i[0],d.y=i[1],d.z=i[2],d.m=i[3],d.hasZ=!0,d.hasM=!0,d.spatialReference=this.spatialReference,d}lerp(i,d,p,u){return(0,N.l)(u,i,d,p)}addDelta(i,d,p,u){i[0]+=d,i[1]+=p,i[2]+=u}distance(i,d){return(0,C.i)(i,d)}getZ(i){return i[2]}hasZ(){return!0}getM(i){return i[3]}hasM(){return!0}clone(i){return this._tag((0,L.b)(i))}copy(i,d){return(0,N.c)(d,i)}fromXYZ(i,d=0,p=0){return this._tag((0,L.f)(i[0],i[1],i.length>2?i[2]:d,p))}toXYZ(i,d=(0,A.c)()){return(0,C.s)(d,i[0],i[1],i[2])}equals(i,d){return(0,N.h)(i,d)}_tag(i){return i}}function Y(w,i,d){return w&&i?new X(d):i?new k(R.M,d):w?new k(R.Z,d):new H(d)}},466:(K,j,T)=>{T.d(j,{wA:()=>w,kS:()=>Y,XE:()=>i,Xz:()=>X});var G=T(85931),m=T(61885),C=T(62208),A=T(37118),N=T(55214),L=T(50017),S=T(37053),R=T(59617);class X{constructor(p){this.component=p,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(p){this._pos=p,this.component.unnormalizeVertexPositions()}}class Y{constructor(p,u,v){this.component=p,this.leftVertex=u,this.rightVertex=v,this.type="edge",u.rightEdge=this,v.leftEdge=this}}class w{constructor(p,u){this._spatialReference=p,this._viewingMode=u,this.vertices=[],this.edges=[]}unnormalizeVertexPositions(){this.vertices.length<=1||function H(d,p){if(!p.supported)return;let u=1/0,v=-1/0;const E=p.upperBoundX-p.lowerBoundX;d.forEach(y=>{let g=y.pos[0];for(;g<p.lowerBoundX;)g+=E;for(;g>p.upperBoundX;)g-=E;u=Math.min(u,g),v=Math.max(v,g),y.pos[0]=g});const _=v-u;E-_<_&&d.forEach(y=>{y.pos[0]<0&&(y.pos[0]+=E)})}(this.vertices,function k(d,p){const u=(0,S.C5)(d);return p===R.JY.Global&&u?{supported:!0,lowerBoundX:u.valid[0],upperBoundX:u.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}(this._spatialReference,this._viewingMode))}updateVertexIndex(p,u){if(0===this.vertices.length)return;const v=this.vertices[0];let E=null,_=p,y=u;do{E=_,E.index=y++,_=E.rightEdge?E.rightEdge.rightVertex:null}while(null!=_&&_!==v);E.leftEdge&&E!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(E),this.vertices.length-1)}getFirstVertex(){return 0===this.vertices.length?null:this.vertices[0]}getLastVertex(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}isClosed(){return this.vertices.length>2&&null!==this.vertices[0].leftEdge}swapVertices(p,u){const v=this.vertices[p];this.vertices[p]=this.vertices[u],this.vertices[u]=v}iterateVertices(p){if(0===this.vertices.length)return;const u=this.vertices[0];let v=u;do{p(v,v.index),v=(0,C.pC)(v.rightEdge)?v.rightEdge.rightVertex:null}while(v!==u&&null!=v)}}class i extends m.Z{constructor(p,u){super(),this.type=p,this.coordinateHelper=u,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon()}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}notifyChanges(p){this._dirty=!0,this.emit("change",p)}_toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const p=[],u=this.coordinateHelper.vectorToArray;for(const v of this.components){if(v.vertices.length<1)continue;const E=[];let _=v.vertices.find(g=>null==g.leftEdge);const y=_;do{E.push(u(_.pos)),_=_.rightEdge?_.rightEdge.rightVertex:null}while(_&&_!==y);p.push(E)}return new N.Z({paths:p,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const p=[],u=this.coordinateHelper.vectorToArray;for(const v of this.components){if(v.vertices.length<1)continue;const E=[],_=v.vertices[0];let y=_;const g=y;do{E.push(u(y.pos)),y=(0,C.pC)(y.rightEdge)?y.rightEdge.rightVertex:null}while(y&&y!==g);v.isClosed()&&E.push(u(_.pos)),p.push(E)}return new A.Z({rings:p,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(p,u){const v=p.spatialReference,E=(0,L.Y6)(p.hasZ,p.hasM,v),_=new i(p.type,E);switch(p.type){case"polygon":{const y=p.rings;for(let g=0;g<y.length;++g){const M=y[g],D=new w(v,u),I=M.length>2&&(0,G.fS)(M[0],M[M.length-1]),U=I?M.length-1:M.length;for(let Z=0;Z<U;++Z){const W=E.arrayToVector(M[Z]),z=new X(D);D.vertices.push(z),z.pos=W,z.index=Z}const O=D.vertices.length-1;for(let Z=0;Z<O;++Z){const P=new Y(D,D.vertices[Z],D.vertices[Z+1]);D.edges.push(P)}if(I){const Z=new Y(D,D.vertices[D.vertices.length-1],D.vertices[0]);D.edges.push(Z)}_.components.push(D)}break}case"polyline":for(const y of p.paths){const g=new w(v,u),M=y.length;for(let I=0;I<M;++I){const U=E.arrayToVector(y[I]),O=new X(g);g.vertices.push(O),O.pos=U,O.index=I}const D=g.vertices.length-1;for(let I=0;I<D;++I){const Z=new Y(g,g.vertices[I],g.vertices[I+1]);g.edges.push(Z)}_.components.push(g)}break;case"point":{const y=new w(v,u),g=new X(y);g.index=0,g.pos=E.pointToVector(p),y.vertices.push(g),_.components.push(y);break}}return _}}},97737:(K,j,T)=>{T.d(j,{c:()=>z});var A,P,S,G=T(61885),m=T(62208),C=T(466);(P=A||(A={}))[P.NEW_STEP=0]="NEW_STEP",P[P.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS";class N{constructor(e,h,l){this._editGeometry=e,this._component=h,this._pos=l,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";(0,m.Wi)(this._addedVertex)&&(e="apply",this._addedVertex=new C.Xz(this._component));const h=this._component.getLastVertex();if((0,m.Wi)(h))this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let l=null;h.rightEdge&&(this._originalEdge=h.rightEdge,l=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,(0,m.Wi)(this._left)&&(this._left=new C.kS(this._component,h,this._addedVertex)),this._component.edges.push(this._left),h.rightEdge=this._left,(0,m.pC)(this._originalEdge)&&(0,m.pC)(l)&&((0,m.Wi)(this._right)&&(this._right=new C.kS(this._component,this._addedVertex,l)),this._component.edges.push(this._right),l.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,h.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){(0,m.Wi)(this._addedVertex)||(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),(0,m.pC)(this._left)&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),(0,m.pC)(this._right)&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),(0,m.pC)(this._originalEdge)&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),(0,m.pC)(this._left)?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}}class L{constructor(e,h,l){this._editGeometry=e,this._vertices=h,this.operation=l,this._undone=!1}apply(){this._vertices.forEach(e=>this.operation.apply(e)),this._editGeometry.components.forEach(e=>e.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach(e=>this.operation.undo(e)),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let h=0;h<e._vertices.length;++h)if(e._vertices[h]!==this._vertices[h])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof L&&this.canAccumulate(e))&&(this._vertices.forEach(h=>this.operation.accumulate(h,e.operation)),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach(h=>h.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}}!function(P){P[P.CUMULATIVE=0]="CUMULATIVE",P[P.REPLACE=1]="REPLACE"}(S||(S={}));class R{constructor(e,h,l=0){this._editGeometry=e,this._vertices=h,this._minNumberOfVertices=l,this.removedVertices=null}apply(){let e="redo";if(null==this.removedVertices){const h=this.removedVertices=[];this._vertices.forEach(l=>{const x=this._removeVertex(l);(0,m.pC)(x)&&h.push(x)}),e="apply"}else this.removedVertices.forEach(h=>{this._removeVertex(h.removedVertex)});this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){this.removedVertices?.forEach(e=>{this._undoRemoveVertex(e)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const h=e.component;if(h.vertices.length<=this._minNumberOfVertices)return null;const l={removedVertex:e,createdEdge:null},x=e.leftEdge,V=e.rightEdge;return h.vertices.splice(h.vertices.indexOf(e),1),x&&(h.edges.splice(h.edges.indexOf(x),1),x.leftVertex.rightEdge=null),V&&(h.edges.splice(h.edges.indexOf(V),1),V.rightVertex.leftEdge=null),0===e.index&&V&&this._vertices.length>0&&h.swapVertices(h.vertices.indexOf(V.rightVertex),0),x&&V&&(l.createdEdge=new C.kS(h,x.leftVertex,V.rightVertex),h.edges.push(l.createdEdge)),V&&h.updateVertexIndex(V.rightVertex,V.rightVertex.index-1),l}_undoRemoveVertex(e){const h=e.removedVertex,l=e.removedVertex.component,x=h.leftEdge,V=h.rightEdge;e.createdEdge&&l.edges.splice(l.edges.indexOf(e.createdEdge),1),l.vertices.push(h),x&&(l.edges.push(x),x.leftVertex.rightEdge=x),V&&(l.edges.push(V),V.rightVertex.leftEdge=V),l.updateVertexIndex(h,h.index)}}class H{constructor(e,h,l){this._editGeometry=e,this._edge=h,this._t=l,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const h=this._edge,l=h.component,x=h.leftVertex,V=h.rightVertex;l.edges.splice(l.edges.indexOf(h),1),(0,m.Wi)(this.createdVertex)&&(e="apply",this.createdVertex=new C.Xz(h.component)),l.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(h.leftVertex.pos,h.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),(0,m.Wi)(this._left)&&(this._left=new C.kS(l,x,this.createdVertex)),this._left.leftVertex.leftEdge?l.edges.push(this._left):l.edges.unshift(this._left),x.rightEdge=this._left,(0,m.Wi)(this._right)&&(this._right=new C.kS(l,this.createdVertex,V)),l.edges.push(this._right),V.leftEdge=this._right,l.updateVertexIndex(this.createdVertex,x.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if((0,m.Wi)(this.createdVertex)||(0,m.Wi)(this._left)||(0,m.Wi)(this._right))return null;const e=this._edge,h=e.component,V=this.createdVertex.leftEdge?.leftVertex,B=this.createdVertex.rightEdge?.rightVertex;h.vertices.splice(h.vertices.indexOf(this.createdVertex),1),h.edges.splice(h.edges.indexOf(this._left),1),h.edges.splice(h.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?h.edges.push(this._edge):h.edges.unshift(this._edge),V&&(V.rightEdge=e),B&&(B.leftEdge=e),V&&h.updateVertexIndex(V,V.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}class k{constructor(e,h,l){this._editGeometry=e,this._vertex=h,this._pos=l}apply(){const e=(0,m.Wi)(this._originalPosition);e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=(0,m.Wg)(this._originalPosition),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof k&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach(h=>h.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}}var X=T(85931);class Y{constructor(e,h){this._editGeometry=e,this._component=h,this._createdEdge=null}apply(){let e="redo";if((0,m.Wi)(this._createdEdge)){e="apply";const h=this._component.getFirstVertex(),l=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||(0,m.Wi)(h)||(0,m.Wi)(l))return;this._createdEdge=new C.kS(this._component,l,h)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){(0,m.Wi)(this._createdEdge)||((0,X.Od)(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}class w{constructor(e,h,l,x){this._helper=e,this.dx=h,this.dy=l,this.dz=x}_move(e,h,l,x){this._helper.addDelta(e.pos,h,l,x)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof w}accumulate(e,h){this._move(e,h.dx,h.dy,h.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}}var i=T(21286),d=T(67831),p=T(99770),u=T(84161),v=T(28093),E=T(90014),_=T(34054),y=T(396);class g{constructor(e,h,l,x=0,V=U.IMMEDIATE){this._helper=e,this._planeType=h,this._edge=l,this.distance=x,this._plane=(0,E.Ue)(),this._offsetPlane=(0,E.Ue)(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,V===U.IMMEDIATE&&this._initialize()}get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){const e=this._toXYZ(this._edge.leftVertex.pos),h=this._toXYZ(this._edge.leftVertex.leftEdge?.leftVertex?.pos),l=this._toXYZ(this._edge.rightVertex.pos),x=this._toXYZ(this._edge.rightVertex.rightEdge?.rightVertex?.pos);this._edgeDirection=(0,u.r)((0,v.c)(),e,l),this._left=this._computeNeighbor(e,h,this._edgeDirection),this._right=this._computeNeighbor(l,x,this._edgeDirection)}_toXYZ(e){return(0,m.pC)(e)?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,h,l){if((0,m.Wi)(h))return{start:e,end:h,direction:(0,v.f)(-l[1],l[0],0),isOriginalDirection:!0};const x=(0,u.r)((0,v.c)(),e,h),V=!this._passesBisectingAngleThreshold(x,l);return{start:e,end:h,direction:V?this._bisectVectorsPerpendicular(l,x):x,isOriginalDirection:!V}}_passesBisectingAngleThreshold(e,h){const l=Math.abs((0,_.EU)(h,e));return l>=M&&l<=Math.PI-M}_bisectVectorsPerpendicular(e,h){const l=(0,u.e)(e,h)<0?e:(0,u.o)((0,v.c)(),e),x=Math.abs((0,u.e)(l,h));if(!(x<D||x>1-D))return this._bisectDirection(l,h);const V=(0,u.f)((0,v.c)(),l,[0,0,1]);return(0,u.n)(V,V)}_bisectDirection(e,h){const l=(0,u.a)((0,v.c)(),e,h);return(0,u.n)(l,l)}_initializePlane(){const e=this._computeNormalDirection(this._left),h=this._computeNormalDirection(this._right);(0,u.e)(e,h)<0&&(0,u.o)(h,h),(0,E.Yq)(this._left.start,this._bisectDirection(e,h),this._plane)}_computeNormalDirection(e){const h=(0,u.f)((0,v.c)(),e.direction,this._edgeDirection);(0,u.n)(h,h);const l=(0,u.f)((0,v.c)(),this._edgeDirection,h);return this._planeType===I.XY&&(l[2]=0),(0,u.n)(l,l)}_initializeDistanceConstraints(){(0,m.pC)(this._left.end)&&!this.requiresSplitEdgeLeft&&this._updateDistanceConstraint((0,E.jH)(this._plane,this._left.end)),(0,m.pC)(this._right.end)&&!this.requiresSplitEdgeRight&&this._updateDistanceConstraint((0,E.jH)(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const h=(0,E.mJ)(e),l=this._edgeDirection,x=(0,u.a)((0,v.c)(),this._left.start,this._left.direction),V=(0,u.a)((0,v.c)(),this._right.start,this._right.direction),B=this._pointInBasis2D((0,p.a)(),h,l,this._left.start),b=this._pointInBasis2D((0,p.a)(),h,l,x),Q=this._pointInBasis2D((0,p.a)(),h,l,this._right.start),$=this._pointInBasis2D((0,p.a)(),h,l,V),[J]=(0,y.dU)({start:b,end:B,type:y.SP.LINE},{start:$,end:Q,type:y.SP.LINE});if(!J)return;const F=(0,d.a)((0,p.a)(),B,b);(0,d.f)(F,F);const q=(0,d.a)((0,p.a)(),J,b),ee=(0,d.h)(F,q),te=(0,u.a)((0,v.c)(),x,(0,u.g)((0,v.c)(),this._left.direction,-ee)),ie=(0,E.jH)(e,te);this._updateDistanceConstraint(ie)}_pointInBasis2D(e,h,l,x){return e[0]=(0,_.SR)(h,x),e[1]=(0,_.SR)(l,x),e}_offset(e,h){Number.isFinite(this._minDistance)&&(h=Math.max(this._minDistance,h)),Number.isFinite(this._maxDistance)&&(h=Math.min(this._maxDistance,h)),(0,E.JG)(this._offsetPlane,this._plane),this._offsetPlane[3]-=h;const l=(V,B,b)=>(0,m.pC)(B)&&(0,E.fn)(this._offsetPlane,V,(0,u.a)((0,v.c)(),V,B),b),x=(0,v.c)();(e===this._edge.leftVertex?l(this._left.start,this._left.direction,x):l(this._right.start,this._right.direction,x))&&this._helper.copy(this._helper.fromXYZ(x,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=(0,E.Ac)(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return(0,E.jH)(this.plane,this._pointToXYZ(e))}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof g&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&(0,u.F)((0,E.mJ)(this._plane),(0,E.mJ)(e._plane))}accumulate(e,h){this._offset(e,this._plane[3]-h._plane[3]+h.distance)}accumulateParams(e){this.distance=e.distance-e._plane[3]+this._plane[3]}clone(){const e=new g(this._helper,this._planeType,this._edge,this.distance,U.DEFERRED);return(0,E.JG)(e._plane,this._plane),(0,E.JG)(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=(0,u.c)((0,v.c)(),this._edgeDirection),e}_maybeEqualsVec3(e,h){return(0,m.Wi)(e)&&(0,m.Wi)(h)||(0,m.pC)(e)&&(0,m.pC)(h)&&(0,u.F)(e,h)}_cloneNeighbor({start:e,end:h,direction:l,isOriginalDirection:x}){return{start:(0,u.c)((0,v.c)(),e),end:(0,m.pC)(h)?(0,u.c)((0,v.c)(),h):null,direction:(0,u.c)((0,v.c)(),l),isOriginalDirection:x}}}const M=(0,i.Vl)(15),D=.001;var I,U;(function(P){P[P.XYZ=0]="XYZ",P[P.XY=1]="XY"})(I||(I={})),function(P){P[P.IMMEDIATE=0]="IMMEDIATE",P[P.DEFERRED=1]="DEFERRED"}(U||(U={}));class O{constructor(e,h,l=S.CUMULATIVE){this.origin=e,this.angle=h,this._accumulationType=l}_rotate(e,h){(0,d.r)(e.pos,e.pos,this.origin,h)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof O&&(0,X.fS)(this.origin,e.origin)}accumulate(e,h){this._rotate(e,h._accumulationType===S.REPLACE?h.angle-this.angle:h.angle)}accumulateParams(e){this.angle=e._accumulationType===S.REPLACE?e.angle:this.angle+e.angle}}class Z{constructor(e,h,l,x,V=S.CUMULATIVE){this.origin=e,this.axis1=h,this.factor1=l,this.factor2=x,this._accumulationType=V,this.axis2=(0,p.f)(h[1],-h[0])}_scale(e,h,l){(0,d.u)(e.pos,e.pos,this.origin,this.axis1,h),(0,d.u)(e.pos,e.pos,this.origin,this.axis2,l)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof Z&&(0,X.fS)(this.origin,e.origin)&&(0,X.fS)(this.axis1,e.axis1)}accumulate(e,h){h._accumulationType===S.REPLACE?this._scale(e,h.factor1/this.factor1,h.factor2/this.factor2):this._scale(e,h.factor1,h.factor2)}accumulateParams(e){const h=e._accumulationType===S.REPLACE;this.factor1=h?e.factor1:this.factor1*e.factor1,this.factor2=h?e.factor2:this.factor2*e.factor2}}class W{constructor(){this._operations=[],this._closed=!1}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const h=this._operations.length?this._operations[this._operations.length-1]:null;return h&&h.accumulate(e)||(this._operations.push(e),e.apply()),!0}}class z extends G.Z{constructor(e){super(),this.data=e,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",h=>{h.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:h.addedVertices,operation:h.operation}),h.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:h.removedVertices,operation:h.operation}),h.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:h.updatedVertices,operation:h.operation})})}destroy(){this._listener.remove()}splitEdge(e,h){return this._apply(new H(this.data,e,h))}updateVertices(e,h,l=A.ACCUMULATE_STEPS){return this._apply(new L(this.data,e,h),l)}moveVertices(e,h,l,x,V=A.ACCUMULATE_STEPS){return this.updateVertices(e,new w(this.data.coordinateHelper,h,l,x),V)}scaleVertices(e,h,l,x,V,B=A.ACCUMULATE_STEPS,b=S.CUMULATIVE){return this.updateVertices(e,new Z(h,l,x,V,b),B)}rotateVertices(e,h,l,x=A.ACCUMULATE_STEPS,V=S.CUMULATIVE){return this.updateVertices(e,new O(h,l,V),x)}removeVertices(e){return this._apply(new R(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return 0===this.data.components.length?null:this._apply(new N(this.data,this.data.components[0],e))}setVertexPosition(e,h){return this._apply(new k(this.data,e,h))}offsetEdge(e,h,l,x=A.ACCUMULATE_STEPS){return this.updateVertices([h.leftVertex,h.rightVertex],new g(this.data.coordinateHelper,e,h,l),x)}closeComponent(e){return this.data.components.includes(e)?this._apply(new Y(this.data,e)):null}canRemoveVertex(){return this.data.components[0].vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new W;return this._apply(e),{remove:()=>e.close()}}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,h=A.ACCUMULATE_STEPS){return h!==A.NEW_STEP&&!(0,m.Wi)(this.lastOperation)&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}static fromGeometry(e,h){return new z(C.XE.fromGeometry(e,h))}}},396:(K,j,T)=>{T.d(j,{SP:()=>i,dU:()=>Y,k0:()=>S,xO:()=>H}),T(21286);var i,_,m=T(67831),C=T(99770);function A(_,y){return _[0]*y[1]-_[1]*y[0]}function S(_,y,g,M,D=g){return(0,m.a)(p,M,g),(0,m.a)(v,y,D),function L(_,y,g){const M=(0,m.h)(g,y)/(0,m.v)(g);(0,m.b)(_,g,M)}(E,v,p),(0,m.j)(_,D,E)}function H(_,y,g,M){(0,m.a)(p,y,g);const D=M/(0,m.i)(p);return(0,m.w)(_,g,p,D)}function Y(_,y){const g=_.start,D=y.start,I=y.end,U=(0,m.a)(p,_.end,g),O=(0,m.a)(u,I,D),Z=A(U,O);if(Math.abs(Z)<=d)return[];const W=(0,m.a)(v,g,D),z=A(O,W)/Z,P=A(U,W)/Z;if(z>=0){if(P>=0||y.type===i.LINE)return[(0,m.w)(E,g,U,z)]}else if(_.type===i.LINE&&(P>=0||y.type===i.LINE))return[(0,m.w)(E,g,U,z)];return[]}(_=i||(i={}))[_.RAY=0]="RAY",_[_.LINE=1]="LINE";const d=1e-6,p=(0,C.a)(),u=(0,C.a)(),v=(0,C.a)(),E=(0,C.a)()},66601:(K,j,T)=>{T.d(j,{m:()=>C});var G=T(55915),m=T(12080);function C(A){const N=(0,m.rS)(A),L=N===m.GG?m.wY:N;return(0,G.Up)(A,L)?L:A}}}]);