"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[8594],{28594:(Bt,pt,G)=>{G.d(pt,{Hq:()=>ct,Mk:()=>Y,P_:()=>bt,Qp:()=>Nt,VO:()=>H,_D:()=>Pt,kZ:()=>Ot,kr:()=>Wt,nF:()=>Q,tB:()=>q,ut:()=>W,zD:()=>Rt});var K,t,gt=G(15861),yt=(G(29132),G(26584)),C=G(62208),j=G(16730),S=G(44956),b=G(55915),A=G(2004),N=G(49672),_t=G(37118),dt=G(65234);function Y(t,n,i){return!(0,b.Up)(t,n,i)}function L(t,n,i){const r=Y(t,n,i);if(r&&!(0,b.kR)())throw new yt.Z("rasterprojectionhelper-project","projection engine is not loaded");return r}(t=K||(K={}))[t.None=0]="None",t[t.North=1]="North",t[t.South=2]="South",t[t.Both=3]="Both";const it=(t,n,i,r=0)=>{if(1===i[0])return[0,0];let a=1,e=-1,s=1,x=-1;for(let u=0;u<t.length;u+=2)isNaN(t[u])||(a=a>t[u]?t[u]:a,e=e>t[u]?e:t[u],s=s>t[u+1]?t[u+1]:s,x=x>t[u+1]?x:t[u+1]);const{cols:c,rows:l}=n,h=(e-a)/c/i[0],R=(x-s)/l/i[1],_=2*r;let g=0,f=!1,m=[0,0];for(let u=0;u<c-3;u++){for(let E=0;E<l-3;E++){const d=u*l*2+2*E,M=(t[d+1]+t[d+5]+t[d+4*l+1]+t[d+4*l+5])/4,P=Math.abs(((t[d]+t[d+4]+t[d+4*l]+t[d+4*l+4])/4-t[d+2*l+2])/h),w=Math.abs((M-t[d+2*l+3])/R);if(P+w>g&&(g=P+w,m=[P,w]),_&&g>_){f=!0;break}}if(f)break}return m},Mt={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},V=new Map,J=new Map;function Rt(){return X.apply(this,arguments)}function X(){return(X=(0,gt.Z)(function*(){if((0,b.kR)())return null;yield(0,b.zD)()})).apply(this,arguments)}function Pt(t,n,i){return L(t.spatialReference,n)?i?(0,b.rS)(n,t.spatialReference,t):(0,b.rS)(t.spatialReference,n,t):null}function H(t,n,i,r=null){const a=t.spatialReference;if(a.equals(n))return t;L(a,n,r);const e=i.center,s=new A.Z({xmin:e.x-t.x/2,xmax:e.x+t.x/2,ymin:e.y-t.y/2,ymax:e.y+t.y/2,spatialReference:a}),x=(0,b.iV)(s,n,r),c=W(n);let l;if((0,C.Wi)(x)||(0,C.pC)(c)&&x.width>=c){const h=(0,j.c9)(a)/(0,j.c9)(n);l={x:t.x*h,y:t.y*h}}else l={x:x.width,y:x.height};return l}function O(t,n=.01){return(0,j.c9)(t)?n/(0,j.c9)(t):0}function Q(t,n,i=null,r=!0){const a=t.spatialReference;if(a.equals(n))return t;L(a,n,i);const e=(0,b.iV)(t,n,i);if(!r||!e)return e;const s=Z(a,!0),x=Z(n,!0),c=O(a);return c&&(0,C.pC)(s)&&(0,C.pC)(x)&&(e.x>0&&Math.abs(t.x-s[0])<c?e.x-=x[1]-x[0]:e.x<0&&Math.abs(t.x-s[1])<c&&(e.x+=x[1]-x[0])),e}function ot(t){const{inSR:n,outSR:i,datumTransformation:r}=t,a=D(n),{points:e,mask:s}=$(t,a);if(!n.isGeographic){const c=n.wkid?S.e.coordsys(n.wkid):S.e.fromString(n.isGeographic?S.f.PE_TYPE_GEOGCS:S.f.PE_TYPE_PROJCS,n.wkt);S.g.projToGeog(c,e.length,e)}if((0,C.pC)(r)&&r.steps.length&&r.steps.forEach(c=>{const l=c.wkid?S.e.geogtran(c.wkid):S.e.fromString(S.f.PE_TYPE_GEOGTRAN,c.wkt);S.h.geogToGeog(l,e.length,e,null,c.isInverse?S.f.PE_TRANSFORM_2_TO_1:S.f.PE_TRANSFORM_1_TO_2)}),!i.isGeographic){const c=D(i,!0),l=(0,C.pC)(c)&&c.isEnvelope?[c.bbox[1],c.bbox[3]]:[-90,90];!function St(t,n){const[i,r]=n;for(let a=0;a<t.length;a++){const e=t[a][1];(e<i||e>r)&&(t[a]=[NaN,NaN])}}(e,l);const h=i.wkid?S.e.coordsys(i.wkid):S.e.fromString(i.isGeographic?S.f.PE_TYPE_GEOGCS:S.f.PE_TYPE_PROJCS,i.wkt);S.g.geogToProj(h,e.length,e)}let x=e;if(s&&e.length!==s.length){x=[];for(let c=0,l=0;c<s.length;c++)x.push(s[c]?e[l++]:[NaN,NaN])}return x}function D(t,n=!1){let i=t.wkid||t.wkt;if(!i||t.isGeographic)return null;if(i=String(i),V.has(i)){const s=V.get(i);return n?s?.gcs:s?.pcs}const r=t.wkid?S.e.coordsys(t.wkid):S.e.fromString(t.isGeographic?S.f.PE_TYPE_GEOGCS:S.f.PE_TYPE_PROJCS,t.wkt),a=st(r,O(t,1e-4)),e=st(r,0,!0);return V.set(i,{pcs:a,gcs:e}),n?e:a}function st(t,n=0,i=!1){const r=S.j.generate(t),a=i?t.horizonGcsGenerate():t.horizonPcsGenerate();if(!a?.length)return null;let e=!1,s=a.find(u=>1===u.getInclusive()&&1===u.getKind());if(!s){if(s=a.find(u=>1===u.getInclusive()&&0===u.getKind()),!s)return null;e=!0}const x=i?0:(2===r.getNorthPoleLocation()?1:0)|(2===r.getSouthPoleLocation()?2:0),c=r.isPannableRectangle(),l=s.getCoord();if(e)return{isEnvelope:e,isPannable:c,vertices:l,coef:null,bbox:[l[0][0]-n,l[0][1]-n,l[1][0]+n,l[1][1]+n],poleLocation:x};let h=0;const R=[];let[_,g]=l[0],[f,m]=l[0];for(let u=0,E=l.length;u<E;u++){h++,h===E&&(h=0);const[d,y]=l[u],[M,P]=l[h];if(P===y)R.push([d,M,y,P,2]);else{const w=(M-d)/(P-y||1e-4),v=d-w*y;R.push(y<P?[w,v,y,P,0]:[w,v,P,y,1])}_=_<d?_:d,g=g<y?g:y,f=f>d?f:d,m=m>y?m:y}return{isEnvelope:!1,isPannable:c,vertices:l,coef:R,bbox:[_,g,f,m],poleLocation:x}}function $(t,n){const i=[],{cols:r,rows:a,xres:e,yres:s,usePixelCenter:x}=t;let{xmin:c,ymax:l}=t;if(x&&(c+=e/2,l-=s/2),(0,C.Wi)(n)){for(let g=0;g<r;g++)for(let f=0;f<a;f++)i.push([c+e*g,l-s*f]);return{points:i}}const h=new Uint8Array(r*a);if(n.isEnvelope){const{bbox:[g,f,m,u]}=n;for(let E=0,d=0;E<r;E++){const y=c+e*E,M=n.isPannable||y>=g&&y<=m;for(let P=0;P<a;P++,d++){const w=l-s*P;M&&w>=f&&w<=u&&(i.push([y,w]),h[d]=1)}}return{points:i,mask:h}}const{coef:R}=n,_=[];for(let g=0;g<a;g++){const f=l-s*g,m=[],u=[];for(let d=0;d<R.length;d++){const[y,M,P,w,v]=R[d];f===P&&P===w?(m.push(y),m.push(M),u.push(2),u.push(2)):f>=P&&f<=w&&(m.push(y*f+M),u.push(v))}let E=m;if(m.length>2){let d=2===u[0]?0:u[0],y=m[0];E=[];for(let M=1;M<u.length;M++)2===u[M]&&M!==u.length-1||(u[M]!==d&&(E.push(0===d?Math.min(y,m[M-1]):Math.max(y,m[M-1])),d=u[M],y=m[M]),M===u.length-1&&E.push(0===u[M]?Math.min(y,m[M]):Math.max(y,m[M])));E.sort((M,P)=>M-P)}else m[0]>m[1]&&(E=[m[1],m[0]]);_.push(E)}for(let g=0,f=0;g<r;g++){const m=c+e*g;for(let u=0;u<a;u++,f++){const E=l-s*u,d=_[u];if(2===d.length)m>=d[0]&&m<=d[1]&&(i.push([m,E]),h[f]=1);else if(d.length>2){let y=!1;for(let M=0;M<d.length;M+=2)if(m>=d[M]&&m<=d[M+1]){y=!0;break}y&&(i.push([m,E]),h[f]=1)}}}return{points:i,mask:h}}function rt(t){const n=W(t[0].spatialReference);if(t.length<2||(0,C.Wi)(n))return t[0];let{xmin:i,xmax:r,ymin:a,ymax:e}=t[0];for(let s=1;s<t.length;s++){const x=t[s];r=x.xmax+n*s,a=Math.min(a,x.ymin),e=Math.max(e,x.ymax)}return new A.Z({xmin:i,xmax:r,ymin:a,ymax:e,spatialReference:t[0].spatialReference})}function q(t,n,i=null,r=!0){const a=t.spatialReference;if(a.equals(n))return t;const e=ct(t),s=W(a,!0),x=W(n);if(0===e||(0,C.Wi)(s)||(0,C.Wi)(x)){const l=at(t,n,i,r);if((0,C.Wi)(s)&&(0,C.pC)(x)&&Math.abs(l.width-x)<O(n)&&(0,b.kR)()){const h=D(a);if((0,C.pC)(h)&&h.poleLocation===K.None&&t.width<(h.bbox[2]-h.bbox[0])/2)return function Tt(t,n){const i=W(n);if((0,C.Wi)(i))return null;let{xmin:r,ymin:a,xmax:e,ymax:s}=t;const x=t.spatialReference,c=new _t.Z({spatialReference:x,rings:[[[r,a],[e,a],[e,s],[r,s],[r,a]]]}),l=(0,b.iV)(c,n);if(2!==l.rings.length||!l.rings[0].length||!l.rings[1].length)return null;const{rings:h}=l,R=O(x),_=new A.Z({spatialReference:n});for(let g=0;g<2;g++){r=e=h[g][0][0],a=s=h[g][0][1];for(let f=0;f<h[g].length;f++)r=r>h[g][f][0]?h[g][f][0]:r,e=e<h[g][f][0]?h[g][f][0]:e,a=a>h[g][f][1]?h[g][f][1]:a,s=s<h[g][f][1]?h[g][f][1]:s;if(0===g)_.ymin=a,_.ymax=s,_.xmin=r,_.xmax=e;else if(_.ymin=Math.min(_.ymin,a),_.ymax=Math.max(_.ymax,s),Math.abs(e-i/2)<R)_.xmin=r,_.xmax=_.xmax+i;else{if(!(Math.abs(r+i/2)<R))return null;_.xmax=e+i}}return _}(t,n)||l}return l}const c=t.clone().normalize();if(1===c.length&&t.xmax<s&&t.xmax-s/2>O(a)){const{xmin:l,xmax:h}=t;for(let R=0;R<=e;R++)c[R]=new A.Z({xmin:0===R?l:-s/2,xmax:R===e?h-s*R:s/2,ymin:t.ymin,ymax:t.ymax,spatialReference:a})}return rt(c.map(l=>at(l,n,i,r)).filter(l=>!!l))}function at(t,n,i=null,r=!0,a=!0){const e=t.spatialReference;if(e.equals(n))return t;L(e,n,i);const s=(0,b.iV)(t,n,i);if(a&&n.isWebMercator&&s&&(s.ymax=Math.min(20037508.342787,s.ymax),s.ymin=Math.max(-20037508.342787,s.ymin),s.ymin>=s.ymax))return null;if(!r||!s)return s;const x=Z(e,!0),c=Z(n,!0);if((0,C.Wi)(x)||(0,C.Wi)(c))return s;const l=O(e,.001),h=O(e,500),R=O(n,.001);if(Math.abs(s.xmin-c[0])<R&&Math.abs(s.xmax-c[1])<R){const _=Math.abs(t.xmin-x[0]),g=Math.abs(x[1]-t.xmax);if(_<l&&g>h){s.xmin=c[0];const f=[];f.push(new N.Z(t.xmax,t.ymin,e)),f.push(new N.Z(t.xmax,(t.ymin+t.ymax)/2,e)),f.push(new N.Z(t.xmax,t.ymax,e));const m=f.map(u=>Q(u,n,i)).filter(u=>!isNaN(u?.x)).map(u=>u.x);s.xmax=Math.max.apply(null,m)}if(g<l&&_>h){s.xmax=c[1];const f=[];f.push(new N.Z(t.xmin,t.ymin,e)),f.push(new N.Z(t.xmin,(t.ymin+t.ymax)/2,e)),f.push(new N.Z(t.xmin,t.ymax,e));const m=f.map(u=>Q(u,n,i)).filter(u=>!isNaN(u?.x)).map(u=>u.x);s.xmin=Math.min.apply(null,m)}}else{const _=O(n,.001);Math.abs(s.xmin-c[0])<_&&(s.xmin=c[0]),Math.abs(s.xmax-c[1])<_&&(s.xmax=c[1])}return s}function W(t,n=!1){return t.isWebMercator?2*(n?20037508.342787:20037508.342788905):t.wkid&&t.isGeographic?360:2*Mt[t.wkid]||null}function Z(t,n=!1){if(t.isGeographic)return[-180,180];const i=W(t,n);return(0,C.pC)(i)?[-i/2,i/2]:null}function lt(t,n,i,r){let a=(t-n)/i;return a-Math.floor(a)!=0?a=Math.floor(a):r&&(a-=1),a}function ct(t,n=!1){const i=W(t.spatialReference);if((0,C.Wi)(i))return 0;const r=n?0:-i/2,a=O(t.spatialReference),e=!n&&Math.abs(t.xmax-i/2)<a?i/2:t.xmax,s=!n&&Math.abs(t.xmin+i/2)<a?-i/2:t.xmin;return lt(e,r,i,!0)-lt(s,r,i,!1)}function bt(t){const n=t.storageInfo.origin.x,i=W(t.spatialReference,!0);if((0,C.Wi)(i))return{originX:n,halfWorldWidth:null,pyramidsInfo:null};const r=i/2,{nativePixelSize:a,storageInfo:e,extent:s}=t,{maximumPyramidLevel:x,blockWidth:c,pyramidScalingFactor:l}=e;let h=a.x;const R=[],_=(0,C.pC)(t.transform)&&"gcs-shift"===t.transform.type,g=n+(_?0:r),f=_?i-n:r-n;for(let m=0;m<=x;m++){const u=(s.xmax-n)/h/c,E=u-Math.floor(u)==0?u:Math.ceil(u),d=f/h/c,y=d-Math.floor(d)==0?d:Math.ceil(d),M=Math.floor(g/h/c),P=Math.round(g/h)%c,w=(c-Math.round(f/h)%c)%c;R.push({resolutionX:h,blockWidth:c,datsetColumnCount:E,worldColumnCountFromOrigin:y,leftMargin:P,rightPadding:w,originColumnOffset:M}),h*=l}return{originX:n,halfWorldWidth:r,pyramidsInfo:R,hasGCSSShiftTransform:_}}function Nt(t){const n=t.isAdaptive&&null==t.spacing;let i=t.spacing||[32,32],r=tt(t),a={cols:r.size[0]+1,rows:r.size[1]+1};const e=r.outofBoundPointCount>0&&r.outofBoundPointCount<r.offsets.length/2;let s=r.outofBoundPointCount===r.offsets.length/2||n&&e?[0,0]:it(r.offsets,a,i,4);const c=t.projectedExtent.spatialReference,l=t.srcBufferExtent.spatialReference;if(n&&(e||(s[0]+s[1])/2>4)&&(Y(c,l,t.datumTransformation)&&(c.isGeographic||(0,C.pC)(D(c))),i=[4,4],r=tt({...t,spacing:i}),a={cols:r.size[0]+1,rows:r.size[1]+1},s=it(r.offsets,a,i,4)),r.error=s,i[0]>1&&(r.coefficients=ft(r.offsets,a,e)),t.includeGCSGrid&&!c.isGeographic&&!c.isWebMercator)if(l.isGeographic)r.gcsGrid={offsets:r.offsets,coefficients:r.coefficients,spacing:i};else{const h=D(c);if((0,C.pC)(h)&&!h.isEnvelope){const R=function Gt(t){if(!t||t.isGeographic)return t;const n=String(t.wkid||t.wkt);let i;return J.has(n)?i=J.get(n):(i=(t.wkid?S.e.coordsys(t.wkid):S.e.fromString(S.f.PE_TYPE_PROJCS,t.wkt)).getGeogcs().getCode(),J.set(n,i)),new dt.Z({wkid:i})}(c),_=q(t.projectedExtent,R),{offsets:g}=tt({...t,srcBufferExtent:_,spacing:i}),f=ft(g,a,e);r.gcsGrid={offsets:g,coefficients:f,spacing:i}}}return r}function tt(t){const{projectedExtent:n,srcBufferExtent:i,pixelSize:r,datumTransformation:a,rasterTransform:e}=t,s=n.spatialReference,x=i.spatialReference,c=L(s,x),{xmin:l,ymin:h,xmax:R,ymax:_}=n,g=W(x),f=(0,C.pC)(g)&&(t.hasWrapAround||"gcs-shift"===e?.type),m=t.spacing||[32,32],u=m[0]*r.x,E=m[1]*r.y,d=1===m[0],y=Math.ceil((R-l)/u-.1/m[0])+(d?0:1),M=Math.ceil((_-h)/E-.1/m[1])+(d?0:1),P=function Et(t){const{inSR:n,outSR:i,datumTransformation:r,preferPE:a}=t;if(n.equals(i)){const{points:e}=$(t,null);return e}if(n.isWebMercator&&i.isWGS84||n.isWGS84&&i.isWebMercator)return function Ct(t){const{cols:n,rows:i,xres:r,yres:a,usePixelCenter:e,inSR:s,outSR:x}=t;let{xmin:c,ymax:l}=t;e&&(c+=r/2,l-=a/2);const h=[],R=[],_=Math.max(n,i);for(let f=0;f<_;f++){const m=c+r*Math.min(n,f),u=l-a*Math.min(i,f),E=(0,b.iV)(new N.Z({x:m,y:u,spatialReference:s}),x);f<=n&&h.push(E.x),f<=i&&R.push(E.y)}const g=[];for(let f=0;f<n;f++)for(let m=0;m<i;m++)g.push([h[f],R[m]]);return g}(t);if(L(n,i,r)&&a){if(n.isGeographic)return ot(t);const e=D(n);if((0,C.pC)(e))return ot(t)}return function wt(t){const{points:n}=$(t,null),i=n.map(r=>new N.Z(r[0],r[1],t.inSR));return(0,b.iV)(i,t.outSR,t.datumTransformation).map(r=>r?[r.x,r.y]:[NaN,NaN])}(t)}({cols:y,rows:M,xmin:l,ymax:_,xres:u,yres:E,inSR:s,outSR:x,datumTransformation:a,preferPE:m[0]<=4,usePixelCenter:d}),w=[];let v,U=0;const ut=d?-1:NaN,{xmin:xt,xmax:nt,ymax:vt,width:kt,height:Dt}=i,Lt=O(x,500),jt=(0,C.pC)(g)&&xt>0&&nt>g/2;let ht=!1;if(c){const k=D(s);ht=(0,C.pC)(k)&&k.poleLocation>0}for(let k=0;k<y;k++){const et=[];for(let B=0;B<M;B++){let T=P[k*M+B];if(f&&T[0]>nt&&T[0]>g/2-Lt?T[0]-=g:f&&0===k&&T[0]<0&&jt&&!e&&(T[0]+=g),!T||isNaN(T[0])||isNaN(T[1]))w.push(ut),w.push(ut),et.push(null),U++;else{if(e){const mt=e.inverseTransform(new N.Z({x:T[0],y:T[1],spatialReference:x}));T=[mt.x,mt.y]}et.push(T),k>0&&f&&v[B]&&T[0]<v[B][0]&&(T[0]+=g,ht&&T[0]>nt&&T[0]>g&&(T[0]-=g)),w.push((T[0]-xt)/kt),w.push((vt-T[1])/Dt)}}v=et}return{offsets:w,error:null,coefficients:null,outofBoundPointCount:U,spacing:m,size:d?[y,M]:[y-1,M-1]}}function ft(t,n,i){const{cols:r,rows:a}=n,e=new Float32Array((r-1)*(a-1)*2*6),s=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),x=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let c=0;c<r-1;c++){for(let l=0;l<a-1;l++){let h=c*a*2+2*l;const R=t[h],_=t[h+1],g=t[h+2],f=t[h+3];h+=2*a;const m=t[h],u=t[h+1],E=t[h+2],d=t[h+3];let y=0,M=12*(l*(r-1)+c);for(let P=0;P<3;P++)e[M++]=s[y++]*R+s[y++]*g+s[y++]*E;y=0;for(let P=0;P<3;P++)e[M++]=s[y++]*_+s[y++]*f+s[y++]*d;y=0;for(let P=0;P<3;P++)e[M++]=x[y++]*R+x[y++]*m+x[y++]*E;y=0;for(let P=0;P<3;P++)e[M++]=x[y++]*_+x[y++]*u+x[y++]*d}if(i)for(let l=0;l<e.length;l++)isNaN(e[l])&&(e[l]=-1)}return e}function Ot(t){const n=t.clone().normalize();return 1===n.length?n[0]:rt(n)}function Wt(t,n,i){const{storageInfo:r,pixelSize:a}=n;let e,s=!1;const{pyramidResolutions:x}=r;if((0,C.pC)(x)&&x.length){const _=(t.x+t.y)/2,g=x[x.length-1],f=(g.x+g.y)/2,m=(a.x+a.y)/2;if(_<=m)e=0;else if(_>=f)e=x.length,s=_/f>8;else{let E,d=m;for(let y=1;y<=x.length;y++){if(E=(x[y-1].x+x[y-1].y)/2,_<=E){_===E?e=y:"down"===i?(e=y-1,s=_/d>8):e="up"===i||_-d>E-_||_/d>2?y:y-1;break}d=E}}const u=0===e?a:x[e-1];return s&&Math.min(u.x,u.y)*(0,j.c9)(n.spatialReference)>19567&&(s=!1),{pyramidLevel:e,pyramidResolution:new N.Z({x:u.x,y:u.y,spatialReference:n.spatialReference}),excessiveReading:s}}const c=Math.log(t.x/a.x)/Math.LN2,l=Math.log(t.y/a.y)/Math.LN2,h=n.storageInfo.maximumPyramidLevel||0;e="down"===i?Math.floor(Math.min(c,l)):"up"===i?Math.ceil(Math.max(c,l)):Math.round((c+l)/2),e<0?e=0:e>h&&(s=e>h+3,e=h);const R=2**e;return{pyramidLevel:e,pyramidResolution:new N.Z({x:R*n.nativePixelSize.x,y:R*n.nativePixelSize.y,spatialReference:n.spatialReference}),excessiveReading:s}}}}]);