/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[7867],{40405:(W,D,t)=>{t.d(D,{B:()=>m});var o=t(15861),l=t(22558),s=t(21726),N=t(35948),j=t(34117),x=t(31283),C=t(77712);function I(r){return v[function y(r){return r instanceof Blob?r.type:function M(r){const i=(0,s.Ml)(r);return u[i]||E}(r.url)}(r)]||P}const v={},E="text/plain",P=v[E],u={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const r in u)v[u[r]]=r;var g=t(29840);function m(r){const i=r?.origins??[void 0];return(p,f)=>{const d=function U(r,i,p){if("resource"===r?.type)return function b(r,i,p){const f=(0,j.VZ)(i,p);return{type:String,read:(d,a,S)=>{const e=(0,g.r)(d,a,S);return f.type===String?e:"function"==typeof f.type?new f.type({url:e}):void 0},write:{writer(d,a,S,e){if(!e||!e.resources)return"string"==typeof d?void(a[S]=(0,g.t)(d,e)):void(a[S]=d.write({},e));const n=function F(r){return null==r?null:"string"==typeof r?r:r.url}(d),c=(0,g.t)(n,{...e,verifyItemRelativeUrls:e&&e.verifyItemRelativeUrls?{writtenUrls:e.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},g.M.NO),O=f.type!==String&&(!(0,l.l)(this)||e&&e.origin&&this.originIdOf(p)>(0,x.M9)(e.origin)),T={object:this,propertyName:p,value:d,targetUrl:c,dest:a,targetPropertyName:S,context:e,params:r};e&&e.portalItem&&c&&!(0,s.YP)(c)?O?function L(r){const{context:i,targetUrl:p,params:f,value:d,dest:a,targetPropertyName:S}=r;if(!i.portalItem)return;const e=i.portalItem.resourceFromPath(p),n=_(d,p,i),c=I(n),O=(0,s.Ml)(e.path),T=f?.compress??!1;c===O?(i.resources&&K({...r,resource:e,content:n,compress:T,updates:i.resources.toUpdate}),a[S]=p):h(r)}(T):function A({context:r,targetUrl:i,dest:p,targetPropertyName:f}){r.portalItem&&r.resources&&(r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(i),compress:!1}),p[f]=i)}(T):e&&e.portalItem&&(null==c||null!=(0,g.i)(c)||(0,s.jc)(c)||O)?h(T):a[S]=c}}}}(r,i,p);switch(r?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:f,write:d}=g.a;return{read:f,write:d}}}}(r,p,f);for(const a of i){const S=(0,C.CJ)(p,a,f);for(const e in d)S[e]=d[e]}}}function h(r){const{targetUrl:i,params:p,value:f,context:d,dest:a,targetPropertyName:S}=r;if(!d.portalItem)return;const e=(0,g.p)(i),n=e?.filename??(0,N.D)(),c=p?.prefix??e?.prefix,O=_(f,i,d),T=(0,s.v_)(c,n),G=`${T}.${I(O)}`,R=d.portalItem.resourceFromPath(G);(0,s.jc)(i)&&d.resources&&d.resources.pendingOperations.push(function Z(r){return B.apply(this,arguments)}(i).then(z=>{R.path=`${T}.${I(z)}`,a[S]=R.itemRelativeUrl}).catch(()=>{}));const J=p?.compress??!1;d.resources&&K({...r,resource:R,content:O,compress:J,updates:d.resources.toAdd}),a[S]=R.itemRelativeUrl}function K({object:r,propertyName:i,updates:p,resource:f,content:d,compress:a}){p.push({resource:f,content:d,compress:a,finish:S=>{!function V(r,i,p){"string"==typeof r[i]?r[i]=p.url:r[i].url=p.url}(r,i,S)}})}function _(r,i,p){return"string"==typeof r?{url:i}:new Blob([JSON.stringify(r.toJSON(p))],{type:"application/json"})}function B(){return(B=(0,o.Z)(function*(r){const i=(yield Promise.resolve().then(t.bind(t,84792))).default,{data:p}=yield i(r,{responseType:"blob"});return p})).apply(this,arguments)}},67867:(W,D,t)=>{t.r(D),t.d(D,{default:()=>S});var i,o=t(15861),l=t(17626),s=t(26584),N=t(72392),j=t(62208),x=t(99959),C=t(10699),I=t(32917),y=t(77712),E=(t(85931),t(90912),t(68653)),P=t(76898),u=t(40405),g=t(44917),m=t(50085),U=t(65088),b=t(49286),h=t(6647),L=t(99555),A=t(10157),K=t(13812),_=t(35031),Z=t(84792),B=t(46160),F=t(86810),V=t(21726),r=t(10439);let p=i=class extends((0,F.eC)(B.Z.ofType(r.Z))){constructor(e){super(e),this.url=null}clone(){return new i({url:this.url,items:this.items.map(e=>e.clone())})}toJSON(e){return this.toArray().map(n=>n.toJSON(e)).filter(n=>!!n.geometry)}static fromJSON(e,n){const c=new i;for(const O of e)c.add(r.Z.fromJSON(O,n));return c}static fromUrl(e,n,c){return(0,o.Z)(function*(){const O={url:(0,V.mN)(e),origin:"service"},T=yield(0,Z.default)(e,{responseType:"json",signal:(0,j.U2)(c,"signal")}),G=n.toJSON(),R=[];for(const J of T.data)R.push(r.Z.fromJSON({...J,geometry:{...J.geometry,spatialReference:G}},O));return new i({url:e,items:R})})()}};(0,l._)([(0,y.Cb)({type:String})],p.prototype,"url",void 0),p=i=(0,l._)([(0,P.j)("esri.layers.support.SceneModifications")],p);const f=p;var d=t(29840);let a=class extends((0,A.Vt)((0,U.Y)((0,b.q)((0,h.I)((0,L.M)((0,x.R)((0,m.V)(g.Z)))))))){constructor(...e){super(...e),this._handles=new N.Z,this.geometryType="mesh",this.operationalLayerType="IntegratedMeshLayer",this.type="integrated-mesh",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile="mesh-pyramids",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this._handles.destroy()}initialize(){this._handles.add((0,I.on)(()=>this.modifications,"after-changes",()=>this.modifications=this.modifications,I.Z_))}normalizeCtorArgs(e,n){return"string"==typeof e?{url:e,...n}:e}readModifications(e,n,c){this._modificationsSource={url:(0,d.f)(e,c),context:c}}load(e){var n=this;return(0,o.Z)(function*(){return n.addResolvingPromise(n._doLoad(e)),n})()}_doLoad(e){var n=this;return(0,o.Z)(function*(){const c=(0,j.U2)(e,"signal");try{yield n.loadFromPortal({supportedTypes:["Scene Service"]},e)}catch(O){(0,C.r9)(O)}if(yield n._fetchService(c),(0,j.pC)(n._modificationsSource)){const O=yield f.fromUrl(n._modificationsSource.url,n.spatialReference,e);n.setAtOrigin("modifications",O,n._modificationsSource.context.origin),n._modificationsSource=null}yield n._fetchIndexAndUpdateExtent(n.nodePages,c)})()}beforeSave(){if(!(0,j.Wi)(this._modificationsSource))return this.load().then(()=>{},()=>{})}saveAs(e,n){var c=this;return(0,o.Z)(function*(){return c._debouncedSaveOperations(A.xp.SAVE_AS,{...n,getTypeKeywords:()=>c._getTypeKeywords(),portalItemLayerType:"integrated-mesh"},e)})()}save(){var e=this;return(0,o.Z)(function*(){const n={getTypeKeywords:()=>e._getTypeKeywords(),portalItemLayerType:"integrated-mesh"};return e._debouncedSaveOperations(A.xp.SAVE,n)})()}validateLayer(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new s.Z("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new s.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new s.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}_getTypeKeywords(){return["IntegratedMeshLayer"]}};(0,l._)([(0,y.Cb)({type:String,readOnly:!0})],a.prototype,"geometryType",void 0),(0,l._)([(0,y.Cb)({type:["show","hide"]})],a.prototype,"listMode",void 0),(0,l._)([(0,y.Cb)({type:["IntegratedMeshLayer"]})],a.prototype,"operationalLayerType",void 0),(0,l._)([(0,y.Cb)({json:{read:!1},readOnly:!0})],a.prototype,"type",void 0),(0,l._)([(0,y.Cb)({type:_.U4,readOnly:!0})],a.prototype,"nodePages",void 0),(0,l._)([(0,y.Cb)({type:[_.QI],readOnly:!0})],a.prototype,"materialDefinitions",void 0),(0,l._)([(0,y.Cb)({type:[_.Yh],readOnly:!0})],a.prototype,"textureSetDefinitions",void 0),(0,l._)([(0,y.Cb)({type:[_.H3],readOnly:!0})],a.prototype,"geometryDefinitions",void 0),(0,l._)([(0,y.Cb)({readOnly:!0})],a.prototype,"serviceUpdateTimeStamp",void 0),(0,l._)([(0,y.Cb)({type:f}),(0,u.B)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],a.prototype,"modifications",void 0),(0,l._)([(0,E.r)(["web-scene","portal-item"],"modifications")],a.prototype,"readModifications",null),(0,l._)([(0,y.Cb)(K.PV)],a.prototype,"elevationInfo",void 0),(0,l._)([(0,y.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],a.prototype,"path",void 0),a=(0,l._)([(0,P.j)("esri.layers.IntegratedMeshLayer")],a);const S=a},35031:(W,D,t)=>{t.d(D,{H3:()=>U,QI:()=>v,U4:()=>I,Yh:()=>P});var o=t(17626),l=t(86810),s=t(77712),x=(t(85931),t(90912),t(55342)),C=t(76898);let I=class extends l.wq{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,o._)([(0,s.Cb)({type:Number})],I.prototype,"nodesPerPage",void 0),(0,o._)([(0,s.Cb)({type:Number})],I.prototype,"rootIndex",void 0),(0,o._)([(0,s.Cb)({type:String})],I.prototype,"lodSelectionMetricType",void 0),I=(0,o._)([(0,C.j)("esri.layer.support.I3SNodePageDefinition")],I);let y=class extends l.wq{constructor(){super(...arguments),this.factor=1}};(0,o._)([(0,s.Cb)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],y.prototype,"id",void 0),(0,o._)([(0,s.Cb)({type:Number})],y.prototype,"factor",void 0),y=(0,o._)([(0,C.j)("esri.layer.support.I3SMaterialTexture")],y);let M=class extends l.wq{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,o._)([(0,s.Cb)({type:[Number]})],M.prototype,"baseColorFactor",void 0),(0,o._)([(0,s.Cb)({type:y})],M.prototype,"baseColorTexture",void 0),(0,o._)([(0,s.Cb)({type:y})],M.prototype,"metallicRoughnessTexture",void 0),(0,o._)([(0,s.Cb)({type:Number})],M.prototype,"metallicFactor",void 0),(0,o._)([(0,s.Cb)({type:Number})],M.prototype,"roughnessFactor",void 0),M=(0,o._)([(0,C.j)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],M);let v=class extends l.wq{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,o._)([(0,x.J)({opaque:"opaque",mask:"mask",blend:"blend"})],v.prototype,"alphaMode",void 0),(0,o._)([(0,s.Cb)({type:Number})],v.prototype,"alphaCutoff",void 0),(0,o._)([(0,s.Cb)({type:Boolean})],v.prototype,"doubleSided",void 0),(0,o._)([(0,x.J)({none:"none",back:"back",front:"front"})],v.prototype,"cullFace",void 0),(0,o._)([(0,s.Cb)({type:y})],v.prototype,"normalTexture",void 0),(0,o._)([(0,s.Cb)({type:y})],v.prototype,"occlusionTexture",void 0),(0,o._)([(0,s.Cb)({type:y})],v.prototype,"emissiveTexture",void 0),(0,o._)([(0,s.Cb)({type:[Number]})],v.prototype,"emissiveFactor",void 0),(0,o._)([(0,s.Cb)({type:M})],v.prototype,"pbrMetallicRoughness",void 0),v=(0,o._)([(0,C.j)("esri.layer.support.I3SMaterialDefinition")],v);let E=class extends l.wq{};(0,o._)([(0,s.Cb)({type:String,json:{read:{source:["name","index"],reader:(b,h)=>b??`${h.index}`}}})],E.prototype,"name",void 0),(0,o._)([(0,x.J)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],E.prototype,"format",void 0),E=(0,o._)([(0,C.j)("esri.layer.support.I3STextureFormat")],E);let P=class extends l.wq{constructor(){super(...arguments),this.atlas=!1}};(0,o._)([(0,s.Cb)({type:[E]})],P.prototype,"formats",void 0),(0,o._)([(0,s.Cb)({type:Boolean})],P.prototype,"atlas",void 0),P=(0,o._)([(0,C.j)("esri.layer.support.I3STextureSetDefinition")],P);let u=class extends l.wq{};(0,o._)([(0,x.J)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],u.prototype,"type",void 0),(0,o._)([(0,s.Cb)({type:Number})],u.prototype,"component",void 0),u=(0,o._)([(0,C.j)("esri.layer.support.I3SGeometryAttribute")],u);let g=class extends l.wq{};(0,o._)([(0,x.J)({draco:"draco"})],g.prototype,"encoding",void 0),(0,o._)([(0,s.Cb)({type:[String]})],g.prototype,"attributes",void 0),g=(0,o._)([(0,C.j)("esri.layer.support.I3SGeometryCompressedAttributes")],g);let m=class extends l.wq{constructor(){super(...arguments),this.offset=0}};(0,o._)([(0,s.Cb)({type:Number})],m.prototype,"offset",void 0),(0,o._)([(0,s.Cb)({type:u})],m.prototype,"position",void 0),(0,o._)([(0,s.Cb)({type:u})],m.prototype,"normal",void 0),(0,o._)([(0,s.Cb)({type:u})],m.prototype,"uv0",void 0),(0,o._)([(0,s.Cb)({type:u})],m.prototype,"color",void 0),(0,o._)([(0,s.Cb)({type:u})],m.prototype,"uvRegion",void 0),(0,o._)([(0,s.Cb)({type:u})],m.prototype,"featureId",void 0),(0,o._)([(0,s.Cb)({type:u})],m.prototype,"faceRange",void 0),(0,o._)([(0,s.Cb)({type:g})],m.prototype,"compressedAttributes",void 0),m=(0,o._)([(0,C.j)("esri.layer.support.I3SGeometryBuffer")],m);let U=class extends l.wq{};(0,o._)([(0,x.J)({triangle:"triangle"})],U.prototype,"topology",void 0),(0,o._)([(0,s.Cb)()],U.prototype,"geometryBuffers",void 0),U=(0,o._)([(0,C.j)("esri.layer.support.I3SGeometryDefinition")],U)},10439:(W,D,t)=>{t.d(D,{Z:()=>g});var P,o=t(17626),s=(t(29132),t(86810)),N=t(58817),j=t(14889),x=t(77712),I=(t(90912),t(76898)),y=t(99433),M=t(40405),v=t(55915),E=t(37118);let u=P=class extends s.wq{constructor(m){super(m),this.geometry=null,this.type="clip"}writeGeometry(m,U,b,h){if(h.layer&&h.layer.spatialReference&&!h.layer.spatialReference.equals(this.geometry.spatialReference)){if(!(0,v.Up)(m.spatialReference,h.layer.spatialReference))return void(h&&h.messages&&h.messages.push(new j.Z("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:h.layer.spatialReference,context:h})));const L=new E.Z;(0,v.Wt)(m,L,h.layer.spatialReference),U[b]=L.toJSON(h)}else U[b]=m.toJSON(h);delete U[b].spatialReference}clone(){return new P({geometry:(0,N.d9)(this.geometry),type:this.type})}};(0,o._)([(0,x.Cb)({type:E.Z}),(0,M.B)()],u.prototype,"geometry",void 0),(0,o._)([(0,y.c)(["web-scene","portal-item"],"geometry")],u.prototype,"writeGeometry",null),(0,o._)([(0,x.Cb)({type:["clip","mask","replace"],nonNullable:!0}),(0,M.B)()],u.prototype,"type",void 0),u=P=(0,o._)([(0,I.j)("esri.layers.support.SceneModification")],u);const g=u}}]);