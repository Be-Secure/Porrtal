/*
Copyright 2022 Comcast Cable Communications Management, LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
"use strict";(self.webpackChunka_porrtal_io_app=self.webpackChunka_porrtal_io_app||[]).push([[2305],{36592:(F,A,h)=>{h.d(A,{Q:()=>O});var p=h(85931),R=h(62208),v=h(77029),P=h(14259);class O{constructor(e=9,t){this._compareMinX=D,this._compareMinY=d,this._toBBox=s=>s,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),l.prune(),f.prune(),a.prune(),L.prune()}all(e){this._all(this._data,e)}search(e,t){let s=this._data;const i=this._toBBox;if(U(e,s))for(l.clear();s;){for(let o=0,_=s.children.length;o<_;o++){const u=s.children[o],y=s.leaf?i(u):u;U(e,y)&&(s.leaf?t(u):C(e,y)?this._all(u,t):l.push(u))}s=l.pop()}}collides(e){let t=this._data;const s=this._toBBox;if(!U(e,t))return!1;for(l.clear();t;){for(let i=0,o=t.children.length;i<o;i++){const _=t.children[i],u=t.leaf?s(_):_;if(U(e,u)){if(t.leaf||C(e,u))return!0;l.push(_)}}t=l.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let s=0,i=e.length;s<i;s++)this.insert(e[s]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const s=this._data;this._data=t,t=s}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new S([]),this}remove(e){if(!e)return this;let t,s=this._data,i=null,o=0,_=!1;const u=this._toBBox(e);for(a.clear(),L.clear();s||a.length>0;){if(s||(s=(0,R.j0)(a.pop()),i=a.data[a.length-1],o=L.pop()??0,_=!0),s.leaf&&(t=(0,p.cq)(s.children,e,s.children.length,s.indexHint),-1!==t))return s.children.splice(t,1),a.push(s),this._condense(a),this;_||s.leaf||!C(s,u)?i?(o++,s=i.children[o],_=!1):s=null:(a.push(s),L.push(o),o=0,i=s,s=s.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_all(e,t){let s=e;for(f.clear();s;){if(!0===s.leaf)for(const i of s.children)t(i);else f.pushArray(s.children);s=f.pop()??null}}_build(e,t,s,i){const o=s-t+1;let _=this._maxEntries;if(o<=_){const E=new S(e.slice(t,s+1));return m(E,this._toBBox),E}i||(i=Math.ceil(Math.log(o)/Math.log(_)),_=Math.ceil(o/_**(i-1)));const u=new M([]);u.height=i;const y=Math.ceil(o/_),x=y*Math.ceil(Math.sqrt(_));W(e,t,s,x,this._compareMinX);for(let E=t;E<=s;E+=x){const j=Math.min(E+x-1,s);W(e,E,j,y,this._compareMinY);for(let Y=E;Y<=j;Y+=y){const Z=Math.min(Y+y-1,j);u.children.push(this._build(e,Y,Z,i-1))}}return m(u,this._toBBox),u}_chooseSubtree(e,t,s,i){for(;i.push(t),!0!==t.leaf&&i.length-1!==s;){let o,_=1/0,u=1/0;for(let y=0,x=t.children.length;y<x;y++){const E=t.children[y],j=g(E),Y=c(e,E)-j;Y<u?(u=Y,_=j<_?j:_,o=E):Y===u&&j<_&&(_=j,o=E)}t=o||t.children[0]}return t}_insert(e,t,s){const o=s?e:(0,this._toBBox)(e);a.clear();const _=this._chooseSubtree(o,this._data,t,a);for(_.children.push(e),T(_,o);t>=0&&a.data[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(o,a,t)}_split(e,t){const s=e.data[t],i=s.children.length,o=this._minEntries;this._chooseSplitAxis(s,o,i);const _=this._chooseSplitIndex(s,o,i);if(!_)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const u=s.children.splice(_,s.children.length-_),y=s.leaf?new S(u):new M(u);y.height=s.height,m(s,this._toBBox),m(y,this._toBBox),t?e.data[t-1].children.push(y):this._splitRoot(s,y)}_splitRoot(e,t){this._data=new M([e,t]),this._data.height=e.height+1,m(this._data,this._toBBox)}_chooseSplitIndex(e,t,s){let i,o,_;i=o=1/0;for(let u=t;u<=s-t;u++){const y=B(e,0,u,this._toBBox),x=B(e,u,s,this._toBBox),E=I(y,x),j=g(y)+g(x);E<i?(i=E,_=u,o=j<o?j:o):E===i&&j<o&&(o=j,_=u)}return _}_chooseSplitAxis(e,t,s){const i=e.leaf?this._compareMinX:D,o=e.leaf?this._compareMinY:d;this._allDistMargin(e,t,s,i)<this._allDistMargin(e,t,s,o)&&e.children.sort(i)}_allDistMargin(e,t,s,i){e.children.sort(i);const o=this._toBBox,_=B(e,0,t,o),u=B(e,s-t,s,o);let y=r(_)+r(u);for(let x=t;x<s-t;x++){const E=e.children[x];T(_,e.leaf?o(E):E),y+=r(_)}for(let x=s-t-1;x>=t;x--){const E=e.children[x];T(u,e.leaf?o(E):E),y+=r(u)}return y}_adjustParentBBoxes(e,t,s){for(let i=s;i>=0;i--)T(t.data[i],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const s=e.data[t];if(0===s.children.length)if(t>0){const i=e.data[t-1],o=i.children;o.splice((0,p.cq)(o,s,o.length,i.indexHint),1)}else this.clear();else m(s,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function m(n,e){B(n,0,n.children.length,e,n)}function B(n,e,t,s,i){i||(i=new S([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o,_=e;_<t;_++)o=n.children[_],T(i,n.leaf?s(o):o);return i}function T(n,e){n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY)}function D(n,e){return n.minX-e.minX}function d(n,e){return n.minY-e.minY}function g(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function r(n){return n.maxX-n.minX+(n.maxY-n.minY)}function c(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function I(n,e){const t=Math.max(n.minX,e.minX),s=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,o-s)}function C(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function U(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function W(n,e,t,s,i){const o=[e,t];for(;o.length;){const _=(0,R.j0)(o.pop()),u=(0,R.j0)(o.pop());if(_-u<=s)continue;const y=u+Math.ceil((_-u)/s/2)*s;(0,P.q)(n,y,u,_,i),o.push(u,y,y,_)}}const l=new v.Z,f=new v.Z,a=new v.Z,L=new v.Z({deallocator:void 0});class X{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class b extends X{constructor(){super(...arguments),this.height=1,this.indexHint=new p.SO}}class S extends b{constructor(e){super(),this.children=e,this.leaf=!0}}class M extends b{constructor(e){super(),this.children=e,this.leaf=!1}}},61256:(F,A,h)=>{h.d(A,{H:()=>T});var p=h(8314),R=h(36592),v=h(65401);const O={minX:0,minY:0,maxX:0,maxY:0};class T{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new R.Q(9,(0,p.Z)("esri-csp-restrictions")?d=>({minX:d[0],minY:d[1],maxX:d[2],maxY:d[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const d=new Array(this._idByBounds.size);let g=0;this._idByBounds.forEach((r,c)=>{d[g++]=c}),this._indexInvalid=!1,this._index.clear(),this._index.load(d)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(d=>this._idByBounds.has(d))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const d=(0,v.cS)();for(const g of this._boundsById.values())g&&(d[0]=Math.min(g[0],d[0]),d[1]=Math.min(g[1],d[1]),d[2]=Math.max(g[2],d[2]),d[3]=Math.max(g[3],d[3]));return d}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(d){const g=this._boundsById.get(d);this._boundsById.delete(d),g&&(this._idByBounds.delete(g),this._indexInvalid||this._index.remove(g))}forEachInBounds(d,g){this._loadIndex(),function B(D,d,g){(function m(D){O.minX=D[0],O.minY=D[1],O.maxX=D[2],O.maxY=D[3]})(d),D.search(O,g)}(this._index,d,r=>g(this._idByBounds.get(r)))}get(d){return this._boundsById.get(d)}has(d){return this._boundsById.has(d)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(d,g){if(!this._indexInvalid){const r=this._boundsById.get(d);r&&(this._index.remove(r),this._idByBounds.delete(r))}this._boundsById.set(d,g),g&&(this._idByBounds.set(g,d),this._indexInvalid||(this._boundsToLoad.push(g),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},3579:(F,A,h)=>{h.d(A,{Z:()=>d});var p=h(26584),R=h(61885),v=h(63290),P=h(62208),O=h(5548),m=h(65401),B=h(82054),T=h(61256),D=h(92794);class d{constructor(r){this.geometryInfo=r,this._boundsStore=new T.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new R.Z,this.featureAdapter=D.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let r=0;return this._featuresById.forEach(c=>{(0,P.pC)(c.geometry)&&c.geometry.coords&&(r+=c.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:r/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(r){this._add(r),this._emitChanged()}addMany(r){for(const c of r)this._add(c);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(r){const c=this._featuresById.get(r);return c?(this._remove(c),this._emitChanged(),c):null}removeManyById(r){this._boundsStore.invalidateIndex();for(const c of r){const I=this._featuresById.get(c);I&&this._remove(I)}this._emitChanged()}forEachBounds(r,c,I){for(const C of r){const U=this._boundsStore.get(C.objectId);U&&c((0,O.JR)(I,U))}}getFeature(r){return this._featuresById.get(r)}has(r){return this._featuresById.has(r)}toArray(){return Array.from(this._featuresById.values())}forEach(r){this._featuresById.forEach(c=>r(c))}forEachInBounds(r,c){this._boundsStore.forEachInBounds(r,I=>{c(this._featuresById.get(I))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let r=!1;this._featuresById.forEach((c,I)=>{this._markedIds.has(I)||(r=!0,this._remove(c))}),this._markedIds.clear(),r&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(r){if(!r)return;const c=r.objectId;if(null==c)return void v.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new p.Z("featurestore:invalid-feature","feature id is missing",{feature:r}));const I=this._featuresById.get(c);let C;if(this._markedIds.add(c),I?(r.displayId=I.displayId,C=this._boundsStore.get(c),this._boundsStore.delete(c)):(0,P.pC)(this.onFeatureAdd)&&this.onFeatureAdd(r),(0,P.Wi)(r.geometry)||!r.geometry.coords||!r.geometry.coords.length)return this._boundsStore.set(c,null),void this._featuresById.set(c,r);C=(0,B.$)((0,P.pC)(C)?C:(0,m.Ue)(),r.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,P.pC)(C)&&this._boundsStore.set(c,C),this._featuresById.set(c,r)}_remove(r){return(0,P.pC)(this.onFeatureRemove)&&this.onFeatureRemove(r),this._markedIds.delete(r.objectId),this._boundsStore.delete(r.objectId),this._featuresById.delete(r.objectId),r}}},92794:(F,A,h)=>{h.d(A,{n:()=>O});var p=h(62208),R=h(77044),v=h(66385),P=h(88071);const O={getObjectId:m=>m.objectId,getAttributes:m=>m.attributes,getAttribute:(m,B)=>m.attributes[B],cloneWithGeometry:(m,B)=>new v.u_(B,m.attributes,null,m.objectId),getGeometry:m=>m.geometry,getCentroid:(m,B)=>((0,p.Wi)(m.centroid)&&(m.centroid=(0,R.Y)(new P.Z,m.geometry,B.hasZ,B.hasM)),m.centroid)}},62305:(F,A,h)=>{h.r(A),h.d(A,{default:()=>U});var p=h(15861),R=h(59213),v=h(26584),P=h(63290),O=h(62208),m=h(10699),B=h(37053),T=h(82054),D=h(3579),d=h(82959),g=h(58175),r=h(58775),c=h(35775),I=h(83774),C=h(60466);class U{constructor(){var l=this;this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=function(){var f=(0,p.Z)(function*(a){const{objectIdField:L}=l._queryEngine,X=yield(0,I.Bm)(l._getFeatureUrl??"",l._featureType.typeName,l._getFeatureOutputFormat,{customParameters:l._customParameters,dateFields:l._queryEngine.fieldsIndex.dateFields.map(M=>M.name),signal:a});yield(0,r.O3)(X),(0,m.k_)(a);const b=(0,r.lG)(X,{geometryType:l._queryEngine.geometryType,hasZ:!1,objectIdField:L});if(!(0,B.fS)(l._queryEngine.spatialReference,B.Zn))for(const M of b)(0,O.pC)(M.geometry)&&(M.geometry=(0,T.GH)((0,d.iV)((0,T.di)(M.geometry,l._queryEngine.geometryType,!1,!1),B.Zn,l._queryEngine.spatialReference)));let S=1;for(const M of b){const n={};(0,c.O0)(l._fieldsIndex,n,M.attributes,!0),M.attributes=n,null==M.attributes[L]&&(M.objectId=M.attributes[L]=S++)}return b});return function(a){return f.apply(this,arguments)}}()}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}load(l,f){var a=this;return(0,p.Z)(function*(){const{getFeatureUrl:L,getFeatureOutputFormat:X,spatialReference:b,fields:S,geometryType:M,featureType:n,objectIdField:e,customParameters:t}=l;a._featureType=n,a._customParameters=t,a._getFeatureUrl=L,a._getFeatureOutputFormat=X,a._fieldsIndex=new C.Z(S),yield a._checkProjection(b),(0,m.k_)(f),a._queryEngine=new g.q({fields:S,geometryType:M,hasM:!1,hasZ:!1,objectIdField:e,spatialReference:b,timeInfo:null,featureStore:new D.Z({geometryType:M,hasM:!1,hasZ:!1})});const s=yield a._snapshotFeatures((0,O.Wg)(f.signal));return a._queryEngine.featureStore.addMany(s),{extent:a._queryEngine.fullExtent}})()}applyEdits(){return(0,p.Z)(function*(){throw new v.Z("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")})()}queryFeatures(l={},f={}){var a=this;return(0,p.Z)(function*(){return yield a._waitSnapshotComplete(),a._queryEngine.executeQuery(l,f.signal)})()}queryFeatureCount(l={},f={}){var a=this;return(0,p.Z)(function*(){return yield a._waitSnapshotComplete(),a._queryEngine.executeQueryForCount(l,f.signal)})()}queryObjectIds(l={},f={}){var a=this;return(0,p.Z)(function*(){return yield a._waitSnapshotComplete(),a._queryEngine.executeQueryForIds(l,f.signal)})()}queryExtent(l={},f={}){var a=this;return(0,p.Z)(function*(){return yield a._waitSnapshotComplete(),a._queryEngine.executeQueryForExtent(l,f.signal)})()}querySnapping(l,f={}){var a=this;return(0,p.Z)(function*(){return yield a._waitSnapshotComplete(),a._queryEngine.executeQueryForSnapping(l,f.signal)})()}refresh(l){var f=this;return(0,p.Z)(function*(){return f._customParameters=l,f._snapshotTask?.abort(),f._snapshotTask=(0,R.vr)(f._snapshotFeatures),f._snapshotTask.promise.then(a=>{f._queryEngine.featureStore.clear(),a&&f._queryEngine.featureStore.addMany(a)},a=>{f._queryEngine.featureStore.clear(),(0,m.D_)(a)||P.Z.getLogger("esri.layers.WFSLayer").error(new v.Z("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:a}))}),yield f._waitSnapshotComplete(),{extent:f._queryEngine.fullExtent}})()}_waitSnapshotComplete(){var l=this;return(0,p.Z)(function*(){if(l._snapshotTask&&!l._snapshotTask.finished){try{yield l._snapshotTask.promise}catch{}return l._waitSnapshotComplete()}})()}_checkProjection(l){return(0,p.Z)(function*(){try{yield(0,d._W)(B.Zn,l)}catch{throw new v.Z("unsupported-projection","Projection not supported",{spatialReference:l})}})()}}}}]);